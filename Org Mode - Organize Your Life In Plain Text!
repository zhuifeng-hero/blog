&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<!-- 2016-06-29 周三 10:08 --><meta content="text/html;charset=utf-8" http-equiv="Content-Type" /><meta name="generator" content="Org-mode" /><meta name="author" content="Bernt Hansen (IRC: BerntH on freenode)" /><meta name="description" content="A description of how I currently use org-mode" /><meta name="keywords" content="org-mode Emacs organization GTD getting-things-done git" /><style type="text/css">

 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-r:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/--></style><link rel="stylesheet" type="text/css" href="https://github.com/zhuifeng-hero/emacs/blob/master/style.css" /><script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

<div id="content">
  <h1 class="title">Org Mode - Organize Your Life In Plain Text!</h1>

  <div id="table-of-contents">
    <h2>Table of Contents</h2>

    <div id="text-table-of-contents">
      <ul>
        <li><a href="#HowToUseThisDocument">1. How To Use This Document</a> </li>

        <li><a href="#License">2. License</a> </li>

        <li><a href="#ChangeHistory">3. Change History - What's new</a> </li>

        <li><a href="#GettingStarted">4. Getting Started</a> 

          <ul>
            <li><a href="#GettingOrgModeWithGit">4.1. Getting org-mode with Git</a> </li>

            <li><a href="#Setup">4.2. Org-Mode Setup</a> </li>

            <li><a href="#OrgFiles">4.3. Organizing Your Life Into Org Files</a> </li>

            <li><a href="#AgendaSetup">4.4. Agenda Setup</a> </li>

            <li><a href="#OrgFileStructure">4.5. Org File Structure</a> </li>

            <li><a href="#KeyBindings">4.6. Key bindings</a> </li>
          </ul>
        </li>

        <li><a href="#TasksAndStates">5. Tasks and States</a> 

          <ul>
            <li><a href="#TodoKeywords">5.1. TODO keywords</a> 

              <ul>
                <li><a href="#TodoKeywordTaskStates">5.1.1. Task States</a> </li>

                <li><a href="#TodoKeywordProjectTaskStates">5.1.2. Project Task States</a> </li>

                <li><a href="#TodoKeywordPhoneCalls">5.1.3. Phone Calls</a> </li>

                <li><a href="#TodoKeywordMeetings">5.1.4. Meetings</a> </li>
              </ul>
            </li>

            <li><a href="#FastTodoSelection">5.2. Fast Todo Selection</a> </li>

            <li><a href="#ToDoStateTriggers">5.3. TODO state triggers</a> </li>
          </ul>
        </li>

        <li><a href="#Capture">6. Adding New Tasks Quickly with Org Capture</a> 

          <ul>
            <li><a href="#CaptureTemplates">6.1. Capture Templates</a> </li>

            <li><a href="#CaptureRefileOrg">6.2. Separate file for Capture Tasks</a> </li>

            <li><a href="#CaptureTasksAreFast">6.3. Capture Tasks is all about being FAST</a> </li>
          </ul>
        </li>

        <li><a href="#Refiling">7. Refiling Tasks</a> 

          <ul>
            <li><a href="#RefileSetup">7.1. Refile Setup</a> </li>

            <li><a href="#RefilingTasks">7.2. Refiling Tasks</a> </li>

            <li><a href="#RefilingNotes">7.3. Refiling Notes</a> </li>

            <li><a href="#RefilingPhoneCalls">7.4. Refiling Phone Calls and Meetings</a> </li>
          </ul>
        </li>

        <li><a href="#CustomAgendaViews">8. Custom agenda views</a> 

          <ul>
            <li><a href="#CustomAgendaViewSetup">8.1. Setup</a> </li>

            <li><a href="#WhatDoIWorkOnNext">8.2. What do I work on next?</a> 

              <ul>
                <li><a href="#CustomAgendaViewsNextList">8.2.1. Why keep it all on the <code>NEXT</code> list?</a> </li>
              </ul>
            </li>

            <li><a href="#ReadingMailNewsIRC">8.3. Reading email, newsgroups, and conversations on IRC</a> </li>

            <li><a href="#CustomAgendaViewFiltering">8.4. Filtering</a> 

              <ul>
                <li><a href="#CustomAgendaViewFilteringContext">8.4.1. Automatically removing context based tasks with / RET</a> </li>
              </ul>
            </li>
          </ul>
        </li>

        <li><a href="#Clocking">9. Time Clocking</a> 

          <ul>
            <li><a href="#ClockSetup">9.1. Clock Setup</a> </li>

            <li><a href="#ClockingIn">9.2. Clocking in</a> 

              <ul>
                <li><a href="#ClockingInDefaultTask">9.2.1. Setting a default clock task</a> </li>

                <li><a href="#ClockingInByClockHistory">9.2.2. Using the clock history to clock in old tasks</a> </li>
              </ul>
            </li>

            <li><a href="#ClockEverythingWithNewTasks">9.3. Clock Everything - Create New Tasks</a> </li>

            <li><a href="#FindTasksToClockIn">9.4. Finding tasks to clock in</a> </li>

            <li><a href="#EditingClockEntries">9.5. Editing clock entries</a> </li>
          </ul>
        </li>

        <li><a href="#TimeReportingAndTracking">10. Time reporting and tracking</a> 

          <ul>
            <li><a href="#BillingClientsForClockedTime">10.1. Billing clients based on clocked time</a> 

              <ul>
                <li><a href="#VerifyingClockData">10.1.1. Verify that the clock data is complete and correct</a> </li>

                <li><a href="#ClockReports">10.1.2. Using clock reports to summarize time spent</a> </li>
              </ul>
            </li>

            <li><a href="#TaskEstimates">10.2. Task Estimates and column view</a> 

              <ul>
                <li><a href="#CreatingTaskEstimates">10.2.1. Creating a task estimate with column mode</a> </li>

                <li><a href="#SavingEstimate">10.2.2. Saving your estimate</a> </li>

                <li><a href="#ReviewingEstimates">10.2.3. Reviewing your estimate</a> </li>
              </ul>
            </li>

            <li><a href="#ProgressReporting">10.3. Providing progress reports to others</a> </li>
          </ul>
        </li>

        <li><a href="#Tags">11. Tags</a> 

          <ul>
            <li><a href="#OrgTagAlist">11.1. Tags</a> </li>

            <li><a href="#FileTags">11.2. Filetags</a> 

              <ul>
                <li><a href="#TaggingNonWorkFiles">11.2.1. Non-work related org-mode files</a> </li>

                <li><a href="#TaggingWorkFiles">11.2.2. Work related org-mode files</a> </li>

                <li><a href="#RefileTasks">11.2.3. Refile tasks</a> </li>
              </ul>
            </li>

            <li><a href="#StateTriggerTags">11.3. State Trigger Tags</a> </li>
          </ul>
        </li>

        <li><a href="#HandlingNotes">12. Handling Notes</a> </li>

        <li><a href="#HandlinePhoneCalls">13. Handling Phone Calls</a> </li>

        <li><a href="#GTD">14. GTD stuff</a> 

          <ul>
            <li><a href="#GTDWeeklyReview">14.1. Weekly Review Process</a> </li>

            <li><a href="#Projects">14.2. Project definition and finding stuck projects</a> </li>
          </ul>
        </li>

        <li><a href="#Archiving">15. Archiving</a> 

          <ul>
            <li><a href="#ArchivingSubtrees">15.1. Archiving Subtrees</a> </li>

            <li><a href="#ArchiveSetup">15.2. Archive Setup</a> </li>

            <li><a href="#ArchiveTagHidesInfo">15.3. Archive Tag - Hiding Information</a> </li>

            <li><a href="#WhenToArchive">15.4. When to Archive</a> </li>
          </ul>
        </li>

        <li><a href="#Publishing">16. Publishing and Exporting</a> 

          <ul>
            <li><a href="#sec-16-1">16.1. New Exporter Setup</a> 

              <ul>
                <li><a href="#sec-16-1-1">16.1.1. Conversion from the old exporter to the new exporter</a> </li>
              </ul>
            </li>

            <li><a href="#OrgBabel">16.2. Org-babel Setup</a> </li>

            <li><a href="#playingwithditaa">16.3. Playing with ditaa</a> </li>

            <li><a href="#Graphviz">16.4. Playing with graphviz</a> </li>

            <li><a href="#PlantUML">16.5. Playing with PlantUML</a> 

              <ul>
                <li><a href="#PlantUMLSequence">16.5.1. Sequence Diagram</a> </li>

                <li><a href="#PlantUMLActivity">16.5.2. Activity Diagram</a> </li>

                <li><a href="#PlantUMLUseCase">16.5.3. Usecase Diagram</a> </li>

                <li><a href="#PlantUMLObject">16.5.4. Object Diagram</a> </li>

                <li><a href="#PlantUMLState">16.5.5. State Diagram</a> </li>
              </ul>
            </li>

            <li><a href="#PublishingSingleFiles">16.6. Publishing Single Files</a> </li>

            <li><a href="#PublishingProjects">16.7. Publishing Projects</a> </li>

            <li><a href="#MiscBabelExportSettings">16.8. Miscellaneous Export Settings</a> 

              <ul>
                <li><a href="#FontifyLatexListings">16.8.1. Fontify Latex listings for source blocks</a> </li>

                <li><a href="#ExportHTMLWithoutXMLHeader">16.8.2. Export HTML without XML header</a> </li>

                <li><a href="#AllowVariableBindingForExport">16.8.3. Allow binding variables on export without confirmation</a> </li>
              </ul>
            </li>
          </ul>
        </li>

        <li><a href="#Reminders">17. Reminders</a> 

          <ul>
            <li><a href="#ReminderSetup">17.1. Reminder Setup</a> </li>
          </ul>
        </li>

        <li><a href="#ProductivityTools">18. Productivity Tools</a> 

          <ul>
            <li><a href="#AbbrevMode">18.1. Abbrev-mode and Skeletons</a> 

              <ul>
                <li><a href="#ActivityDiagramExample">18.1.1. Example PlantUml Activity Diagram Generation</a> </li>
              </ul>
            </li>

            <li><a href="#FocusOnCurrentWork">18.2. Focus On Current Work</a> 

              <ul>
                <li><a href="#NarrowToSubtree">18.2.1. Narrowing to a subtree with <code>bh/org-todo</code></a> </li>

                <li><a href="#AgendaNarrowToSubtree">18.2.2. Limiting the agenda to a subtree</a> </li>

                <li><a href="#AgendaNarrowToFile">18.2.3. Limiting the agenda to a file</a> </li>
              </ul>
            </li>

            <li><a href="#TuningAgendaViews">18.3. Tuning the Agenda Views</a> 

              <ul>
                <li><a href="#HighlightCurrentAgendaLine">18.3.1. Highlight the current agenda line</a> </li>

                <li><a href="#GlobalTodoListsShowAllTasks">18.3.2. Keep tasks with timestamps visible on the global todo lists</a> </li>

                <li><a href="#DiaryForAppointments">18.3.3. Use the Diary for Holidays and Appointments</a> </li>

                <li><a href="#SearchesIncludeArchiveFiles">18.3.4. Searches include archive files</a> </li>

                <li><a href="#AgendaViewTweaks">18.3.5. Agenda view tweaks</a> </li>

                <li><a href="#StickyAgendas">18.3.6. Sticky Agendas</a> </li>
              </ul>
            </li>

            <li><a href="#ChecklistHandling">18.4. Checklist handling</a> </li>

            <li><a href="#Backups">18.5. Backups</a> </li>

            <li><a href="#HandlingBlockedTasks">18.6. Handling blocked tasks</a> </li>

            <li><a href="#OrgTaskStructureAndPresentation">18.7. Org Task structure and presentation</a> 

              <ul>
                <li><a href="#DisplayLeadingStars">18.7.1. Controlling display of leading stars on headlines</a> </li>

                <li><a href="#OrgIndentMode">18.7.2. org-indent mode</a> </li>

                <li><a href="#HandlingBlankLines">18.7.3. Handling blank lines</a> </li>

                <li><a href="#AddingNewTasks">18.7.4. Adding new tasks quickly without disturbing the current task content</a> </li>

                <li><a href="#NotesAtTop">18.7.5. Notes at the top</a> </li>

                <li><a href="#SearchingResults">18.7.6. Searching and showing results</a> </li>

                <li><a href="#SpecialKeyHandling">18.7.7. Editing and Special key handling</a> </li>
              </ul>
            </li>

            <li><a href="#Attachments">18.8. Attachments</a> </li>

            <li><a href="#DeadlinesAndAgendaVisibility">18.9. Deadlines and Agenda Visibility</a> </li>

            <li><a href="#TableExportToCSV">18.10. Exporting Tables to CSV</a> </li>

            <li><a href="#MinimizeFrames">18.11. Minimize Emacs Frames</a> </li>

            <li><a href="#LoggingStuff">18.12. Logging stuff</a> </li>

            <li><a href="#LimitingTimeSpentOnTasks">18.13. Limiting time spent on tasks</a> </li>

            <li><a href="#HabitTracking">18.14. Habit Tracking</a> </li>

            <li><a href="#HabitsLogDone">18.15. Habits only log DONE state changes</a> </li>

            <li><a href="#AutoRevertMode">18.16. Auto revert mode</a> </li>

            <li><a href="#HandlingEncryption">18.17. Handling Encryption</a> 

              <ul>
                <li><a href="#AutoSaveFiles">18.17.1. Auto Save Files</a> </li>
              </ul>
            </li>

            <li><a href="#SpeedCommands">18.18. Speed Commands</a> </li>

            <li><a href="#OrgProtocol">18.19. Org Protocol</a> </li>

            <li><a href="#RequireFinalNewline">18.20. Require a final newline when saving files</a> </li>

            <li><a href="#InsertInactiveTimestamps">18.21. Insert inactive timestamps and exclude from export</a> </li>

            <li><a href="#ReturnFollowsLink">18.22. Return follows links</a> </li>

            <li><a href="#HighlightClockOvertime">18.23. Highlight clock when running overtime</a> </li>

            <li><a href="#MeetingNotes">18.24. Meeting Notes</a> </li>

            <li><a href="#HighlightPersistAfterEdit">18.25. Remove Highlights after changes</a> </li>

            <li><a href="#OrgModeInfoDocumentation">18.26. Getting up to date org-mode info documentation</a> </li>

            <li><a href="#FutureDates">18.27. Prefer future dates or not?</a> </li>

            <li><a href="#ListBullets">18.28. Automatically change list bullets</a> </li>

            <li><a href="#IndentationOnTagsView">18.29. Remove indentation on agenda tags view</a> </li>

            <li><a href="#FontifySrcBlocksNatively">18.30. Fontify source blocks natively</a> </li>

            <li><a href="#AgendaPersistentFilters">18.31. Agenda persistent filters</a> </li>

            <li><a href="#TagFlaggedEntries">18.32. Add tags for flagged entries</a> </li>

            <li><a href="#MailLinksOpenComposeMail">18.33. Mail links open compose-mail</a> </li>

            <li><a href="#MailingSubtrees">18.34. Composing mail from org mode subtrees</a> </li>

            <li><a href="#SmexAndIdo">18.35. Use smex for M-x ido-completion</a> </li>

            <li><a href="#BookmarksFastNavigation">18.36. Use Emacs bookmarks for fast navigation</a> </li>

            <li><a href="#OrgMimeMail">18.37. Using org-mime to email</a> </li>

            <li><a href="#StateChangeDetailsInAgenda">18.38. Remove multiple state change log details from the agenda</a> </li>

            <li><a href="#OldTableReferences">18.39. Drop old style references in tables</a> </li>

            <li><a href="#SystemSettingsForApplicationSelection">18.40. Use system settings for file-application selection</a> </li>

            <li><a href="#CurrentWindowForAgenda">18.41. Use the current window for the agenda</a> </li>

            <li><a href="#DeleteIdsWhenCloning">18.42. Delete IDs when cloning</a> </li>

            <li><a href="#CyclePlainLists">18.43. Cycling plain lists</a> </li>

            <li><a href="#ShowSrcBlockSyntax">18.44. Showing source block syntax highlighting</a> </li>

            <li><a href="#StructureTemplateBlocks">18.45. Inserting Structure Template Blocks</a> </li>

            <li><a href="#NextTasks">18.46. NEXT is for tasks</a> </li>

            <li><a href="#StartupView">18.47. Startup in folded view</a> </li>

            <li><a href="#AlphabeticalLists">18.48. Allow alphabetical list entries</a> </li>

            <li><a href="#OrgStructModeForMail">18.49. Using orgstruct mode for mail</a> </li>

            <li><a href="#FlySpellModeChecksSpelling">18.50. Using flyspell mode to reduce spelling errors</a> </li>

            <li><a href="#PreserveSourceIndentations">18.51. Preserving source block indentation</a> </li>

            <li><a href="#PreventInvisibleEdits">18.52. Prevent editing invisible text</a> </li>

            <li><a href="#DefaultCodingSystem">18.53. Use utf-8 as default coding system</a> </li>

            <li><a href="#ClockDurationsNoDays">18.54. Keep clock durations in hours</a> </li>

            <li><a href="#LinkingToTaskCreatesId">18.55. Create unique IDs for tasks when linking</a> </li>
          </ul>
        </li>

        <li><a href="#Unused">19. Things I Don't Use (Anymore)</a> 

          <ul>
            <li><a href="#ArchiveSibling">19.1. Archive Sibling</a> </li>

            <li><a href="#StrikeThroughEmphasis">19.2. Strike-through emphasis</a> </li>

            <li><a href="#SubscriptsAndSuperscripts">19.3. Subscripts and Superscripts</a> </li>

            <li><a href="#Yasnippets">19.4. Yasnippet</a> </li>

            <li><a href="#HeadingLevelsOddEven">19.5. Show headings at odd levels only or odd-even levels</a> </li>

            <li><a href="#PropagateStartedToParent">19.6. Propagate STARTED to parent tasks</a> </li>

            <li><a href="#AutomaticallyClockingTasks">19.7. Automatically clocking tasks</a> </li>

            <li><a href="#QBuriesAgenda">19.8. q buries the agenda view buffer</a> </li>

            <li><a href="#TaskPriorities">19.9. Task Priorities</a> </li>
          </ul>
        </li>

        <li><a href="#GitSync">20. Using Git for Automatic History, Backups, and Synchronization</a> 

          <ul>
            <li><a href="#HourlyCommits">20.1. Automatic Hourly Commits</a> 

              <ul>
                <li><a href="#OrgGitSyncSh">20.1.1. ~/bin/org-git-sync.sh</a> </li>
              </ul>
            </li>

            <li><a href="#GitEditWithConfidence">20.2. Git - Edit files with confidence</a> </li>

            <li><a href="#git-sync">20.3. Git Repository synchronization</a> </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>

  <p>Org-mode is a fabulous organizational tool originally built by Carsten Dominik that operates on plain text files. Org-mode is part of Emacs. </p>

  <div id="outline-container-HowToUseThisDocument" class="outline-2">
    <h2 id="HowToUseThisDocument"><a id="sec-1" name="sec-1"></a><span class="section-number-2">1</span> How To Use This Document</h2>

    <div id="text-HowToUseThisDocument" class="outline-text-2">
      

      <p>This document assumes you've had some exposure to org-mode already so concepts like the agenda, capture mode, etc. won't be completely foreign to you. More information about org-mode can be found in the <a href="http://orgmode.org/index.html#sec-4.1">Org-Mode Manual</a> and on the <a href="http://orgmode.org/worg/">Worg Site</a>. </p>

      <p>I have been using org-mode as my personal information manager for years now. I started small with just the default <code>TODO</code> and <code>DONE</code> keywords. I added small changes to my workflow and over time it evolved into what is described by this document. </p>

      <p>I still change my workflow and try new things regularly. This document describes mature workflows in my current org-mode setup. I tend to document changes to my workflow 30 days after implementing them (assuming they are still around at that point) so that the new workflow has a chance to mature. </p>

      <p>Some of the customized Emacs settings described in this document are set at their default values. This explicitly shows the setting for important org-mode variables used in my workflow and to keep my workflow behaviour stable in the event that the default value changes in the future. </p>

      <p>This document is available as an <a href="http://doc.norang.ca/org-mode.org">org file</a> which you can load in Emacs and tangle with <code>C-c C-v C-t</code> which will create org-mode.el in the same directory as the org-mode.org file. This will extract all of the elisp examples in this document into a file you can include in your .emacs file. </p>
    </div>
  </div>

  <div id="outline-container-License" class="outline-2">
    <h2 id="License"><a id="sec-2" name="sec-2"></a><span class="section-number-2">2</span> License</h2>

    <div id="text-License" class="outline-text-2">
      

      <pre class="example">Copyright (C)  2013  Bernt Hansen.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
  
Code in this document is free software: you can redistribute it
and/or modify it under the terms of the GNU General Public
License as published by the Free Software Foundation, either
version 3 of the License, or (at your option) any later version.
  
This code is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</pre>

      <p>This document <a href="http://doc.norang.ca/org-mode.html">http://doc.norang.ca/org-mode.html</a> (either in its <a href="http://doc.norang.ca/org-mode.html">HTML format</a> or in its <a href="http://doc.norang.ca/org-mode.org">Org format</a>) is licensed under the GNU Free Documentation License version 1.3 or later (<a href="http://www.gnu.org/copyleft/fdl.html">http://www.gnu.org/copyleft/fdl.html</a>). </p>

      <p>The code examples and CSS stylesheets are licensed under the GNU General Public License v3 or later (<a href="http://www.gnu.org/licenses/gpl.html">http://www.gnu.org/licenses/gpl.html</a>). </p>
    </div>
  </div>

  <div id="outline-container-ChangeHistory" class="outline-2">
    <h2 id="ChangeHistory"><a id="sec-3" name="sec-3"></a><span class="section-number-2">3</span> Change History - What's new</h2>

    <div id="text-ChangeHistory" class="outline-text-2">
      <p>This is version <code>nil</code> of this document. This document is created using the publishing features of <code>org-mode</code> git version <code>nil</code>. </p>

      <p>The source for this document can be found as a <a href="http://doc.norang.ca/org-mode.org">plain text org file</a>. I try to update this document about once a month. </p>

      <p>The change history for this document can be found at <a href="http://git.norang.ca/?p=org-mode-doc.git;a=summary">git://git.norang.ca/org-mode-doc.git</a>. </p>
    </div>
  </div>

  <div id="outline-container-GettingStarted" class="outline-2">
    <h2 id="GettingStarted"><a id="sec-4" name="sec-4"></a><span class="section-number-2">4</span> Getting Started</h2>

    <div id="text-GettingStarted" class="outline-text-2">
      <p>Getting started with <code>org-mode</code> is really easy. You only need a few lines in your emacs startup to use the latest version of org-mode from the <code>git</code> repository. </p>
    </div>

    <div id="outline-container-GettingOrgModeWithGit" class="outline-3">
      <h3 id="GettingOrgModeWithGit"><a id="sec-4-1" name="sec-4-1"></a><span class="section-number-3">4.1</span> Getting org-mode with Git</h3>

      <div id="text-GettingOrgModeWithGit" class="outline-text-3">
        

        <p>I keep a copy of the org-mode <code>git</code> repository in <code>~/git/org-mode/</code>. This clone was created with </p>

        <div class="org-src-container">
          <pre class="src src-sh"><span style="color: #a020f0">cd</span> ~/git
git clone git://orgmode.org/org-mode.git</pre>
        </div>

        <p>To update and get new commits from the org-mode developers you can use </p>

        <div class="org-src-container">
          <pre class="src src-sh"><span style="color: #a020f0">cd</span> ~/git/org-mode
git pull
make uncompiled</pre>
        </div>

        <p>I run uncompiled source files in my setup so the uncompiled <code>make</code> target is all you need. </p>

        <p>I normally track the <code>master</code> branch in the org-mode repository. </p>
      </div>
    </div>

    <div id="outline-container-Setup" class="outline-3">
      <h3 id="Setup"><a id="sec-4-2" name="sec-4-2"></a><span class="section-number-3">4.2</span> Org-Mode Setup</h3>

      <div id="text-Setup" class="outline-text-3">
        <p>The following setup in my .emacs enables <code>org-mode</code> for most buffers. <code>org-mode</code> is the default mode for <code>.org</code>, <code>.org_archive</code>, and <code>.txt</code> files. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;;;</span>
<span style="color: #204a87">;;; </span><span style="color: #204a87">Org Mode</span>
<span style="color: #204a87">;;;</span>
<span style="color: #707183">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">load-path</span> <span style="color: #7388d6">(</span>expand-file-name <span style="color: #4e9a06">&quot;~/git/org-mode/lisp&quot;</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">auto-mode-alist</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span><span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">.</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">(</span><span style="color: #4e9a06">org</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">org_archive</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">txt</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">)</span><span style="color: #4e9a06">$&quot;</span> . org-mode<span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org</span><span style="color: #707183">)</span>
<span style="color: #204a87">;;</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Standard key bindings</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-cl&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-store-link</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-ca&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-cb&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-iswitchb</span><span style="color: #707183">)</span></pre>
        </div>

        <p>That's all you need to get started using headlines and lists in org-mode. </p>

        <p>The rest of this document describes customizations I use in my setup, how I structure org-mode files, and other changes to fit the way I want org-mode to work. </p>
      </div>
    </div>

    <div id="outline-container-OrgFiles" class="outline-3">
      <h3 id="OrgFiles"><a id="sec-4-3" name="sec-4-3"></a><span class="section-number-3">4.3</span> Organizing Your Life Into Org Files</h3>

      <div id="text-OrgFiles" class="outline-text-3">
        <p>Tasks are separated into logical groupings or projects. Use separate org files for large task groupings and subdirectories for collections of files for multiple projects that belong together. </p>

        <p>Here are sample files that I use. </p>

        <p>The following org files collect non-work related tasks: </p>

        <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
            <tr>
              <th class="left" scope="col">Filename</th>

              <th class="left" scope="col">Description</th>
            </tr>
          </thead><tbody>
            <tr>
              <td class="left">todo.org</td>

              <td class="left">Personal tasks and things to keep track of</td>
            </tr>

            <tr>
              <td class="left">gsoc2009.org</td>

              <td class="left">Google Summer of Code stuff for 2009</td>
            </tr>

            <tr>
              <td class="left">farm.org</td>

              <td class="left">Farm related tasks</td>
            </tr>

            <tr>
              <td class="left">mark.org</td>

              <td class="left">Tasks related to my son Mark</td>
            </tr>

            <tr>
              <td class="left">org.org</td>

              <td class="left">Org-mode related tasks</td>
            </tr>

            <tr>
              <td class="left">git.org</td>

              <td class="left">Git related tasks</td>
            </tr>
          </tbody></table>

        <p>The following org-file collects org capture notes and tasks: </p>

        <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
            <tr>
              <th class="left" scope="col">Filename</th>

              <th class="left" scope="col">Description</th>
            </tr>
          </thead><tbody>
            <tr>
              <td class="left">refile.org</td>

              <td class="left">Capture task bucket</td>
            </tr>
          </tbody></table>

        <p>The following work-related org-files keep my business notes (using fictitious client names) </p>

        <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
            <tr>
              <th class="left" scope="col">Filename</th>

              <th class="left" scope="col">Description</th>
            </tr>
          </thead><tbody>
            <tr>
              <td class="left">norang.org</td>

              <td class="left">Norang tasks and notes</td>
            </tr>

            <tr>
              <td class="left">XYZ.org</td>

              <td class="left">XYZ Corp tasks and notes</td>
            </tr>

            <tr>
              <td class="left">ABC.org</td>

              <td class="left">ABC Ltd tasks</td>
            </tr>

            <tr>
              <td class="left">ABC-DEF.org</td>

              <td class="left">ABC Ltd tasks for their client DEF Corp</td>
            </tr>

            <tr>
              <td class="left">ABC-KKK.org</td>

              <td class="left">ABC Ltd tasks for their client KKK Inc</td>
            </tr>

            <tr>
              <td class="left">YYY.org</td>

              <td class="left">YYY Inc tasks</td>
            </tr>
          </tbody></table>

        <p>Org-mode is great for dealing with multiple clients and client projects. An org file becomes the collection of projects, notes, etc. for a single client or client-project. </p>

        <p>Client ABC Ltd. has multiple customer systems that I work on. Separating the tasks for each client-customer into separate org files helps keep things logically grouped and since clients come and go this allows entire org files to be added or dropped from my agenda to keep only what is important visible in agenda views. </p>

        <p>Other org files are used for publishing only and do not contribute to the agenda. See <a href="#Publishing">Publishing and Exporting</a> for more details. </p>
      </div>
    </div>

    <div id="outline-container-AgendaSetup" class="outline-3">
      <h3 id="AgendaSetup"><a id="sec-4-4" name="sec-4-4"></a><span class="section-number-3">4.4</span> Agenda Setup</h3>

      <div id="text-AgendaSetup" class="outline-text-3">
        <p>Here is my current <code>org-agenda-files</code> setup. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-files <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #4e9a06">&quot;~/git/org&quot;</span>
                               <span style="color: #4e9a06">&quot;~/git/org/client1&quot;</span>
                               <span style="color: #4e9a06">&quot;~/git/client2&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p><code>org-mode</code> manages the <code>org-agenda-files</code> variable automatically using <code>C-c [</code> and <code>C-c ]</code> to add and remove files respectively. However, this replaces my directory list with a list of explicit filenames instead and is not what I want. If this occurs then adding a new org file to any of the above directories will not contribute to my agenda and I will probably miss something important. </p>

        <p>I have disabled the <code>C-c [</code> and <code>C-c ]</code> keys in <code>org-mode-hook</code> to prevent messing up my list of directories in the <code>org-agenda-files</code> variable. I just add and remove directories manually in my <code>.emacs</code> file. Changing the list of directories in <code>org-agenda-files</code> happens very rarely since new files in existing directories are automatically picked up. </p>

        <p>I also disable the comment function <code>C-c ;</code> since I never use those. I kept accidentally hitting this key sequence when doing <code>C-c singlequote</code> for editing source blocks. </p>

        <p>In the example above I have <code>~/git/client2</code> in a separate git repository from ~/git/org. This gives me the flexibility of leaving confidential information at the client site and having all of my personal information available everywhere I use org-mode. I synchronize my personal repositories on multiple machines and skip the confidential info on the non-client laptop I travel with. <code>org-agenda-files</code> on this laptop does not include the <code>~/git/client2</code> directory. </p>
      </div>
    </div>

    <div id="outline-container-OrgFileStructure" class="outline-3">
      <h3 id="OrgFileStructure"><a id="sec-4-5" name="sec-4-5"></a><span class="section-number-3">4.5</span> Org File Structure</h3>

      <div id="text-OrgFileStructure" class="outline-text-3">
        <p>Most of my org files are set up with level 1 headings as main categories only. Tasks and projects normally start as level 2. </p>

        <p>Here are some examples of my level 1 headings in </p>

        <p><code>todo.org</code>: </p>

        <ul class="org-ul">
          <li>Special Dates 
            <p>Includes level 2 headings for </p>

            <ul class="org-ul">
              <li>Birthdays </li>

              <li>Anniversaries </li>

              <li>Holidays </li>
            </ul>
          </li>

          <li>Finances </li>

          <li>Health and Recreation </li>

          <li>House Maintenance </li>

          <li>Lawn and Garden Maintenance </li>

          <li>Notes </li>

          <li>Tasks </li>

          <li>Vehicle Maintenance </li>

          <li>Passwords </li>
        </ul>

        <p><code>norang.org</code>: </p>

        <ul class="org-ul">
          <li>System Maintenance </li>

          <li>Payroll </li>

          <li>Accounting </li>

          <li>Finances </li>

          <li>Hardware Maintenance </li>

          <li>Tasks </li>

          <li>Research and Development </li>

          <li>Notes </li>

          <li>Purchase Order Tracking </li>

          <li>Passwords </li>
        </ul>

        <p>Each of these level 1 tasks normally has a <code>property drawer</code> specifying the category for any tasks in that tree. Level 1 headings are set up like this: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* Health and Recreation</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:CATEGORY:</span> Health
<span style="font-weight: bold; color: #a52a2a">  :END:</span>
  ...
<span style="font-weight: bold; color: #00578e">* House Maintenance</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:CATEGORY:</span> House
<span style="font-weight: bold; color: #a52a2a">  :END:</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-KeyBindings" class="outline-3">
      <h3 id="KeyBindings"><a id="sec-4-6" name="sec-4-6"></a><span class="section-number-3">4.6</span> Key bindings</h3>

      <div id="text-KeyBindings" class="outline-text-3">
        <p>I live in the agenda. To make getting to the agenda faster I mapped <code>F12</code> to the sequence <code>C-c a</code> since I'm using it hundreds of times a day. </p>

        <p>I have the following custom key bindings set up for my emacs (sorted by frequency). </p>

        <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /><col class="left" /></colgroup><thead>
            <tr>
              <th class="left" scope="col">Key</th>

              <th class="left" scope="col">For</th>

              <th class="left" scope="col">Used</th>
            </tr>
          </thead><tbody>
            <tr>
              <td class="left">F12</td>

              <td class="left">Agenda (1 key less than C-c a)</td>

              <td class="left">Very Often</td>
            </tr>

            <tr>
              <td class="left">C-c b</td>

              <td class="left">Switch to org file</td>

              <td class="left">Very Often</td>
            </tr>

            <tr>
              <td class="left">F11</td>

              <td class="left">Goto currently clocked item</td>

              <td class="left">Very Often</td>
            </tr>

            <tr>
              <td class="left">C-c c</td>

              <td class="left">Capture a task</td>

              <td class="left">Very Often</td>
            </tr>

            <tr>
              <td class="left">C-F11</td>

              <td class="left">Clock in a task (show menu with prefix)</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">f9 g</td>

              <td class="left">Gnus - I check mail regularly</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">f5</td>

              <td class="left">Show todo items for this subtree</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">S-f5</td>

              <td class="left">Widen</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">f9 b</td>

              <td class="left">Quick access to bbdb data</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">f9 c</td>

              <td class="left">Calendar access</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">C-S-f12</td>

              <td class="left">Save buffers and publish current project</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">C-c l</td>

              <td class="left">Store a link for retrieval with C-c C-l</td>

              <td class="left">Often</td>
            </tr>

            <tr>
              <td class="left">f8</td>

              <td class="left">Go to next org file in org-agenda-files</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 r</td>

              <td class="left">Boxquote selected region</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 t</td>

              <td class="left">Insert inactive timestamp</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 v</td>

              <td class="left">Toggle visible mode (for showing/editing links)</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">C-f9</td>

              <td class="left">Previous buffer</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">C-f10</td>

              <td class="left">Next buffer</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">C-x n r</td>

              <td class="left">Narrow to region</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 f</td>

              <td class="left">Boxquote insert a file</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 i</td>

              <td class="left">Info manual</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 I</td>

              <td class="left">Punch Clock In</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 O</td>

              <td class="left">Punch Clock Out</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 o</td>

              <td class="left">Switch to org scratch buffer</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 s</td>

              <td class="left">Switch to scratch buffer</td>

              <td class="left">Sometimes</td>
            </tr>

            <tr>
              <td class="left">f9 h</td>

              <td class="left">Hide other tasks</td>

              <td class="left">Rare</td>
            </tr>

            <tr>
              <td class="left">f7</td>

              <td class="left">Toggle line truncation/wrap</td>

              <td class="left">Rare</td>
            </tr>

            <tr>
              <td class="left">f9 T</td>

              <td class="left">Toggle insert inactive timestamp</td>

              <td class="left">Rare</td>
            </tr>

            <tr>
              <td class="left">C-c a</td>

              <td class="left">Enter Agenda (minimal emacs testing)</td>

              <td class="left">Rare</td>
            </tr>
          </tbody></table>

        <p>Here is the keybinding setup in lisp: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Custom Key Bindings</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f12&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f5&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/org-todo</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;S-f5&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/widen</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f7&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/set-truncate-lines</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f8&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-cycle-agenda-files</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; &lt;f9&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/show-org-agenda</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; b&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bbdb</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; c&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">calendar</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; f&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">boxquote-insert-file</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; g&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">gnus</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; h&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/hide-other</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; n&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/toggle-next-task-display</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; I&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/punch-in</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; O&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/punch-out</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; o&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/make-org-scratch</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; r&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">boxquote-region</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; s&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/switch-to-scratch</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; t&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/insert-inactive-timestamp</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; T&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/toggle-insert-inactive-timestamp</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; v&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">visible-mode</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; l&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-toggle-link-display</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; SPC&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/clock-in-last-task</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-&lt;f9&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">previous-buffer</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;M-&lt;f9&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-toggle-inline-images</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-x n r&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">narrow-to-region</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-&lt;f10&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">next-buffer</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f11&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-clock-goto</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-&lt;f11&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-clock-in</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-s-&lt;f12&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/save-then-publish</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-c c&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-capture</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/hide-other</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
    <span style="color: #909183">(</span>org-back-to-heading <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">invisible-ok</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>hide-other<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-cycle<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-cycle<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-cycle<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/set-truncate-lines</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Toggle value of truncate-lines and refresh window display.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> truncate-lines <span style="color: #909183">(</span>not truncate-lines<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">now refresh window display (an idiom from simple.el):</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
    <span style="color: #909183">(</span>set-window-start <span style="color: #709870">(</span>selected-window<span style="color: #709870">)</span>
                      <span style="color: #709870">(</span>window-start <span style="color: #907373">(</span>selected-window<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/make-org-scratch</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>find-file <span style="color: #4e9a06">&quot;/tmp/publish/scratch.org&quot;</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>gnus-make-directory <span style="color: #4e9a06">&quot;/tmp/publish&quot;</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/switch-to-scratch</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>switch-to-buffer <span style="color: #4e9a06">&quot;*scratch*&quot;</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>The main reason I have special key bindings (like <code>F11</code>, and <code>F12</code>) is so that the keys work in any mode. If I'm in the Gnus summary buffer then <code>C-u C-c C-x C-i</code> doesn't work, but the <code>C-F11</code> key combination does and this saves me time since I don't have to visit an org-mode buffer first just to clock in a recent task. </p>
      </div>
    </div>
  </div>

  <div id="outline-container-TasksAndStates" class="outline-2">
    <h2 id="TasksAndStates"><a id="sec-5" name="sec-5"></a><span class="section-number-2">5</span> Tasks and States</h2>

    <div id="text-TasksAndStates" class="outline-text-2">
      <p>I use one set of TODO keywords for all of my org files. Org-mode lets you define TODO keywords per file but I find it's easier to have a standard set of TODO keywords globally so I can use the same setup in any org file I'm working with. </p>

      <p>The only exception to this is this document :) since I don't want <code>org-mode</code> hiding the <code>TODO</code> keyword when it appears in headlines. I've set up a dummy <code>#+SEQ_TODO: FIXME FIXED</code> entry at the top of this file just to leave my <code>TODO</code> keyword untouched in this document. </p>
    </div>

    <div id="outline-container-TodoKeywords" class="outline-3">
      <h3 id="TodoKeywords"><a id="sec-5-1" name="sec-5-1"></a><span class="section-number-3">5.1</span> TODO keywords</h3>

      <div id="text-TodoKeywords" class="outline-text-3">
        <p>I use a light colour theme in emacs. I find this easier to read on bright sunny days. </p>

        <p>Here are my <code>TODO</code> state keywords and colour settings: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-todo-keywords
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>sequence <span style="color: #4e9a06">&quot;TODO(t)&quot;</span> <span style="color: #4e9a06">&quot;NEXT(n)&quot;</span> <span style="color: #4e9a06">&quot;|&quot;</span> <span style="color: #4e9a06">&quot;DONE(d)&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span>sequence <span style="color: #4e9a06">&quot;WAITING(w@/!)&quot;</span> <span style="color: #4e9a06">&quot;HOLD(h@/!)&quot;</span> <span style="color: #4e9a06">&quot;|&quot;</span> <span style="color: #4e9a06">&quot;CANCELLED(c@/!)&quot;</span> <span style="color: #4e9a06">&quot;PHONE&quot;</span> <span style="color: #4e9a06">&quot;MEETING&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-todo-keyword-faces
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;TODO&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;red&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;NEXT&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;blue&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;DONE&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;forest green&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;orange&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;magenta&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;CANCELLED&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;forest green&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;MEETING&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;forest green&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;PHONE&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;forest green&quot;</span> <span style="color: #a020f0">:weight</span> bold<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>

      <div id="outline-container-TodoKeywordTaskStates" class="outline-4">
        <h4 id="TodoKeywordTaskStates"><a id="sec-5-1-1" name="sec-5-1-1"></a><span class="section-number-4">5.1.1</span> Task States</h4>

        <div id="text-TodoKeywordTaskStates" class="outline-text-4">
          <p>Tasks go through the sequence <code>TODO</code> -&gt; <code>DONE</code>. </p>

          <p>The following diagram shows the possible state transitions for a task. </p>

          <div class="org-src-container">
            <pre class="src src-plantuml">title Task States
[*] -&gt; TODO
TODO -&gt; NEXT
TODO -&gt; DONE
NEXT -&gt; DONE
DONE -&gt; [*]
TODO --&gt; WAITING
WAITING --&gt; TODO
NEXT --&gt; WAITING
WAITING --&gt; NEXT
HOLD --&gt; CANCELLED
WAITING --&gt; CANCELLED
CANCELLED --&gt; [*]
TODO --&gt; HOLD
HOLD --&gt; TODO
TODO --&gt; CANCELLED
TODO: t
NEXT: n
DONE: d
WAITING:w
note right of WAITING: Note records\nwhat it is waiting for
HOLD:h
note right of CANCELLED: Note records\nwhy it was cancelled
CANCELLED:c
WAITING --&gt; DONE</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-TodoKeywordProjectTaskStates" class="outline-4">
        <h4 id="TodoKeywordProjectTaskStates"><a id="sec-5-1-2" name="sec-5-1-2"></a><span class="section-number-4">5.1.2</span> Project Task States</h4>

        <div id="text-TodoKeywordProjectTaskStates" class="outline-text-4">
          <p>I use a lazy project definition. I don't like to bother with manually stating 'this is a project' and 'that is not a project'. For me a project definition is really simple. If a task has subtasks with a todo keyword then it's a project. That's it. </p>

          <p>Projects can be defined at any level - just create a task with a todo state keyword that has at least one subtask also with a todo state keyword and you have a project. Projects use the same todo keywords as regular tasks. One subtask of a project needs to be marked <code>NEXT</code> so the project is not on the stuck projects list. </p>
        </div>
      </div>

      <div id="outline-container-TodoKeywordPhoneCalls" class="outline-4">
        <h4 id="TodoKeywordPhoneCalls"><a id="sec-5-1-3" name="sec-5-1-3"></a><span class="section-number-4">5.1.3</span> Phone Calls</h4>

        <div id="text-TodoKeywordPhoneCalls" class="outline-text-4">
          <p>Telephone calls are special. They are created in a done state by a capture task. The time of the call is recorded for as long as the capture task is active. If I need to look up other details and want to close the capture task early I can just <code>C-c C-c</code> to close the capture task (stopping the clock) and then <code>f9 SPC</code> to resume the clock in the phone call while I do other things. </p>

          <div class="org-src-container">
            <pre class="src src-plantuml">title Phone Call Task State
[*] -&gt; PHONE
PHONE -&gt; [*]</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-TodoKeywordMeetings" class="outline-4">
        <h4 id="TodoKeywordMeetings"><a id="sec-5-1-4" name="sec-5-1-4"></a><span class="section-number-4">5.1.4</span> Meetings</h4>

        <div id="text-TodoKeywordMeetings" class="outline-text-4">
          <p>Meetings are special. They are created in a done state by a capture task. I use the MEETING capture template when someone interrupts what I'm doing with a question or discussion. This is handled similarly to phone calls where I clock the amount of time spent with whomever it is and record some notes of what was discussed (either during or after the meeting) depending on content, length, and complexity of the discussion. </p>

          <p>The time of the meeting is recorded for as long as the capture task is active. If I need to look up other details and want to close the capture task early I can just <code>C-c C-c</code> to close the capture task (stopping the clock) and then <code>f9 SPC</code> to resume the clock in the meeting task while I do other things. </p>

          <div class="org-src-container">
            <pre class="src src-plantuml">title Meeting Task State
[*] -&gt; MEETING
MEETING -&gt; [*]</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-FastTodoSelection" class="outline-3">
      <h3 id="FastTodoSelection"><a id="sec-5-2" name="sec-5-2"></a><span class="section-number-3">5.2</span> Fast Todo Selection</h3>

      <div id="text-FastTodoSelection" class="outline-text-3">
        <p>Fast todo selection allows changing from any task todo state to any other state directly by selecting the appropriate key from the fast todo selection key menu. This is a great feature! </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-use-fast-todo-selection t<span style="color: #707183">)</span></pre>
        </div>

        <p>Changing a task state is done with <code>C-c C-t KEY</code> </p>

        <p>where <code>KEY</code> is the appropriate fast todo state selection key as defined in <code>org-todo-keywords</code>. </p>

        <p>The setting </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-treat-S-cursor-todo-selection-as-state-change nil<span style="color: #707183">)</span></pre>
        </div>

        <p>allows changing todo states with S-left and S-right skipping all of the normal processing when entering or leaving a todo state. This cycles through the todo states but skips setting timestamps and entering notes which is very convenient when all you want to do is fix up the status of an entry. </p>
      </div>
    </div>

    <div id="outline-container-ToDoStateTriggers" class="outline-3">
      <h3 id="ToDoStateTriggers"><a id="sec-5-3" name="sec-5-3"></a><span class="section-number-3">5.3</span> TODO state triggers</h3>

      <div id="text-ToDoStateTriggers" class="outline-text-3">
        <p>I have a few triggers that automatically assign tags to tasks based on state changes. If a task moves to <code>CANCELLED</code> state then it gets a <code>CANCELLED</code> tag. Moving a <code>CANCELLED</code> task back to <code>TODO</code> removes the <code>CANCELLED</code> tag. These are used for filtering tasks in agenda views which I'll talk about later. </p>

        <p>The triggers break down to the following rules: </p>

        <ul class="org-ul">
          <li>Moving a task to <code>CANCELLED</code> adds a <code>CANCELLED</code> tag </li>

          <li>Moving a task to <code>WAITING</code> adds a <code>WAITING</code> tag </li>

          <li>Moving a task to <code>HOLD</code> adds <code>WAITING</code> and <code>HOLD</code> tags </li>

          <li>Moving a task to a done state removes <code>WAITING</code> and <code>HOLD</code> tags </li>

          <li>Moving a task to <code>TODO</code> removes <code>WAITING</code>, <code>CANCELLED</code>, and <code>HOLD</code> tags </li>

          <li>Moving a task to <code>NEXT</code> removes <code>WAITING</code>, <code>CANCELLED</code>, and <code>HOLD</code> tags </li>

          <li>Moving a task to <code>DONE</code> removes <code>WAITING</code>, <code>CANCELLED</code>, and <code>HOLD</code> tags </li>
        </ul>

        <p>The tags are used to filter tasks in the agenda views conveniently. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-todo-state-tags-triggers
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;CANCELLED&quot;</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;CANCELLED&quot;</span> . t<span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span> . t<span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span> . t<span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span>done <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;TODO&quot;</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;CANCELLED&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;NEXT&quot;</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;CANCELLED&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;DONE&quot;</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;CANCELLED&quot;</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-Capture" class="outline-2">
    <h2 id="Capture"><a id="sec-6" name="sec-6"></a><span class="section-number-2">6</span> Adding New Tasks Quickly with Org Capture</h2>

    <div id="text-Capture" class="outline-text-2">
      <p>Org Capture mode replaces remember mode for capturing tasks and notes. </p>

      <p>To add new tasks efficiently I use a minimal number of capture templates. I used to have lots of capture templates, one for each org-file. I'd start org-capture with <code>C-c c</code> and then pick a template that filed the task under <code>* Tasks</code> in the appropriate file. </p>

      <p>I found I still needed to refile these capture tasks again to the correct location within the org-file so all of these different capture templates weren't really helping at all. Since then I've changed my workflow to use a minimal number of capture templates – I create the new task quickly and refile it once. This also saves me from maintaining my org-capture templates when I add a new org file. </p>
    </div>

    <div id="outline-container-CaptureTemplates" class="outline-3">
      <h3 id="CaptureTemplates"><a id="sec-6-1" name="sec-6-1"></a><span class="section-number-3">6.1</span> Capture Templates</h3>

      <div id="text-CaptureTemplates" class="outline-text-3">
        <p>When a new task needs to be added I categorize it into one of a few things: </p>

        <ul class="org-ul">
          <li>A phone call (p) </li>

          <li>A meeting (m) </li>

          <li>An email I need to respond to (r) </li>

          <li>A new task (t) </li>

          <li>A new note (n) </li>

          <li>An interruption (j) </li>

          <li>A new habit (h) </li>
        </ul>

        <p>and pick the appropriate capture task. </p>

        <p>Here is my setup for org-capture </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-directory <span style="color: #4e9a06">&quot;~/git/org&quot;</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-default-notes-file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">I use C-c c to start capture mode</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-c c&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-capture</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Capture templates for: TODO tasks, Notes, appointments, phone calls, meetings, and org-protocol</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-capture-templates
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;t&quot;</span> <span style="color: #4e9a06">&quot;todo&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* TODO %?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%a</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span> <span style="color: #a020f0">:clock-in</span> t <span style="color: #a020f0">:clock-resume</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;r&quot;</span> <span style="color: #4e9a06">&quot;respond&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* NEXT Respond to %:from on %:subject</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">SCHEDULED: %t</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%a</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span> <span style="color: #a020f0">:clock-in</span> t <span style="color: #a020f0">:clock-resume</span> t <span style="color: #a020f0">:immediate-finish</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;n&quot;</span> <span style="color: #4e9a06">&quot;note&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* %? :NOTE:</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%a</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span> <span style="color: #a020f0">:clock-in</span> t <span style="color: #a020f0">:clock-resume</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;j&quot;</span> <span style="color: #4e9a06">&quot;Journal&quot;</span> entry <span style="color: #907373">(</span>file+datetree <span style="color: #4e9a06">&quot;~/git/org/diary.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* %?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span> <span style="color: #a020f0">:clock-in</span> t <span style="color: #a020f0">:clock-resume</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;w&quot;</span> <span style="color: #4e9a06">&quot;org-protocol&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* TODO Review %c</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span> <span style="color: #a020f0">:immediate-finish</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;m&quot;</span> <span style="color: #4e9a06">&quot;Meeting&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* MEETING with %? :MEETING:</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U&quot;</span> <span style="color: #a020f0">:clock-in</span> t <span style="color: #a020f0">:clock-resume</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;p&quot;</span> <span style="color: #4e9a06">&quot;Phone call&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* PHONE %? :PHONE:</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U&quot;</span> <span style="color: #a020f0">:clock-in</span> t <span style="color: #a020f0">:clock-resume</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;h&quot;</span> <span style="color: #4e9a06">&quot;Habit&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* NEXT %?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%a</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">SCHEDULED: %(format-time-string </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">%&lt;&lt;%Y-%m-%d %a .+1d/3d&gt;&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">)</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">:PROPERTIES:</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">:STYLE: habit</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">:REPEAT_TO_STATE: NEXT</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">:END:</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>Capture mode now handles automatically clocking in and out of a capture task. This all works out of the box now without special hooks. When I start a capture mode task the task is clocked in as specified by <code>:clock-in t</code> and when the task is filed with <code>C-c C-c</code> the clock resumes on the original clocking task. </p>

        <p>The quick clocking in and out of capture mode tasks (often it takes less than a minute to capture some new task details) can leave empty clock drawers in my tasks which aren't really useful. Since I remove clocking lines with 0:00 length I end up with a clock drawer like this: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> New Capture Task</span>
<span style="font-weight: bold; color: #a52a2a">  :LOGBOOK:</span>
<span style="font-weight: bold; color: #a52a2a">  :END:</span>
  <span style="text-decoration: underline; color: #a020f0">[2010-05-08 Sat 13:53]</span></pre>
        </div>

        <p>I have the following setup to remove these empty <code>LOGBOOK</code> drawers if they occur. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Remove empty LOGBOOK drawers on clock out</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/remove-empty-drawer-on-clock-out</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
    <span style="color: #909183">(</span>beginning-of-line 0<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-remove-empty-drawer-at <span style="color: #4e9a06">&quot;LOGBOOK&quot;</span> <span style="color: #709870">(</span>point<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-clock-out-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/remove-empty-drawer-on-clock-out</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-CaptureRefileOrg" class="outline-3">
      <h3 id="CaptureRefileOrg"><a id="sec-6-2" name="sec-6-2"></a><span class="section-number-3">6.2</span> Separate file for Capture Tasks</h3>

      <div id="text-CaptureRefileOrg" class="outline-text-3">
        <p>I have a single org file which is the target for my capture templates. </p>

        <p>I store notes, tasks, phone calls, and org-protocol tasks in <code>refile.org</code>. I used to use multiple files but found that didn't really have any advantage over a single file. </p>

        <p>Normally this file is empty except for a single line at the top which creates a <code>REFILE</code> tag for anything in the file. </p>

        <p>The file has a single permanent line at the top like this </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="color: #204a87">#+FILETAGS: REFILE</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-CaptureTasksAreFast" class="outline-3">
      <h3 id="CaptureTasksAreFast"><a id="sec-6-3" name="sec-6-3"></a><span class="section-number-3">6.3</span> Capture Tasks is all about being FAST</h3>

      <div id="text-CaptureTasksAreFast" class="outline-text-3">
        <p>Okay I'm in the middle of something and oh yeah - I have to remember to do that. I don't stop what I'm doing. I'm probably clocking a project I'm working on and I don't want to lose my focus on that but I can't afford to forget this little thing that just came up. </p>

        <p>So what do I do? Hit <code>C-c c</code> to start capture mode and select <code>t</code> since it's a new task and I get a buffer like this: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> </span>
  <span style="text-decoration: underline; color: #a020f0">[2010-08-05 Thu 21:06]</span>

  <span style="text-decoration: underline; color: #0066cc"><a href="file:~/git/org-mode-doc/org-mode.org::*Capture%20Tasks%20is%20all%20about%20being%20FAST">Capture Tasks is all about being FAST</a></span></pre>
        </div>

        <p>Enter the details of the TODO item and <code>C-c C-c</code> to file it away in refile.org and go right back to what I'm really working on secure in the knowledge that that item isn't going to get lost and I don't have to think about it anymore at all now. </p>

        <p>The amount of time I spend entering the captured note is clocked. The capture templates are set to automatically clock in and out of the capture task. This is great for interruptions and telephone calls too. </p>
      </div>
    </div>
  </div>

  <div id="outline-container-Refiling" class="outline-2">
    <h2 id="Refiling"><a id="sec-7" name="sec-7"></a><span class="section-number-2">7</span> Refiling Tasks</h2>

    <div id="text-Refiling" class="outline-text-2">
      <p>Refiling tasks is easy. After collecting a bunch of new tasks in my refile.org file using capture mode I need to move these to the correct org file and topic. All of my active org-files are in my <code>org-agenda-files</code> variable and contribute to the agenda. </p>

      <p>I collect capture tasks in refile.org for up to a week. These now stand out daily on my block agenda and I usually refile them during the day. I like to keep my refile task list empty. </p>
    </div>

    <div id="outline-container-RefileSetup" class="outline-3">
      <h3 id="RefileSetup"><a id="sec-7-1" name="sec-7-1"></a><span class="section-number-3">7.1</span> Refile Setup</h3>

      <div id="text-RefileSetup" class="outline-text-3">
        <p>To refile tasks in org you need to tell it where you want to refile things. </p>

        <p>In my setup I let any file in <code>org-agenda-files</code> and the current file contribute to the list of valid refile targets. </p>

        <p>I've recently moved to using IDO to complete targets directly. I find this to be faster than my previous complete in steps setup. At first I didn't like IDO but after reviewing the documentation again and learning about <code>C-SPC</code> to limit target searches I find it is much better than my previous complete-in-steps setup. Now when I want to refile something I do <code>C-c C-w</code> to start the refile process, then type something to get some matching targets, then <code>C-SPC</code> to restrict the matches to the current list, then continue searching with some other text to find the target I need. <code>C-j</code> also selects the current completion as the final target. I like this a lot. I show full outline paths in the targets so I can have the same heading in multiple subtrees or projects and still tell them apart while refiling. </p>

        <p>I now exclude <code>DONE</code> state tasks as valid refile targets. This helps to keep the refile target list to a reasonable size. </p>

        <p>Here is my refile configuration: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">Targets include this file and any file contributing to the agenda - up to 9 levels deep</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-refile-targets <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>nil <span style="color: #a020f0">:maxlevel</span> . 9<span style="color: #709870">)</span>
                                 <span style="color: #709870">(</span>org-agenda-files <span style="color: #a020f0">:maxlevel</span> . 9<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Use full outline paths for refile targets - we file directly with IDO</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-refile-use-outline-path t<span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Targets complete directly with IDO</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-outline-path-complete-in-steps nil<span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Allow refile to create parent tasks with confirmation</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-refile-allow-creating-parent-nodes <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> confirm<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Use IDO for both buffer and file completion and ido-everywhere to t</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-completion-use-ido t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> ido-everywhere t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> ido-max-directory-size 100000<span style="color: #707183">)</span>
<span style="color: #707183">(</span>ido-mode <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> both<span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Use the current window when visiting files and buffers with ido</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> ido-default-file-method <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">selected-window</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> ido-default-buffer-method <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">selected-window</span><span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Use the current window for indirect buffer display</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-indirect-buffer-display <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">current-window</span><span style="color: #707183">)</span>

<span style="color: #204a87">;;;; </span><span style="color: #204a87">Refile settings</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Exclude DONE state tasks from refile targets</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/verify-refile-target</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Exclude todo keywords with a done state from refile targets&quot;</span>
  <span style="color: #7388d6">(</span>not <span style="color: #909183">(</span>member <span style="color: #709870">(</span>nth 2 <span style="color: #907373">(</span>org-heading-components<span style="color: #907373">)</span><span style="color: #709870">)</span> org-done-keywords<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-refile-target-verify-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/verify-refile-target</span><span style="color: #707183">)</span></pre>
        </div>

        <p>To refile a task to my <code>norang.org</code> file under <code>System Maintenance</code> I just put the cursor on the task and hit <code>C-c C-w</code> and enter <code>nor C-SPC sys RET</code> and it's done. IDO completion makes locating targets a snap. </p>
      </div>
    </div>

    <div id="outline-container-RefilingTasks" class="outline-3">
      <h3 id="RefilingTasks"><a id="sec-7-2" name="sec-7-2"></a><span class="section-number-3">7.2</span> Refiling Tasks</h3>

      <div id="text-RefilingTasks" class="outline-text-3">
        <p>Tasks to refile are in their own section of the block agenda. To find tasks to refile I run my agenda view with <code>F12 SPC</code> and scroll down to second section of the block agenda: <code>Tasks to Refile</code>. This view shows all tasks (even ones marked in a <code>done</code> state). </p>

        <p>Bulk refiling in the agenda works very well for multiple tasks going to the same place. Just mark the tasks with <code>m</code> and then <code>B r</code> to refile all of them to a new location. Occasionally I'll also refile tasks as subtasks of the current clocking task using <code>C-2 C-c C-w</code> from the <code>refile.org</code> file. </p>

        <p>Refiling all of my tasks tends to take less than a minute so I normally do this a couple of times a day. </p>
      </div>
    </div>

    <div id="outline-container-RefilingNotes" class="outline-3">
      <h3 id="RefilingNotes"><a id="sec-7-3" name="sec-7-3"></a><span class="section-number-3">7.3</span> Refiling Notes</h3>

      <div id="text-RefilingNotes" class="outline-text-3">
        <p>I keep a <code>* Notes</code> headline in most of my org-mode files. Notes have a <code>NOTE</code> tag which is created by the capture template for notes. This allows finding notes across multiple files easily using the agenda search functions. </p>

        <p>Notes created by capture tasks go first to <code>refile.org</code> and are later refiled to the appropriate project file. Some notes that are project related get filed to the appropriate project instead of under the catchall <code>* NOTES</code> task. Generally these types of notes are specific to the project and not generally useful – so removing them from the notes list when the project is archived makes sense. </p>
      </div>
    </div>

    <div id="outline-container-RefilingPhoneCalls" class="outline-3">
      <h3 id="RefilingPhoneCalls"><a id="sec-7-4" name="sec-7-4"></a><span class="section-number-3">7.4</span> Refiling Phone Calls and Meetings</h3>

      <div id="text-RefilingPhoneCalls" class="outline-text-3">
        <p>Phone calls and meetings are handled using capture mode. I time my calls and meetings using the capture mode template settings to clock in and out the capture task while the phone call or meeting is in progress. </p>

        <p>Phone call and meeting tasks collect in <code>refile.org</code> and are later refiled to the appropriate location. Some phone calls are billable and we want these tracked in the appropriate category. I refile my phone call and meeting tasks under the appropriate project so time tracking and reports are as accurate as possible. </p>
      </div>
    </div>
  </div>

  <div id="outline-container-CustomAgendaViews" class="outline-2">
    <h2 id="CustomAgendaViews"><a id="sec-8" name="sec-8"></a><span class="section-number-2">8</span> Custom agenda views</h2>

    <div id="text-CustomAgendaViews" class="outline-text-2">
      <p>I now have one block agenda view that has everything on it. I also keep separate single view agenda commands for use on my slower Eee PC - since it takes prohibitively long to generate my block agenda on that slow machine. I'm striving to simplify my layout with everything at my fingertips in a single agenda on my workstation which is where I spend the bulk of my time. </p>

      <p>Most of my old custom agenda views were rendered obsolete when filtering functionality was added to the agenda in newer versions of <code>org-mode</code> and now with block agenda functionality I can combine everything into a single view. </p>

      <p>Custom agenda views are used for: </p>

      <ul class="org-ul">
        <li>Single block agenda shows the following 
          <ul class="org-ul">
            <li>overview of today </li>

            <li>Finding tasks to be refiled </li>

            <li>Finding stuck projects </li>

            <li>Finding NEXT tasks to work on </li>

            <li>Show all related tasks </li>

            <li>Reviewing projects </li>

            <li>Finding tasks waiting on something </li>

            <li>Findings tasks to be archived </li>
          </ul>
        </li>

        <li>Finding notes </li>

        <li>Viewing habits </li>
      </ul>

      <p>If I want just today's calendar view then <code>F12 a</code> is still faster than generating the block agenda - especially if I want to view a week or month's worth of information, or check my clocking data. In that case the extra detail on the block agenda view is never really needed and I don't want to spend time waiting for it to be generated. </p>
    </div>

    <div id="outline-container-CustomAgendaViewSetup" class="outline-3">
      <h3 id="CustomAgendaViewSetup"><a id="sec-8-1" name="sec-8-1"></a><span class="section-number-3">8.1</span> Setup</h3>

      <div id="text-CustomAgendaViewSetup" class="outline-text-3">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Do not dim blocked tasks</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-dim-blocked-tasks nil<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Compact the block agenda view</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-compact-blocks t<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Custom agenda command definitions</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-custom-commands
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;N&quot;</span> <span style="color: #4e9a06">&quot;Notes&quot;</span> tags <span style="color: #4e9a06">&quot;NOTE&quot;</span>
               <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-agenda-overriding-header <span style="color: #4e9a06">&quot;Notes&quot;</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>org-tags-match-list-sublevels t<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;h&quot;</span> <span style="color: #4e9a06">&quot;Habits&quot;</span> tags-todo <span style="color: #4e9a06">&quot;STYLE=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">habit</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&quot;</span>
               <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-agenda-overriding-header <span style="color: #4e9a06">&quot;Habits&quot;</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>org-agenda-sorting-strategy
                 <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #858580">(</span>todo-state-down effort-up category-keep<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot; &quot;</span> <span style="color: #4e9a06">&quot;Agenda&quot;</span>
               <span style="color: #907373">(</span><span style="color: #6276ba">(</span>agenda <span style="color: #4e9a06">&quot;&quot;</span> nil<span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags <span style="color: #4e9a06">&quot;REFILE&quot;</span>
                      <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #4e9a06">&quot;Tasks to Refile&quot;</span><span style="color: #80a880">)</span>
                       <span style="color: #80a880">(</span>org-tags-match-list-sublevels nil<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags-todo <span style="color: #4e9a06">&quot;-CANCELLED/!&quot;</span>
                           <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #4e9a06">&quot;Stuck Projects&quot;</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-skip-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/skip-non-stuck-projects</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-sorting-strategy
                             <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #887070">(</span>category-keep<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags-todo <span style="color: #4e9a06">&quot;-HOLD-CANCELLED/!&quot;</span>
                           <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #4e9a06">&quot;Projects&quot;</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-skip-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/skip-non-projects</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-tags-match-list-sublevels <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">indented</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-sorting-strategy
                             <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #887070">(</span>category-keep<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags-todo <span style="color: #4e9a06">&quot;-CANCELLED/!NEXT&quot;</span>
                           <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #887070">(</span>concat <span style="color: #4e9a06">&quot;Project Next Tasks&quot;</span>
                                                                  <span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">if</span> bh/hide-scheduled-and-waiting-next-tasks
                                                                      <span style="color: #4e9a06">&quot;&quot;</span>
                                                                    <span style="color: #4e9a06">&quot; (including WAITING and SCHEDULED tasks)&quot;</span><span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-skip-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/skip-projects-and-habits-and-single-tasks</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-tags-match-list-sublevels t<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-with-date bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-sorting-strategy
                             <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #887070">(</span>todo-state-down effort-up category-keep<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags-todo <span style="color: #4e9a06">&quot;-REFILE-CANCELLED-WAITING-HOLD/!&quot;</span>
                           <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #887070">(</span>concat <span style="color: #4e9a06">&quot;Project Subtasks&quot;</span>
                                                                  <span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">if</span> bh/hide-scheduled-and-waiting-next-tasks
                                                                      <span style="color: #4e9a06">&quot;&quot;</span>
                                                                    <span style="color: #4e9a06">&quot; (including WAITING and SCHEDULED tasks)&quot;</span><span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-skip-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/skip-non-project-tasks</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-with-date bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-sorting-strategy
                             <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #887070">(</span>category-keep<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags-todo <span style="color: #4e9a06">&quot;-REFILE-CANCELLED-WAITING-HOLD/!&quot;</span>
                           <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #887070">(</span>concat <span style="color: #4e9a06">&quot;Standalone Tasks&quot;</span>
                                                                  <span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">if</span> bh/hide-scheduled-and-waiting-next-tasks
                                                                      <span style="color: #4e9a06">&quot;&quot;</span>
                                                                    <span style="color: #4e9a06">&quot; (including WAITING and SCHEDULED tasks)&quot;</span><span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-skip-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/skip-project-tasks</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-with-date bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-sorting-strategy
                             <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #887070">(</span>category-keep<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags-todo <span style="color: #4e9a06">&quot;-CANCELLED+WAITING|HOLD/!&quot;</span>
                           <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #887070">(</span>concat <span style="color: #4e9a06">&quot;Waiting and Postponed Tasks&quot;</span>
                                                                  <span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">if</span> bh/hide-scheduled-and-waiting-next-tasks
                                                                      <span style="color: #4e9a06">&quot;&quot;</span>
                                                                    <span style="color: #4e9a06">&quot; (including WAITING and SCHEDULED tasks)&quot;</span><span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-skip-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/skip-non-tasks</span><span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-tags-match-list-sublevels nil<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span>
                            <span style="color: #80a880">(</span>org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                <span style="color: #6276ba">(</span>tags <span style="color: #4e9a06">&quot;-REFILE/&quot;</span>
                      <span style="color: #858580">(</span><span style="color: #80a880">(</span>org-agenda-overriding-header <span style="color: #4e9a06">&quot;Tasks to Archive&quot;</span><span style="color: #80a880">)</span>
                       <span style="color: #80a880">(</span>org-agenda-skip-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/skip-non-archivable-tasks</span><span style="color: #80a880">)</span>
                       <span style="color: #80a880">(</span>org-tags-match-list-sublevels nil<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
               nil<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>My block agenda view looks like this when not narrowed to a project. This shows top-level projects and <code>NEXT</code> tasks but hides the project details since we are not focused on any particular project. </p>

        <p><b>NOTE:</b> This agenda screen shot is out of date and does not currently match the agenda setup in this document. This will be fixed soon. </p>

        <div class="figure">
          <p><img alt="block-agenda-nonproject.png" src="block-agenda-nonproject.png" /> </p>
        </div>

        <p>After selecting a project (with <code>P</code> on any task in the agenda) the block agenda changes to show the project and any subprojects in the Projects section. Tasks show project-related tasks that are hidden when not narrowed to a project. </p>

        <p>This makes it easy to focus on the task at hand. </p>

        <p><b>NOTE:</b> This agenda screen shot is out of date and does not currently match the agenda setup in this document. This will be fixed soon. </p>

        <div class="figure">
          <p><img alt="block-agenda-project.png" src="block-agenda-project.png" /> </p>
        </div>

        <p>I generally work top-down on the agenda. Things with deadlines and scheduled dates (planned to work on today or earlier) show up in the agenda at the top. </p>

        <p>My day goes generally like this: </p>

        <ul class="org-ul">
          <li>Punch in (this starts the clock on the default task) </li>

          <li>Look at the agenda and make a mental note of anything important to deal with today </li>

          <li>Read email and news 
            <ul class="org-ul">
              <li>create notes, and tasks for things that need responses with org-capture </li>
            </ul>
          </li>

          <li>Check refile tasks and respond to emails </li>

          <li>Look at my agenda and work on important tasks for today 
            <ul class="org-ul">
              <li>Clock it in </li>

              <li>Work on it until it is <code>DONE</code> or it gets interrupted </li>
            </ul>
          </li>

          <li>Work on tasks </li>

          <li>Make journal entries (<code>C-c c j</code>) for interruptions </li>

          <li>Punch out for lunch and punch back in after lunch </li>

          <li>work on more tasks </li>

          <li>Refile tasks to empty the list 
            <ul class="org-ul">
              <li>Tag tasks to be refiled with <code>m</code> collecting all tasks for the same target </li>

              <li>Bulk refile the tasks to the target location with <code>B r</code> </li>

              <li>Repeat (or refile individually with <code>C-c C-w</code>) until all refile tasks are gone </li>
            </ul>
          </li>

          <li>Mark habits done today as DONE </li>

          <li>Punch out at the end of the work day </li>
        </ul>
      </div>
    </div>

    <div id="outline-container-WhatDoIWorkOnNext" class="outline-3">
      <h3 id="WhatDoIWorkOnNext"><a id="sec-8-2" name="sec-8-2"></a><span class="section-number-3">8.2</span> What do I work on next?</h3>

      <div id="text-WhatDoIWorkOnNext" class="outline-text-3">
        <p>Start with deadlines and tasks scheduled today or earlier from the daily agenda view. Then move on to tasks in the <code>Next Tasks</code> list in the block agenda view. I tend to schedule current projects to 'today' when I start work on them and they sit on my daily agenda reminding me that they need to be completed. I normally only schedule one or two projects to the daily agenda and unschedule things that are no longer important and don't deserve my attention today. </p>

        <p>When I look for a new task to work on I generally hit <code>F12 SPC</code> to get the block agenda and follow this order: </p>

        <ul class="org-ul">
          <li>Pick something off today's agenda 
            <ul class="org-ul">
              <li>deadline for today (do this first - it's not late yet) </li>

              <li>deadline in the past (it's already late) </li>

              <li>a scheduled task for today (it's supposed to be done today) </li>

              <li>a scheduled task that is still on the agenda </li>

              <li>deadline that is coming up soon </li>
            </ul>
          </li>

          <li>pick a NEXT task </li>

          <li>If you run out of items to work on look for a NEXT task in the current context pick a task from the Tasks list of the current project. </li>
        </ul>
      </div>

      <div id="outline-container-CustomAgendaViewsNextList" class="outline-4">
        <h4 id="CustomAgendaViewsNextList"><a id="sec-8-2-1" name="sec-8-2-1"></a><span class="section-number-4">8.2.1</span> Why keep it all on the <code>NEXT</code> list?</h4>

        <div id="text-CustomAgendaViewsNextList" class="outline-text-4">
          <p>I've moved to a more GTD way of doing things. Now I just use a <code>NEXT</code> list. Only projects get tasks with <code>NEXT</code> keywords since stuck projects initiate the need for marking or creating <code>NEXT</code> tasks. A <code>NEXT</code> task is something that is available to work on <i>now</i>, it is the next logical step in some project. </p>

          <p>I used to have a special keyword <code>ONGOING</code> for things that I do a lot and want to clock but never really start/end. I had a special agenda view for <code>ONGOING</code> tasks that I would pull up to easily find the thing I want to clock. </p>

          <p>Since then I've moved away from using the <code>ONGOING</code> todo keyword. Having an agenda view that shows <code>NEXT</code> tasks makes it easy to pick the thing to clock - and I don't have to remember if I need to look in the <code>ONGOING</code> list or the <code>NEXT</code> list when looking for the task to clock-in. The <code>NEXT</code> list is basically 'what is current' - any task that moves a project forward. I want to find the thing to work on as fast as I can and actually do work on it - not spend time hunting through my org files for the task that needs to be clocked-in. </p>

          <p>To drop a task off the <code>NEXT</code> list simply move it back to the <code>TODO</code> state. </p>
        </div>
      </div>
    </div>

    <div id="outline-container-ReadingMailNewsIRC" class="outline-3">
      <h3 id="ReadingMailNewsIRC"><a id="sec-8-3" name="sec-8-3"></a><span class="section-number-3">8.3</span> Reading email, newsgroups, and conversations on IRC</h3>

      <div id="text-ReadingMailNewsIRC" class="outline-text-3">
        <p>When reading email, newsgroups, and conversations on IRC I just let the default task (normally <code>** Organization</code>) clock the time I spend on these tasks. To read email I go to Gnus and read everything in my inboxes. If there are emails that require a response I use org-capture to create a new task with a heading of 'Respond to &lt;user&gt;' for each one. This automatically links to the email in the task and makes it easy to find later. Some emails are quick to respond to and some take research and a significant amount of time to complete. I clock each one in it's own task just in case I need that clocked time later. The capture template for Repond To tasks is now scheduled for today so I can refile the task to the appropriate org file without losing the task for a week. </p>

        <p>Next, I go to my newly created tasks to be refiled from the block agenda with <code>F12 a</code> and clock in an email task and deal with it. Repeat this until all of the 'Respond to &lt;user&gt;' tasks are marked <code>DONE</code>. </p>

        <p>I read email and newgroups in Gnus so I don't separate clocked time for quickly looking at things. If an article has a useful piece of information I want to remember I create a note for it with <code>C-c c n</code> and enter the topic and file it. This takes practically no time at all and I know the note is safely filed for later retrieval. The time I spend in the capture buffer is clocked with that capture note. </p>
      </div>
    </div>

    <div id="outline-container-CustomAgendaViewFiltering" class="outline-3">
      <h3 id="CustomAgendaViewFiltering"><a id="sec-8-4" name="sec-8-4"></a><span class="section-number-3">8.4</span> Filtering</h3>

      <div id="text-CustomAgendaViewFiltering" class="outline-text-3">
        <p>So many tasks, so little time. I have hundreds of tasks at any given time (373 right now). There is so much stuff to look at it can be daunting. This is where agenda filtering saves the day. </p>

        <p>It's 11:53AM and I'm in work mode just before lunch. I don't want to see tasks that are not work related right now. I also don't want to work on a big project just before lunch… so I need to find small tasks that I can knock off the list. </p>

        <p>How do we do this? Get a list of NEXT tasks from the block agenda and then narrow it down with filtering. Tasks are ordered in the NEXT agenda view by estimated effort so the short tasks are first – just start at the top and work your way down. I can limit the displayed agenda tasks to those estimates of 10 minutes or less with <code>/ + 1</code> and I can pick something that fits the minutes I have left before I take off for lunch. </p>
      </div>

      <div id="outline-container-CustomAgendaViewFilteringContext" class="outline-4">
        <h4 id="CustomAgendaViewFilteringContext"><a id="sec-8-4-1" name="sec-8-4-1"></a><span class="section-number-4">8.4.1</span> Automatically removing context based tasks with / RET</h4>

        <div id="text-CustomAgendaViewFilteringContext" class="outline-text-4">
          <p><code>/ RET</code> in the agenda is really useful. This awesome feature was added to org-mode by John Wiegley. It removes tasks automatically by filtering based on a user-provided function. </p>

          <p>At work I have projects I'm working on which are assigned by my manager. Sometimes priorities changes and projects are delayed to sometime in the future. This means I need to stop working on these immediately. I put the project task on <code>HOLD</code> and work on something else. The <code>/ RET</code> filter removes <code>HOLD</code> tasks and subtasks (because of tag inheritance). </p>

          <p>At home I have some tasks tagged with <code>farm</code> since these need to be performed when I am physically at our family farm. Since I am there infrequently I have added <code>farm</code> to the list of auto-excluded tags on my system. I can always explicitly filter to just <code>farm</code> tasks with <code>/ TAB farm RET</code> when I am physically there. </p>

          <p>I have the following setup to allow <code>/ RET</code> to filter tasks based on the description above. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/org-auto-exclude-function</span> <span style="color: #7388d6">(</span>tag<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Automatic task exclusion in the agenda with / RET&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
        <span style="color: #709870">(</span><span style="color: #907373">(</span>string= tag <span style="color: #4e9a06">&quot;hold&quot;</span><span style="color: #907373">)</span>
         t<span style="color: #709870">)</span>
        <span style="color: #709870">(</span><span style="color: #907373">(</span>string= tag <span style="color: #4e9a06">&quot;farm&quot;</span><span style="color: #907373">)</span>
         t<span style="color: #709870">)</span><span style="color: #909183">)</span>
       <span style="color: #909183">(</span>concat <span style="color: #4e9a06">&quot;-&quot;</span> tag<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-auto-exclude-function <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/org-auto-exclude-function</span><span style="color: #707183">)</span></pre>
          </div>

          <p>This lets me filter tasks with just <code>/ RET</code> on the agenda which removes tasks I'm not supposed to be working on now from the list of returned results. </p>

          <p>This helps to keep my agenda clutter-free. </p>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-Clocking" class="outline-2">
    <h2 id="Clocking"><a id="sec-9" name="sec-9"></a><span class="section-number-2">9</span> Time Clocking</h2>

    <div id="text-Clocking" class="outline-text-2">
      <p>Okay, I admit it. I'm a clocking fanatic. </p>

      <p>I clock everything at work. Org-mode makes this really easy. I'd rather clock too much stuff than not enough so I find it's easier to get in the habit of clocking everything. </p>

      <p>This makes it possible to look back at the day and see where I'm spending too much time, or not enough time on specific projects. This also helps a lot when you need to estimate how long something is going to take to do – you can use your clocking data from similar tasks to help tune your estimates so they are more accurate. </p>

      <p>Without clocking data it's hard to tell how long something took to do after the fact. </p>

      <p>I now use the concept of <code>punching in</code> and <code>punching out</code> at the start and end of my work day. I punch in when I arrive at work, punch out for lunch, punch in after lunch, and punch out at the end of the day. Every minute is clocked between punch-in and punch-out times. </p>

      <p>Punching in defines a default task to clock time on whenever the clock would normally stop. I found that with the default org-mode setup I would lose clocked minutes during the day, a minute here, a minute there, and that all adds up. This is especially true if you write notes when moving to a DONE state - in this case the clock normally stops before you have composed the note – and good notes take a few minutes to write. </p>

      <p>My clocking setup basically works like this: </p>

      <ul class="org-ul">
        <li>Punch in (start the clock) 
          <ul class="org-ul">
            <li>This clocks in a predefined task by <code>org-id</code> that is the default task to clock in whenever the clock normally stops </li>
          </ul>
        </li>

        <li>Clock in tasks normally, and let moving to a DONE state clock out 
          <ul class="org-ul">
            <li>clocking out automatically clocks time on a parent task or moves back to the predefined default task if no parent exists. </li>
          </ul>
        </li>

        <li>Continue clocking whatever tasks you work on </li>

        <li>Punch out (stop the clock) </li>
      </ul>

      <p>I'm free to change the default task multiple times during the day but with the clock moving up the project tree on clock out I no longer need to do this. I simply have a single task that gets clocked in when I punch-in. </p>

      <p>If I punch-in with a prefix on a task in <code>Project X</code> then that task automatically becomes the default task and all clocked time goes on that project until I either punch out or punch in some other task. </p>

      <p>My org files look like this: </p>

      <p><code>todo.org</code>: </p>

      <div class="org-src-container">
        <pre class="src src-org"><span style="color: #204a87">#+FILETAGS: PERSONAL</span>
...
<span style="font-weight: bold; color: #00578e">* Tasks</span>
<span style="font-weight: bold; color: #0084c8">** Organization</span>
<span style="font-weight: bold; color: #a52a2a">   :PROPERTIES:</span>
   <span style="font-weight: bold; color: #a52a2a">:CLOCK_MODELINE_TOTAL:</span> today
   <span style="font-weight: bold; color: #a52a2a">:ID:</span>       eb155a82-92b2-4f25-a3c6-0304591af2f9
<span style="font-weight: bold; color: #a52a2a">   :END:</span>
   ...</pre>
      </div>

      <p>If I am working on some task, then I simply clock in on the task. Clocking out moves the clock up to a parent task with a todo keyword (if any) which keeps the clock time in the same subtree. If there is no parent task with a todo keyword then the clock moves back to the default clocking task until I punch out or clock in some other task. When an interruption occurs I start a capture task which keeps clocked time on the interruption task until I close it with C-c C-c. </p>

      <p>This works really well for me. </p>

      <p>For example, consider the following org file: </p>

      <div class="org-src-container">
        <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> Project A</span>
<span style="font-weight: bold; color: #0084c8">** </span>NEXT<span style="font-weight: bold; color: #0084c8"> TASK 1</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> TASK 2</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> TASK 3</span>
<span style="font-weight: bold; color: #00578e">* Tasks</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> Some miscellaneous task</span></pre>
      </div>

      <p>I'll work on this file in the following sequence: </p>

      <ol class="org-ol">
        <li>I punch in with <code>F9-I</code> at the start of my day 

          <p>That clocks in the <code>Organization</code> task by id in my <code>todo.org</code> file. </p>
        </li>

        <li><code>F12-SPC</code> to review my block agenda 

          <p>Pick 'TODO Some miscellaneous task' to work on next and clock that in with <code>I</code> The clock is now on 'TODO Some miscellaneous task' </p>
        </li>

        <li>I complete that task and mark it done with <code>C-c C-t d</code> 

          <p>This stops the clock and moves it back to the <code>Organization</code> task. </p>
        </li>

        <li>Now I want to work on <code>Project A</code> so I clock in <code>Task 1</code> 

          <p>I work on Task 1 and mark it <code>DONE</code>. This clocks out <code>Task 1</code> and moves the clock to <code>Project A</code>. Now I work on <code>Task 2</code> and clock that in. </p>
        </li>
      </ol>

      <p>The entire time I'm working on and clocking some subtask of <code>Project A</code> all of the clock time in the interval is applied somewhere to the <code>Project A</code> tree. When I eventually mark <code>Project A</code> done then the clock will move back to the default organization task. </p>
    </div>

    <div id="outline-container-ClockSetup" class="outline-3">
      <h3 id="ClockSetup"><a id="sec-9-1" name="sec-9-1"></a><span class="section-number-3">9.1</span> Clock Setup</h3>

      <div id="text-ClockSetup" class="outline-text-3">
        <p>To get started we need to punch in which clocks in the default task and keeps the clock running. This is now simply a matter of punching in the clock with <code>F9 I</code>. You can do this anywhere. Clocking out will now clock in the parent task (if there is one with a todo keyword) or clock in the default task if not parent exists. </p>

        <p>Keeping the clock running when moving a subtask to a <code>DONE</code> state means clocking continues to apply to the project task. I can pick the next task from the parent and clock that in without losing a minute or two while I'm deciding what to work on next. </p>

        <p>I keep clock times, state changes, and other notes in the <code>:LOGBOOK:</code> drawer. </p>

        <p>I have the following org-mode settings for clocking: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;;</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Resume clocking task when emacs is restarted</span>
<span style="color: #707183">(</span>org-clock-persistence-insinuate<span style="color: #707183">)</span>
<span style="color: #204a87">;;</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Show lot of clocking history so it's easy to pick items off the C-F11 list</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-history-length 23<span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Resume clocking task on clock-in if the clock is open</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-in-resume t<span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Change tasks to NEXT when clocking in</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-in-switch-to-state <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/clock-in-to-next</span><span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Separate drawers for clocking and logs</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-drawers <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #4e9a06">&quot;PROPERTIES&quot;</span> <span style="color: #4e9a06">&quot;LOGBOOK&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Save clock data and state changes and notes in the LOGBOOK drawer</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-into-drawer t<span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Sometimes I change tasks I'm clocking quickly - this removes clocked tasks with 0:00 duration</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-out-remove-zero-time-clocks t<span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Clock out when moving task to a done state</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-out-when-done t<span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Save the running clock and all clock history when exiting Emacs, load it on startup</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-persist t<span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Do not prompt to resume an active clock</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-persist-query-resume nil<span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Enable auto clock resolution for finding open clocks</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-auto-clock-resolution <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> when-no-clock-is-running<span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Include current clocking task in clock reports</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-report-include-clocking-task t<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/keep-clock-running nil<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-in-to-next</span> <span style="color: #7388d6">(</span>kw<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Switch a task from TODO to NEXT when clocking in.</span>
<span style="color: #4e9a06">Skips capture tasks, projects, and subprojects.</span>
<span style="color: #4e9a06">Switch projects and subprojects from NEXT back to TODO&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #909183">(</span>not <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #907373">(</span>boundp <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-capture-mode</span><span style="color: #907373">)</span> org-capture-mode<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #6276ba">(</span>member <span style="color: #858580">(</span>org-get-todo-state<span style="color: #858580">)</span> <span style="color: #858580">(</span>list <span style="color: #4e9a06">&quot;TODO&quot;</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
           <span style="color: #6276ba">(</span>bh/is-task-p<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
      <span style="color: #4e9a06">&quot;NEXT&quot;</span><span style="color: #709870">)</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #6276ba">(</span>member <span style="color: #858580">(</span>org-get-todo-state<span style="color: #858580">)</span> <span style="color: #858580">(</span>list <span style="color: #4e9a06">&quot;NEXT&quot;</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
           <span style="color: #6276ba">(</span>bh/is-project-p<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
      <span style="color: #4e9a06">&quot;TODO&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/find-project-task</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Move point to the parent (project) task if any&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>parent-task <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-back-to-heading <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">invisible-ok</span><span style="color: #858580">)</span> <span style="color: #858580">(</span>point<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #907373">(</span>org-up-heading-safe<span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #6276ba">(</span>member <span style="color: #858580">(</span>nth 2 <span style="color: #80a880">(</span>org-heading-components<span style="color: #80a880">)</span><span style="color: #858580">)</span> org-todo-keywords-1<span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> parent-task <span style="color: #858580">(</span>point<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span>goto-char parent-task<span style="color: #709870">)</span>
      parent-task<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/punch-in</span> <span style="color: #7388d6">(</span>arg<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Start continuous clocking and set the default task to the</span>
<span style="color: #4e9a06">selected task.  If no task is selected set the Organization task</span>
<span style="color: #4e9a06">as the default task.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span> <span style="color: #4e9a06">&quot;p&quot;</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/keep-clock-running t<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode</span><span style="color: #909183">)</span>
      <span style="color: #204a87">;;</span>
      <span style="color: #204a87">;; </span><span style="color: #204a87">We're in the agenda</span>
      <span style="color: #204a87">;;</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>marker <span style="color: #6276ba">(</span>org-get-at-bol <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-hd-marker</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
             <span style="color: #907373">(</span>tags <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> marker <span style="color: #858580">(</span>org-get-tags-at<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
        <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #6276ba">(</span>eq arg 4<span style="color: #6276ba">)</span> tags<span style="color: #907373">)</span>
            <span style="color: #907373">(</span>org-agenda-clock-in <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #6276ba">(</span>16<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span>bh/clock-in-organization-task-as-default<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #204a87">;;</span>
    <span style="color: #204a87">;; </span><span style="color: #204a87">We are not in the agenda</span>
    <span style="color: #204a87">;;</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
      <span style="color: #709870">(</span>widen<span style="color: #709870">)</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">Find the tags on the current task</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #6276ba">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode</span><span style="color: #6276ba">)</span> <span style="color: #6276ba">(</span>not <span style="color: #858580">(</span>org-before-first-heading-p<span style="color: #858580">)</span><span style="color: #6276ba">)</span> <span style="color: #6276ba">(</span>eq arg 4<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span>org-clock-in <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #6276ba">(</span>16<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span>bh/clock-in-organization-task-as-default<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/punch-out</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/keep-clock-running nil<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #909183">(</span>org-clock-is-active<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-clock-out<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>org-agenda-remove-restriction-lock<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-in-default-task</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> org-clock-default-task
      <span style="color: #709870">(</span>org-clock-in<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-in-parent-task</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Move point to the parent (project) task if any and clock in&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>parent-task<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
        <span style="color: #907373">(</span>widen<span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>not parent-task<span style="color: #858580">)</span> <span style="color: #858580">(</span>org-up-heading-safe<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #858580">(</span>member <span style="color: #80a880">(</span>nth 2 <span style="color: #887070">(</span>org-heading-components<span style="color: #887070">)</span><span style="color: #80a880">)</span> org-todo-keywords-1<span style="color: #858580">)</span>
            <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> parent-task <span style="color: #80a880">(</span>point<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">if</span> parent-task
            <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> parent-task
              <span style="color: #858580">(</span>org-clock-in<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">when</span> bh/keep-clock-running
            <span style="color: #858580">(</span>bh/clock-in-default-task<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defvar</span> <span style="font-weight: bold; color: #0084c8">bh/organization-task-id</span> <span style="color: #4e9a06">&quot;eb155a82-92b2-4f25-a3c6-0304591af2f9&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-in-organization-task-as-default</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> <span style="color: #909183">(</span>org-id-find bh/organization-task-id <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">marker</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-clock-in <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #709870">(</span>16<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-out-maybe</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">and</span> bh/keep-clock-running
             <span style="color: #709870">(</span>not org-clock-clocking-in<span style="color: #709870">)</span>
             <span style="color: #709870">(</span>marker-buffer org-clock-default-task<span style="color: #709870">)</span>
             <span style="color: #709870">(</span>not org-clock-resolving-clocks-due-to-idleness<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/clock-in-parent-task<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-clock-out-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/clock-out-maybe</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
        </div>

        <p>I used to clock in tasks by ID using the following function but with the new punch-in and punch-out I don't need these as much anymore. <code>f9-SPC</code> calls <code>bh/clock-in-last-task</code> which switches the clock back to the previously clocked task. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-id</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-in-task-by-id</span> <span style="color: #7388d6">(</span>id<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Clock in a task by id&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> <span style="color: #909183">(</span>org-id-find id <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">marker</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-clock-in nil<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-in-last-task</span> <span style="color: #7388d6">(</span>arg<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Clock in the interrupted task if there is one</span>
<span style="color: #4e9a06">Skip the default task and get the next one.</span>
<span style="color: #4e9a06">A prefix arg forces clock in of the default task.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span> <span style="color: #4e9a06">&quot;p&quot;</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>clock-in-to-task
         <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
          <span style="color: #6276ba">(</span><span style="color: #858580">(</span>eq arg 4<span style="color: #858580">)</span> org-clock-default-task<span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #80a880">(</span>org-clock-is-active<span style="color: #80a880">)</span>
                <span style="color: #80a880">(</span>equal org-clock-default-task <span style="color: #887070">(</span>cadr org-clock-history<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span>
           <span style="color: #858580">(</span>caddr org-clock-history<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="color: #858580">(</span>org-clock-is-active<span style="color: #858580">)</span> <span style="color: #858580">(</span>cadr org-clock-history<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="color: #858580">(</span>equal org-clock-default-task <span style="color: #80a880">(</span>car org-clock-history<span style="color: #80a880">)</span><span style="color: #858580">)</span> <span style="color: #858580">(</span>cadr org-clock-history<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span>t <span style="color: #858580">(</span>car org-clock-history<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> clock-in-to-task
      <span style="color: #709870">(</span>org-clock-in nil<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-ClockingIn" class="outline-3">
      <h3 id="ClockingIn"><a id="sec-9-2" name="sec-9-2"></a><span class="section-number-3">9.2</span> Clocking in</h3>

      <div id="text-ClockingIn" class="outline-text-3">
        <p>When I start or continue working on a task I clock it in with any of the following: </p>

        <ul class="org-ul">
          <li><code>C-c C-x C-i</code> </li>

          <li><code>I</code> in the agenda </li>

          <li><code>I</code> speed key on the first character of the heading line </li>

          <li><code>f9 I</code> while on the task in the agenda </li>

          <li><code>f9 I</code> while in the task in an org file </li>
        </ul>
      </div>

      <div id="outline-container-ClockingInDefaultTask" class="outline-4">
        <h4 id="ClockingInDefaultTask"><a id="sec-9-2-1" name="sec-9-2-1"></a><span class="section-number-4">9.2.1</span> Setting a default clock task</h4>

        <div id="text-ClockingInDefaultTask" class="outline-text-4">
          <p>I have a default <code>** Organization</code> task in my todo.org file that I tend to put miscellaneous clock time on. This is the task I clock in on when I punch in at the start of my work day with <code>F9-I</code>. While reorganizing my org-files, reading email, clearing my inbox, and doing other planning work that isn't for a specific project I'll clock in this task. Punching-in anywhere clocks in this Organization task as the default task. </p>

          <p>If I want to change the default clocking task I just visit the new task in any org buffer and clock it in with <code>C-u C-u C-c C-x C-i</code>. Now this new task that collects miscellaneous clock minutes when the clock would normally stop. </p>

          <p>You can quickly clock in the default clocking task with <code>C-u C-c C-x C-i d</code>. Another option is to repeatedly clock out so the clock moves up the project tree until you clock out the top-level task and the clock moves to the default task. </p>
        </div>
      </div>

      <div id="outline-container-ClockingInByClockHistory" class="outline-4">
        <h4 id="ClockingInByClockHistory"><a id="sec-9-2-2" name="sec-9-2-2"></a><span class="section-number-4">9.2.2</span> Using the clock history to clock in old tasks</h4>

        <div id="text-ClockingInByClockHistory" class="outline-text-4">
          <p>You can use the clock history to restart clocks on old tasks you've clocked or to jump directly to a task you have clocked previously. I use this mainly to clock in whatever got interrupted by something. </p>

          <p>Consider the following scenario: </p>

          <ul class="org-ul">
            <li>You are working on and clocking <code>Task A</code> (Organization) </li>

            <li>You get interrupted and switch to <code>Task B</code> (Document my use of org-mode) </li>

            <li>You complete <code>Task B</code> (Document my use of org-mode) </li>

            <li>Now you want to go back to <code>Task A</code> (Organization) again to continue </li>
          </ul>

          <p>This is easy to deal with. </p>

          <ol class="org-ol">
            <li>Clock in <code>Task A</code>, work on it </li>

            <li>Go to <code>Task B</code> (or create a new task) and clock it in </li>

            <li>When you are finished with <code>Task B</code> hit <code>C-u C-c C-x C-i i</code> </li>
          </ol>

          <p>This displays a clock history selection window like the following and selects the interrupted <code>[i]</code> entry. </p>

          <p><b>Clock history selection buffer for C-u C-c C-x C-i</b> </p>

          <pre class="example">Default Task
[d] norang          Organization                          &lt;-- Task B
The task interrupted by starting the last one
[i] norang          Organization                          &lt;-- Task B
Current Clocking Task
[c] org             NEXT Document my use of org-mode      &lt;-- Task A
Recent Tasks
[1] org             NEXT Document my use of org-mode      &lt;-- Task A
[2] norang          Organization                          &lt;-- Task B
...
[Z] org             DONE Fix default section links        &lt;-- 35 clock task entries ago</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-ClockEverythingWithNewTasks" class="outline-3">
      <h3 id="ClockEverythingWithNewTasks"><a id="sec-9-3" name="sec-9-3"></a><span class="section-number-3">9.3</span> Clock Everything - Create New Tasks</h3>

      <div id="text-ClockEverythingWithNewTasks" class="outline-text-3">
        <p>In order to clock everything you need a task for everything. That's fine for planned projects but interruptions inevitably occur and you need some place to record whatever time you spend on that interruption. </p>

        <p>To deal with this we create a new capture task to record the thing we are about to do. The workflow goes something like this: </p>

        <ul class="org-ul">
          <li>You are clocking some task and an interruption occurs </li>

          <li>Create a quick capture task journal entry <code>C-c c j</code> </li>

          <li>Type the heading </li>

          <li>go do that thing (eat lunch, whatever) </li>

          <li>file it <code>C-c C-c</code>, this restores the clock back to the previous clocking task </li>

          <li>clock something else in or continue with the current clocking task </li>
        </ul>

        <p>This means you can ignore the details like where this task really belongs in your org file layout and just get on with completing the thing. Refiling a bunch of tasks later in a group when it is convenient to refile the tasks saves time in the long run. </p>

        <p>If it's a one-shot uninteresting task (like a coffee break) I create a capture journal entry for it that goes to the diary.org date tree. If it's a task that actually needs to be tracked and marked done, and applied to some project then I create a capture task instead which files it in refile.org. </p>
      </div>
    </div>

    <div id="outline-container-FindTasksToClockIn" class="outline-3">
      <h3 id="FindTasksToClockIn"><a id="sec-9-4" name="sec-9-4"></a><span class="section-number-3">9.4</span> Finding tasks to clock in</h3>

      <div id="text-FindTasksToClockIn" class="outline-text-3">
        <p>To find a task to work on I use one of the following options (generally listed most frequently used first) </p>

        <ul class="org-ul">
          <li>Use the clock history C-u C-c C-x C-i Go back to something I was clocking that is not finished </li>

          <li>Pick something off today's block agenda <code>SCHEDULED</code> or <code>DEADLINE</code> items that need to be done soon </li>

          <li>Pick something off the <code>NEXT</code> tasks agenda view Work on some unfinished task to move to completion </li>

          <li>Pick something off the other task list </li>

          <li>Use an agenda view with filtering to pick something to work on </li>
        </ul>

        <p>Punching in on the task you select will restrict the agenda view to that project so you can focus on just that thing for some period of time. </p>
      </div>
    </div>

    <div id="outline-container-EditingClockEntries" class="outline-3">
      <h3 id="EditingClockEntries"><a id="sec-9-5" name="sec-9-5"></a><span class="section-number-3">9.5</span> Editing clock entries</h3>

      <div id="text-EditingClockEntries" class="outline-text-3">
        <p>Sometimes it is necessary to edit clock entries so they reflect reality. I find I do this for maybe 2-3 entries in a week. </p>

        <p>Occassionally I cannot clock in a task on time because I'm away from my computer. In this case the previous clocked task is still running and counts time for both tasks which is wrong. </p>

        <p>I make a note of the time and then when I get back to my computer I clock in the right task and edit the start and end times to correct the clock history. </p>

        <p>To visit the clock line for an entry quickly use the agenda log mode. <code>F12 a l</code> shows all clock lines for today. I use this to navigate to the appropriate clock lines quickly. F11 goes to the current clocked task but the agenda log mode is better for finding and visiting older clock entries. </p>

        <p>Use <code>F12 a l</code> to open the agenda in log mode and show only logged clock times. Move the cursor down to the clock line you need to edit and hit <code>TAB</code> and you're there. </p>

        <p>To edit a clock entry just put the cursor on the part of the date you want to edit (use the keyboard not the mouse - since the clicking on the timestamp with the mouse goes back to the agenda for that day) and hit the <code>S-&lt;up arrow&gt;</code> or <code>S-&lt;down arrow&gt;</code> keys to change the time. </p>

        <p>The following setting makes time editing use discrete minute intervals (no rounding) increments: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-time-stamp-rounding-minutes <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span>1 1<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>Editing the time with the shift arrow combination also updates the total for the clock line which is a nice convenience. </p>

        <p>I always check that I haven't created task overlaps when fixing time clock entries by viewing them with log mode on in the agenda. There is a new view in the agenda for this – just hit <code>v c</code> in the daily agenda and clock gaps and overlaps are identified. </p>

        <p>I want my clock entries to be as accurate as possible. </p>

        <p>The following setting shows 1 minute clocking gaps. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-clock-consistency-checks
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #a020f0">:max-duration</span> <span style="color: #4e9a06">&quot;4:00&quot;</span>
              <span style="color: #a020f0">:min-duration</span> 0
              <span style="color: #a020f0">:max-gap</span> 0
              <span style="color: #a020f0">:gap-ok-around</span> <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;4:00&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-TimeReportingAndTracking" class="outline-2">
    <h2 id="TimeReportingAndTracking"><a id="sec-10" name="sec-10"></a><span class="section-number-2">10</span> Time reporting and tracking</h2>

    <div id="text-TimeReportingAndTracking" class="outline-text-2"></div>

    <div id="outline-container-BillingClientsForClockedTime" class="outline-3">
      <h3 id="BillingClientsForClockedTime"><a id="sec-10-1" name="sec-10-1"></a><span class="section-number-3">10.1</span> Billing clients based on clocked time</h3>

      <div id="text-BillingClientsForClockedTime" class="outline-text-3">
        <p>At the beginning of the month I invoice my clients for work done last month. This is where I review my clocking data for correctness before billing for the clocked time. </p>

        <p>Billing for clocked time basically boils down to the following steps: </p>

        <ol class="org-ol">
          <li>Verify that the clock data is complete and correct </li>

          <li>Use clock reports to summarize time spent </li>

          <li>Create an invoice based on the clock data 
            <p>I currently create invoices in an external software package based on the org-mode clock data. </p>
          </li>

          <li>Archive complete tasks so they are out of the way. 
            <p>See <a href="#Archiving">Archiving</a> for more details. </p>
          </li>
        </ol>
      </div>

      <div id="outline-container-VerifyingClockData" class="outline-4">
        <h4 id="VerifyingClockData"><a id="sec-10-1-1" name="sec-10-1-1"></a><span class="section-number-4">10.1.1</span> Verify that the clock data is complete and correct</h4>

        <div id="text-VerifyingClockData" class="outline-text-4">
          <p>Since I change tasks often (sometimes more than once in a minute) I use the following setting to remove clock entries with a zero duration. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Sometimes I change tasks I'm clocking quickly - this removes clocked tasks with 0:00 duration</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-out-remove-zero-time-clocks t<span style="color: #707183">)</span></pre>
          </div>

          <p>This setting just keeps my clocked log entries clean - only keeping clock entries that contribute to the clock report. </p>

          <p>Before invoicing for clocked time it is important to make sure your clocked time data is correct. If you have a clocked time with an entry that is not closed (ie. it has no end time) then that is a hole in your clocked day and it gets counted as zero (0) for time spent on the task when generating clock reports. Counting it as zero is almost certainly wrong. </p>

          <p>To check for unclosed clock times I use the agenda-view clock check (<code>v c</code> in the agenda). This view shows clocking gaps and overlaps in the agenda. </p>

          <p>To check the last month's clock data I use <code>F12 a v m b v c</code> which shows a full month in the agenda, moves to the previous month, and shows the clocked times only. It's important to remove any agenda restriction locks and filters when checking the logs for gaps and overlaps. </p>

          <p>The clocked-time only display in the agenda makes it easy to quickly scan down the list to see if an entry is missing an end time. If an entry is not closed you can manually fix the clock entry based on other clock info around that time. </p>
        </div>
      </div>

      <div id="outline-container-ClockReports" class="outline-4">
        <h4 id="ClockReports"><a id="sec-10-1-2" name="sec-10-1-2"></a><span class="section-number-4">10.1.2</span> Using clock reports to summarize time spent</h4>

        <div id="text-ClockReports" class="outline-text-4">
          <p>Billable time for clients are kept in separate org files. </p>

          <p>To get a report of time spent on tasks for <code>XYZ.org</code> you simply visit the <code>XYZ.org</code> file and run an agenda clock report for the last month with <code>F12 &lt; a v m b R</code>. This limits the agenda to this one file, shows the agenda for a full month, moves to last month, and generates a clock report. </p>

          <p>My agenda org clock report settings show 5 levels of detail with links to the tasks. I like wider reports than the default compact setting so I override the <code>:narrow</code> value. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Agenda clock report parameters</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-clockreport-parameter-plist
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #a020f0">:link</span> t <span style="color: #a020f0">:maxlevel</span> 5 <span style="color: #a020f0">:fileskip0</span> t <span style="color: #a020f0">:compact</span> t <span style="color: #a020f0">:narrow</span> 80<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>

          <p>I used to have a monthly clock report dynamic block in each project org file and manually updated them at the end of my billing cycle. I used this as the basis for billing my clients for time spent on their projects. I found updating the dynamic blocks fairly tedious when you have more than a couple of files for the month. </p>

          <p>I have since moved to using agenda clock reports shortly after that feature was added. I find this much more convenient. The data isn't normally for consumption by anyone else so the format of the agenda clock report format is great for my use-case. </p>
        </div>
      </div>
    </div>

    <div id="outline-container-TaskEstimates" class="outline-3">
      <h3 id="TaskEstimates"><a id="sec-10-2" name="sec-10-2"></a><span class="section-number-3">10.2</span> Task Estimates and column view</h3>

      <div id="text-TaskEstimates" class="outline-text-3">
        <p>Estimating how long tasks take to complete is a difficult skill to master. Org-mode makes it easy to practice creating estimates for tasks and then clock the actual time it takes to complete. </p>

        <p>By repeatedly estimating tasks and reviewing how your estimate relates to the actual time clocked you can tune your estimating skills. </p>
      </div>

      <div id="outline-container-CreatingTaskEstimates" class="outline-4">
        <h4 id="CreatingTaskEstimates"><a id="sec-10-2-1" name="sec-10-2-1"></a><span class="section-number-4">10.2.1</span> Creating a task estimate with column mode</h4>

        <div id="text-CreatingTaskEstimates" class="outline-text-4">
          <p>I use <code>properties</code> and <code>column view</code> to do project estimates. </p>

          <p>I set up column view globally with the following headlines </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">Set default column view headings: Task Effort Clock_Summary</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-columns-default-format <span style="color: #4e9a06">&quot;%80ITEM(Task) %10Effort(Effort){:} %10CLOCKSUM&quot;</span><span style="color: #707183">)</span></pre>
          </div>

          <p>This makes column view show estimated task effort and clocked times side-by-side which is great for reviewing your project estimates. </p>

          <p>A property called <code>Effort</code> records the estimated amount of time a given task will take to complete. The estimate times I use are one of: </p>

          <ul class="org-ul">
            <li>10 minutes </li>

            <li>30 minutes </li>

            <li>1 hour </li>

            <li>2 hours </li>

            <li>3 hours </li>

            <li>4 hours </li>

            <li>5 hours </li>

            <li>6 hours </li>

            <li>7 hours </li>

            <li>8 hours </li>
          </ul>

          <p>These are stored for easy use in <code>column mode</code> in the global property <code>Effort_ALL</code>. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">global Effort estimate values</span>
<span style="color: #204a87">; </span><span style="color: #204a87">global STYLE property values for completion</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-global-properties <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;Effort_ALL&quot;</span> . <span style="color: #4e9a06">&quot;0:15 0:30 0:45 1:00 2:00 3:00 4:00 5:00 6:00 0:00&quot;</span><span style="color: #709870">)</span>
                                    <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;STYLE_ALL&quot;</span> . <span style="color: #4e9a06">&quot;habit&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>

          <p>To create an estimate for a task or subtree start column mode with <code>C-c C-x C-c</code> and collapse the tree with <code>c</code>. This shows a table overlayed on top of the headlines with the task name, effort estimate, and clocked time in columns. </p>

          <p>With the cursor in the <code>Effort</code> column for a task you can easily set the estimated effort value with the quick keys <code>1</code> through <code>9</code>. </p>

          <p>After setting the effort values exit <code>column mode</code> with <code>q</code>. </p>
        </div>
      </div>

      <div id="outline-container-SavingEstimate" class="outline-4">
        <h4 id="SavingEstimate"><a id="sec-10-2-2" name="sec-10-2-2"></a><span class="section-number-4">10.2.2</span> Saving your estimate</h4>

        <div id="text-SavingEstimate" class="outline-text-4">
          <p>For fixed price jobs where you provide your estimate to a client, then work to complete the project it is useful to save the original estimate that is provided to the client. </p>

          <p>Save your original estimate by creating a dynamic clock report table at the top of your estimated project subtree. Entering <code>C-c C-x i RET</code> inserts a clock table report with your estimated values and any clocked time to date. </p>

          <div class="org-src-container">
            <pre class="src src-org">Original Estimate
<span style="color: #204a87">#+BEGIN: columnview :hlines 1 :id local</span>
<span style="color: #0000ff">| Task                        | Estimated Effort | CLOCKSUM |</span>
<span style="color: #0000ff">|-----------------------------+------------------+----------|</span>
<span style="color: #0000ff">| ** TODO Project to estimate |             5:40 |          |</span>
<span style="color: #0000ff">| *** TODO Step 1             |             0:10 |          |</span>
<span style="color: #0000ff">| *** TODO Step 2             |             0:10 |          |</span>
<span style="color: #0000ff">| *** TODO Step 3             |             5:10 |          |</span>
<span style="color: #0000ff">| **** TODO Step 3.1          |             2:00 |          |</span>
<span style="color: #0000ff">| **** TODO Step 3.2          |             3:00 |          |</span>
<span style="color: #0000ff">| **** TODO Step 3.3          |             0:10 |          |</span>
<span style="color: #0000ff">| *** TODO Step 4             |             0:10 |          |</span>
<span style="color: #204a87">#+END:</span></pre>
          </div>

          <p>I normally delete the <code>#+BEGIN:</code> and <code>#+END:</code> lines from the original table after providing the estimate to the client to ensure I don't accidentally update the table by hitting <code>C-c C-c</code> on the <code>#+BEGIN:</code> line. </p>

          <p>Saving the original estimate data makes it possible to refine the project tasks into subtasks as you work on the project without losing the original estimate data. </p>
        </div>
      </div>

      <div id="outline-container-ReviewingEstimates" class="outline-4">
        <h4 id="ReviewingEstimates"><a id="sec-10-2-3" name="sec-10-2-3"></a><span class="section-number-4">10.2.3</span> Reviewing your estimate</h4>

        <div id="text-ReviewingEstimates" class="outline-text-4">
          <p><code>Column view</code> is great for reviewing your estimate. This shows your estimated time value and the total clock time for the project side-by-side. </p>

          <p>Creating a dynamic clock table with <code>C-c C-x i RET</code> is a great way to save this project review if you need to make it available to other applications. </p>

          <p><code>C-c C-x C-d</code> also provides a quick summary of clocked time for the current org file. </p>
        </div>
      </div>
    </div>

    <div id="outline-container-ProgressReporting" class="outline-3">
      <h3 id="ProgressReporting"><a id="sec-10-3" name="sec-10-3"></a><span class="section-number-3">10.3</span> Providing progress reports to others</h3>

      <div id="text-ProgressReporting" class="outline-text-3">
        

        <p>When someone wants details of what I've done recently I simple generate a log report in the agenda with tasks I've completed and state changes combined with a clock report for the appropriate time period. </p>

        <p>The following setting shows closed tasks and state changes in the agenda. Combined with the agenda clock report ('R') I can quickly generate all of the details required. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Agenda log mode items to display (closed and state changes by default)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-log-mode-items <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span>closed state<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>To generate the report I pull up the agenda for the appropriate time frame (today, yesterday, this week, or last week) and hit the key sequence <code>l R</code> to add the log report (without clocking data lines) and the agenda clock report at the end. </p>

        <p>Then it's simply a matter of exporting the resulting agenda in some useful format to provide to other people. <code>C-x C-w /tmp/agenda.html RET</code> exports to HTML and <code>C-x C-w /tmp/agenda.txt RET</code> exports to plain text. Other formats are available but I use these two the most. </p>

        <p>Combining this export with tag filters and <code>C-u R</code> can limit the report to exactly the tags that people are interested in. </p>
      </div>
    </div>
  </div>

  <div id="outline-container-Tags" class="outline-2">
    <h2 id="Tags"><a id="sec-11" name="sec-11"></a><span class="section-number-2">11</span> Tags</h2>

    <div id="text-Tags" class="outline-text-2">
      <p>Tasks can have any number of arbitrary tags. Tags are used for: </p>

      <ul class="org-ul">
        <li>filtering todo lists and agenda views </li>

        <li>providing context for tasks </li>

        <li>tagging notes </li>

        <li>tagging phone calls </li>

        <li>tagging meetings </li>

        <li>tagging tasks to be refiled </li>

        <li>tagging tasks in a WAITING state because a parent task is WAITING </li>

        <li>tagging cancelled tasks because a parent task is CANCELLED </li>

        <li>preventing export of some subtrees when publishing </li>
      </ul>

      <p>I use tags mostly for filtering in the agenda. This means you can find tasks with a specific tag easily across your large number of org-mode files. </p>

      <p>Some tags are mutually exclusive. These are defined in a group so that only one of the tags can be applied to a task at a time (disregarding tag inheritance). I use these types for tags for applying context to a task. (Work tasks have an <code>@office</code> tag, and are done at the office, Farm tasks have an <code>@farm</code> tag and are done at the farm – I can't change the oil on the tractor if I'm not at the farm… so I hide these and other tasks by filtering my agenda view to only <code>@office</code> tasks when I'm at the office.) </p>

      <p>Tasks are grouped together in org-files and a <code>#+FILETAGS:</code> entry applies a tag to all tasks in the file. I use this to apply a tag to all tasks in the file. My norang.org file creates a NORANG file tag so I can filter tasks in the agenda in the norang.org file easily. </p>
    </div>

    <div id="outline-container-OrgTagAlist" class="outline-3">
      <h3 id="OrgTagAlist"><a id="sec-11-1" name="sec-11-1"></a><span class="section-number-3">11.1</span> Tags</h3>

      <div id="text-OrgTagAlist" class="outline-text-3">
        <p>Here are my tag definitions with associated keys for filtering in the agenda views. </p>

        <p>The startgroup - endgroup (<code>@XXX</code>) tags are mutually exclusive - selecting one removes a similar tag already on the task. These are the context tags - you can't be in two places at once so if a task is marked with @farm and you add @office then the @farm tag is removed automagically. </p>

        <p>The other tags <code>WAITING</code> .. <code>FLAGGED</code> are not mutually exclusive and multiple tags can appear on a single task. Some of those tags are created by todo state change triggers. The shortcut key is used to add or remove the tag using <code>C-c C-q</code> or to apply the task for filtering on the agenda. </p>

        <p>I have both <code>FARM</code> and <code>@farm</code> tags. <code>FARM</code> is set by a <code>FILETAGS</code> entry and just gives me a way to filter anything farm related. The <code>@farm</code> tag signifies that the task as to be done <i>at the farm</i>. If I have to call someone about something that would have a <code>FARM</code> tag but I can do that at home on my lunch break. I don't physically have to be at the farm to make the call. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">Tags with fast selection keys</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-tag-alist <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #a020f0">:startgroup</span><span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;@errand&quot;</span> . ?e<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;@office&quot;</span> . ?o<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;@home&quot;</span> . ?H<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;@farm&quot;</span> . ?f<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #a020f0">:endgroup</span><span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;WAITING&quot;</span> . ?w<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;HOLD&quot;</span> . ?h<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;PERSONAL&quot;</span> . ?P<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;WORK&quot;</span> . ?W<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;FARM&quot;</span> . ?F<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;ORG&quot;</span> . ?O<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;NORANG&quot;</span> . ?N<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;crypt&quot;</span> . ?E<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;NOTE&quot;</span> . ?n<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;CANCELLED&quot;</span> . ?c<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;FLAGGED&quot;</span> . ??<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Allow setting single tags without the menu</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-fast-tag-selection-single-key <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> expert<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">For tag searches ignore tasks with scheduled and deadline dates</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-tags-todo-honor-ignore-options t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-FileTags" class="outline-3">
      <h3 id="FileTags"><a id="sec-11-2" name="sec-11-2"></a><span class="section-number-3">11.2</span> Filetags</h3>

      <div id="text-FileTags" class="outline-text-3">
        <p>Filetags are a convenient way to apply one or more tags to all of the headings in a file. </p>

        <p>Filetags look like this: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="color: #204a87">#+FILETAGS: NORANG @office</span></pre>
        </div>

        <p>I have the following <code>#+FILETAGS:</code> entries in my org-mode files: </p>
      </div>

      <div id="outline-container-TaggingNonWorkFiles" class="outline-4">
        <h4 id="TaggingNonWorkFiles"><a id="sec-11-2-1" name="sec-11-2-1"></a><span class="section-number-4">11.2.1</span> Non-work related org-mode files</h4>

        <div id="text-TaggingNonWorkFiles" class="outline-text-4">
          <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
              <tr>
                <th class="left" scope="col">File</th>

                <th class="left" scope="col">Tags</th>
              </tr>
            </thead><tbody>
              <tr>
                <td class="left">todo.org</td>

                <td class="left">PERSONAL</td>
              </tr>

              <tr>
                <td class="left">gsoc2009.org</td>

                <td class="left">GSOC PERSONAL</td>
              </tr>

              <tr>
                <td class="left">git.org</td>

                <td class="left">GIT WORK</td>
              </tr>

              <tr>
                <td class="left">org.org</td>

                <td class="left">ORG WORK</td>
              </tr>

              <tr>
                <td class="left">mark.org</td>

                <td class="left">MARK PERSONAL</td>
              </tr>

              <tr>
                <td class="left">farm.org</td>

                <td class="left">FARM PERSONAL</td>
              </tr>
            </tbody></table>
        </div>
      </div>

      <div id="outline-container-TaggingWorkFiles" class="outline-4">
        <h4 id="TaggingWorkFiles"><a id="sec-11-2-2" name="sec-11-2-2"></a><span class="section-number-4">11.2.2</span> Work related org-mode files</h4>

        <div id="text-TaggingWorkFiles" class="outline-text-4">
          <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
              <tr>
                <th class="left" scope="col">File</th>

                <th class="left" scope="col">Tags</th>
              </tr>
            </thead><tbody>
              <tr>
                <td class="left">norang.org</td>

                <td class="left">NORANG @office</td>
              </tr>

              <tr>
                <td class="left">ABC.org</td>

                <td class="left">ABC @office</td>
              </tr>

              <tr>
                <td class="left">XYZ.org</td>

                <td class="left">XYZ @office</td>
              </tr>

              <tr>
                <td class="left">ABC-DEF.org</td>

                <td class="left">ABC DEF @office</td>
              </tr>

              <tr>
                <td class="left">ABC-KKK.org</td>

                <td class="left">ABC KKK @office</td>
              </tr>

              <tr>
                <td class="left">YYY.org</td>

                <td class="left">YYY @office</td>
              </tr>
            </tbody></table>
        </div>
      </div>

      <div id="outline-container-RefileTasks" class="outline-4">
        <h4 id="RefileTasks"><a id="sec-11-2-3" name="sec-11-2-3"></a><span class="section-number-4">11.2.3</span> Refile tasks</h4>

        <div id="text-RefileTasks" class="outline-text-4">
          <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
              <tr>
                <th class="left" scope="col">File</th>

                <th class="left" scope="col">Tags</th>
              </tr>
            </thead><tbody>
              <tr>
                <td class="left">refile.org</td>

                <td class="left">REFILE</td>
              </tr>
            </tbody></table>
        </div>
      </div>
    </div>

    <div id="outline-container-StateTriggerTags" class="outline-3">
      <h3 id="StateTriggerTags"><a id="sec-11-3" name="sec-11-3"></a><span class="section-number-3">11.3</span> State Trigger Tags</h3>

      <div id="text-StateTriggerTags" class="outline-text-3">
        <p>The following tags are automatically added or removed by todo state triggers described previously in <a href="#ToDoStateTriggers">ToDo state triggers</a> </p>

        <ul class="org-ul">
          <li><code>WAITING</code> </li>

          <li><code>CANCELLED</code> </li>
        </ul>
      </div>
    </div>
  </div>

  <div id="outline-container-HandlingNotes" class="outline-2">
    <h2 id="HandlingNotes"><a id="sec-12" name="sec-12"></a><span class="section-number-2">12</span> Handling Notes</h2>

    <div id="text-HandlingNotes" class="outline-text-2">
      <p>Notes are little gems of knowledge that you come across during your day. They are just like tasks except there is nothing to do (except learn and memorize the gem of knowledge). Unfortunately there are way too many gems to remember and my head explodes just thinking about it. </p>

      <p>org-mode to the rescue! </p>

      <p>Often I'll find some cool feature or thing I want to remember while reading the org-mode and git mailing lists in Gnus. To create a note I use my note capture template <code>C-c c n</code>, type a heading for the note and <code>C-c C-c</code> to save it. The only other thing to do is to refile it (later) to the appropriate project file. </p>

      <p>I have an agenda view just to find notes. Notes are refiled to an appropriate project file and task. If there is no specific task it belongs to it goes to the catchall <code>* Notes</code> task. I generally have a catchall notes task in every project file. Notes are created with a <code>NOTE</code> tag already applied by the capture template so I'm free to refile the note anywhere. As long as the note is in a project file that contributes to my agenda (ie. in org-agenda-files) then I can find the note back easily with my notes agenda view by hitting the key combination <code>F12 N</code>. I'm free to limit the agenda view of notes using standard agenda tag filtering. </p>

      <p>Short notes with a meaningful headline are a great way to remember technical details without the need to actually remember anything - other than how to find them back when you need them using <code>F12 N</code>. </p>

      <p>Notes that are project related and not generally useful can be archived with the project and removed from the agenda when the project is removed. </p>

      <p>So my org notes go in org.org and my git notes go in git.org both under the <code>* Notes</code> task. I'll forever be able to find those. A note about some work project detail I want to remember with the project is filed to the project task under the appropriate work org-mode file and eventually gets removed from the agenda when the project is complete and archived. </p>
    </div>
  </div>

  <div id="outline-container-HandlinePhoneCalls" class="outline-2">
    <h2 id="HandlinePhoneCalls"><a id="sec-13" name="sec-13"></a><span class="section-number-2">13</span> Handling Phone Calls</h2>

    <div id="text-HandlinePhoneCalls" class="outline-text-2">
      <p>Phone calls are interruptions and I use capture mode to deal with these (like all interruptions). Most of the heavy lifting for phone calls is done by capture mode. I use a special capture template for phone calls combined with a custom function that replaces text with information from my <code>bbdb</code> addressbook database. </p>

      <p><code>C-c c p</code> starts a capture task normally and I'm free to enter notes from the call in the template immediately. The cursor starts in the template normally where the name of the caller would be inserted. I can use a <code>bbdb</code> lookup function to insert the name with <code>f9-p</code> or I can just type in whatever is appropriate. If a <code>bbdb</code> entry needs to be created for the caller I can do that and replace the caller details with <code>f9-p</code> anytime that is convenient for me. I found that automatically calling the bbdb lookup function would interrupt my workflow during the call in cases where the information about the caller was not readily available. Sometimes I want to make notes first and get the caller details later during the call. </p>

      <p>The phone call capture template starts the clock as soon as the phone rings and I'm free to lookup and replace the caller in bbdb anytime during or after the call. Capture mode starts the clock using the <code>:clock-in t</code> setting in the template. </p>

      <p>When the phone call ends I simple do <code>C-c C-c</code> to close the capture buffer and stop the clock. If I have to close it early and look up other information during the call I just do <code>C-c C-c F9-SPC</code> to close the capture buffer (which stops the clock) and then immediately switch back to the last clocked item to continue the clock in the phone call task. When the phone call ends I clock out which normally clocks in my default task again (if any). </p>

      <p>Here is my set up for phone calls. I would like to thank Gregory J. Grubbs for the original bbdb lookup functions which this version is based on. </p>

      <p>Below is the partial capture template showing the phone call template followed by the phone-call related lookup functions. </p>

      <div class="org-src-container">
        <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Capture templates for: TODO tasks, Notes, appointments, phone calls, and org-protocol</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-capture-templates
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span>...
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;p&quot;</span> <span style="color: #4e9a06">&quot;Phone call&quot;</span> entry <span style="color: #907373">(</span>file <span style="color: #4e9a06">&quot;~/git/org/refile.org&quot;</span><span style="color: #907373">)</span>
               <span style="color: #4e9a06">&quot;* PHONE %? :PHONE:</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">%U&quot;</span> <span style="color: #a020f0">:clock-in</span> t <span style="color: #a020f0">:clock-resume</span> t<span style="color: #709870">)</span>
              ...<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
      </div>

      <div class="org-src-container">
        <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bbdb</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bbdb-com</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; p&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/phone-call</span><span style="color: #707183">)</span>

<span style="color: #204a87">;;</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Phone capture template handling with BBDB lookup</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Adapted from code by Gregory J. Grubbs</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/phone-call</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Return name and company info for caller from bbdb lookup&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #909183">(</span>name rec caller<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> name <span style="color: #709870">(</span>completing-read <span style="color: #4e9a06">&quot;Who is calling? &quot;</span>
                                <span style="color: #907373">(</span>bbdb-hashtable<span style="color: #907373">)</span>
                                <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bbdb-completion-predicate</span>
                                <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">confirm</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #709870">(</span>&gt; <span style="color: #907373">(</span>length name<span style="color: #907373">)</span> 0<span style="color: #709870">)</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">Something was supplied - look it up in bbdb</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> rec
            <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #6276ba">(</span>first
                 <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>bbdb-search <span style="color: #887070">(</span>bbdb-records<span style="color: #887070">)</span> name nil nil<span style="color: #80a880">)</span>
                     <span style="color: #80a880">(</span>bbdb-search <span style="color: #887070">(</span>bbdb-records<span style="color: #887070">)</span> nil name nil<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                name<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>

    <span style="color: #204a87">; </span><span style="color: #204a87">Build the bbdb link if we have a bbdb record, otherwise just return the name</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> caller <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span> <span style="color: #907373">(</span><span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> rec <span style="color: #858580">(</span>vectorp rec<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
                        <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #858580">(</span><span style="color: #80a880">(</span>name <span style="color: #887070">(</span>bbdb-record-name rec<span style="color: #887070">)</span><span style="color: #80a880">)</span>
                              <span style="color: #80a880">(</span>company <span style="color: #887070">(</span>bbdb-record-company rec<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span>
                          <span style="color: #858580">(</span>concat <span style="color: #4e9a06">&quot;[[bbdb:&quot;</span>
                                  name <span style="color: #4e9a06">&quot;][&quot;</span>
                                  name <span style="color: #4e9a06">&quot;]]&quot;</span>
                                  <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">when</span> company
                                    <span style="color: #887070">(</span>concat <span style="color: #4e9a06">&quot; - &quot;</span> company<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
                       <span style="color: #907373">(</span>rec<span style="color: #907373">)</span>
                       <span style="color: #907373">(</span>t <span style="color: #4e9a06">&quot;NameOfCaller&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>insert caller<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
      </div>
    </div>
  </div>

  <div id="outline-container-GTD" class="outline-2">
    <h2 id="GTD"><a id="sec-14" name="sec-14"></a><span class="section-number-2">14</span> GTD stuff</h2>

    <div id="text-GTD" class="outline-text-2">
      <p>Most of my day is deadline/schedule driven. I work off of the agenda first and then pick items from the todo lists as outlined in <a href="#WhatDoIWorkOnNext">What do I work on next?</a> </p>
    </div>

    <div id="outline-container-GTDWeeklyReview" class="outline-3">
      <h3 id="GTDWeeklyReview"><a id="sec-14-1" name="sec-14-1"></a><span class="section-number-3">14.1</span> Weekly Review Process</h3>

      <div id="text-GTDWeeklyReview" class="outline-text-3">
        <p>The first day of the week (usually Monday) I do my weekly review. I keep a list like this one to remind me what needs to be done. </p>

        <p>To keep the agenda fast I set </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-span <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">day</span><span style="color: #707183">)</span></pre>
        </div>

        <p>so only today's date is shown by default. I only need the weekly view during my weekly review and this keeps my agenda generation fast. </p>

        <p>I have a recurring task which keeps my weekly review checklist handy. This pops up as a reminder on Monday's. This week I'm doing my weekly review on Tuesday since Monday was a holiday. </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span>NEXT<span style="font-weight: bold; color: #00578e"> Weekly Review </span><span style="font-weight: bold; color: #ff0000">[0/6]</span>
  <span style="font-weight: bold; color: #a52a2a">SCHEDULED:</span> <span style="text-decoration: underline; color: #a020f0">&lt;2009-05-18 Mon ++1w&gt;</span> 
  :LOGBOOK:...
  :PROPERTIES:...

  What to review:

   - <span style="font-weight: bold">[ ]</span> Check follow-up folder
   - <span style="font-weight: bold">[ ]</span> Review weekly agenda <span style="color: #7f7f7f">=F12 a w //=</span>
   - <span style="font-weight: bold">[ ]</span> Check clocking data for past week <span style="color: #7f7f7f">=v c=</span>
   - <span style="font-weight: bold">[ ]</span> Review clock report for past week <span style="color: #7f7f7f">=R=</span>
     - Check where we spent time (too much or too little) and rectify this week
   - <span style="font-weight: bold">[ ]</span> Look at entire agenda for today  <span style="color: #7f7f7f">=F12 SPC=</span>
   - <span style="font-weight: bold">[ ]</span> Review projects <span style="color: #7f7f7f">=F12 SPC //=</span> and <span style="color: #7f7f7f">=V=</span> repeatedly to view each project

   - start work
     - daily agenda first - knock off items
     - then work on NEXT tasks</pre>
        </div>

        <p>The first item [ ] Check follow-up folder makes me pull out the paper file I dump stuff into all week long - things I need to take care of but are in no particular hurry to deal with. Stuff I get in the mail etc. that I don't want to deal with now. I just toss it in my <code>Follow-Up</code> folder in the filing cabinet and forget about it until the weekly review. </p>

        <p>I go through the folder and weed out anything that needs to be dealt with. After that everything else is in <code>org-mode</code>. I tend to schedule tasks onto the agenda for the coming week so that I don't spend lots of time trying to find what needs to be worked on next. </p>

        <p>This works for me. Your mileage may vary ;) </p>
      </div>
    </div>

    <div id="outline-container-Projects" class="outline-3">
      <h3 id="Projects"><a id="sec-14-2" name="sec-14-2"></a><span class="section-number-3">14.2</span> Project definition and finding stuck projects</h3>

      <div id="text-Projects" class="outline-text-3">
        <p>I'm using a new lazy project definition to mark tasks as projects. This requires zero effort from me. Any task with a subtask using a todo keyword is a project. Period. </p>

        <p>Projects are 'stuck' if they have no subtask with a <code>NEXT</code> todo keyword task defined. </p>

        <p>The org-mode stuck projects agenda view lists projects that have no <code>NEXT</code> task defined. Stuck projects show up on my block agenda and I tend to assign a <code>NEXT</code> task so the list remains empty. This helps to keep projects moving forward. </p>

        <p>I disable the default org-mode stuck projects agenda view with the following setting. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-stuck-projects <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #4e9a06">&quot;&quot;</span> nil nil <span style="color: #4e9a06">&quot;&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>This prevents org-mode from trying to show incorrect data if I select the default stuck project view with <code>F12 #</code> from the agenda menu. My customized stuck projects view is part of my block agenda displayed with <code>F12 SPC</code>. </p>

        <p>Projects can have subprojects - and these subprojects can also be stuck. Any project that is stuck shows up on the stuck projects list so I can indicate or create a <code>NEXT</code> task to move that project forward. </p>

        <p>In the following example <code>Stuck Project A</code> is stuck because it has no subtask which is <code>NEXT</code>. <code>Project C</code> is not stuck because it has <code>NEXT</code> tasks <code>SubTask G</code> and <code>Task I</code>. <code>Stuck Sub Project D</code> is stuck because <code>SubTask E</code> is not <code>NEXT</code> and there are no other tasks available in this project. </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* Category</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> Stuck Project A</span>
<span style="font-weight: bold; color: #a52a2a">*** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #a52a2a"> Task B</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> Project C</span>
<span style="font-weight: bold; color: #a52a2a">*** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #a52a2a"> Stuck Sub Project D</span>
<span style="color: #204a87">**** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="color: #204a87"> SubTask E</span>
<span style="font-weight: bold; color: #a52a2a">*** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #a52a2a"> Sub Project F</span>
<span style="color: #204a87">**** </span>NEXT<span style="color: #204a87"> SubTask G</span>
<span style="color: #204a87">**** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="color: #204a87"> SubTask H</span>
<span style="font-weight: bold; color: #a52a2a">*** </span>NEXT<span style="font-weight: bold; color: #a52a2a"> Task I</span>
<span style="font-weight: bold; color: #a52a2a">*** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #a52a2a"> Task J</span></pre>
        </div>

        <p>All of the stuck projects and subprojects show up in the stuck projects list and that is my indication to assign or create <code>NEXT</code> tasks until the stuck projects list is empty. Occasionally some subtask is <code>WAITING</code> for something and the project is stuck until that condition is satisfied. In this case I leave it on the stuck project list and just work on something else. This stuck project 'bugs' me regularly when I see it on the block agenda and this prompts me to follow up on the thing that I'm waiting for. </p>

        <p>I have the following helper functions defined for projects which are used by agenda views. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-project-p</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Any task with a todo keyword subtask&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>has-subtask<span style="color: #907373">)</span>
          <span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span>is-a-task <span style="color: #6276ba">(</span>member <span style="color: #858580">(</span>nth 2 <span style="color: #80a880">(</span>org-heading-components<span style="color: #80a880">)</span><span style="color: #858580">)</span> org-todo-keywords-1<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
        <span style="color: #907373">(</span>forward-line 1<span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>not has-subtask<span style="color: #858580">)</span>
                    <span style="color: #858580">(</span>&lt; <span style="color: #80a880">(</span>point<span style="color: #80a880">)</span> subtree-end<span style="color: #858580">)</span>
                    <span style="color: #858580">(</span>re-search-forward <span style="color: #4e9a06">&quot;^</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">*</span><span style="color: #4e9a06">+ &quot;</span> subtree-end t<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #858580">(</span>member <span style="color: #80a880">(</span>org-get-todo-state<span style="color: #80a880">)</span> org-todo-keywords-1<span style="color: #858580">)</span>
            <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> has-subtask t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">and</span> is-a-task has-subtask<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-project-subtree-p</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Any task with a todo keyword that is in a project subtree.</span>
<span style="color: #4e9a06">Callers of this function already widen the buffer view.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>task <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #6276ba">(</span>org-back-to-heading <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">invisible-ok</span><span style="color: #6276ba">)</span>
                              <span style="color: #6276ba">(</span>point<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
      <span style="color: #709870">(</span>bh/find-project-task<span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span>equal <span style="color: #6276ba">(</span>point<span style="color: #6276ba">)</span> task<span style="color: #907373">)</span>
          nil
        t<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-task-p</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Any task with a todo keyword and no subtask&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>has-subtask<span style="color: #907373">)</span>
          <span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span>is-a-task <span style="color: #6276ba">(</span>member <span style="color: #858580">(</span>nth 2 <span style="color: #80a880">(</span>org-heading-components<span style="color: #80a880">)</span><span style="color: #858580">)</span> org-todo-keywords-1<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
        <span style="color: #907373">(</span>forward-line 1<span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>not has-subtask<span style="color: #858580">)</span>
                    <span style="color: #858580">(</span>&lt; <span style="color: #80a880">(</span>point<span style="color: #80a880">)</span> subtree-end<span style="color: #858580">)</span>
                    <span style="color: #858580">(</span>re-search-forward <span style="color: #4e9a06">&quot;^</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">*</span><span style="color: #4e9a06">+ &quot;</span> subtree-end t<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #858580">(</span>member <span style="color: #80a880">(</span>org-get-todo-state<span style="color: #80a880">)</span> org-todo-keywords-1<span style="color: #858580">)</span>
            <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> has-subtask t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">and</span> is-a-task <span style="color: #907373">(</span>not has-subtask<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-subproject-p</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Any task which is a subtask of another project&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>is-subproject<span style="color: #709870">)</span>
        <span style="color: #709870">(</span>is-a-task <span style="color: #907373">(</span>member <span style="color: #6276ba">(</span>nth 2 <span style="color: #858580">(</span>org-heading-components<span style="color: #858580">)</span><span style="color: #6276ba">)</span> org-todo-keywords-1<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #6276ba">(</span>not is-subproject<span style="color: #6276ba">)</span> <span style="color: #6276ba">(</span>org-up-heading-safe<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #6276ba">(</span>member <span style="color: #858580">(</span>nth 2 <span style="color: #80a880">(</span>org-heading-components<span style="color: #80a880">)</span><span style="color: #858580">)</span> org-todo-keywords-1<span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> is-subproject t<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">and</span> is-a-task is-subproject<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/list-sublevels-for-projects-indented</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Set org-tags-match-list-sublevels so when restricted to a subtree we list all subtasks.</span>
<span style="color: #4e9a06">  This is normally used by skipping functions where this variable is already local to the agenda.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>marker-buffer org-agenda-restrict-begin<span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-tags-match-list-sublevels <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">indented</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-tags-match-list-sublevels nil<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  nil<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/list-sublevels-for-projects</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Set org-tags-match-list-sublevels so when restricted to a subtree we list all subtasks.</span>
<span style="color: #4e9a06">  This is normally used by skipping functions where this variable is already local to the agenda.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>marker-buffer org-agenda-restrict-begin<span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-tags-match-list-sublevels t<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-tags-match-list-sublevels nil<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  nil<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defvar</span> <span style="font-weight: bold; color: #0084c8">bh/hide-scheduled-and-waiting-next-tasks</span> t<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/toggle-next-task-display</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/hide-scheduled-and-waiting-next-tasks <span style="color: #909183">(</span>not bh/hide-scheduled-and-waiting-next-tasks<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">when</span>  <span style="color: #909183">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-agenda-redo<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>message <span style="color: #4e9a06">&quot;%s WAITING and SCHEDULED NEXT Tasks&quot;</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">if</span> bh/hide-scheduled-and-waiting-next-tasks <span style="color: #4e9a06">&quot;Hide&quot;</span> <span style="color: #4e9a06">&quot;Show&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-stuck-projects</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are not stuck projects&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>next-headline <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>outline-next-heading<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span>bh/is-project-p<span style="color: #907373">)</span>
          <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #6276ba">(</span><span style="color: #858580">(</span>subtree-end <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #887070">(</span>org-end-of-subtree t<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span>
                 <span style="color: #858580">(</span>has-next <span style="color: #858580">)</span><span style="color: #6276ba">)</span>
            <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
              <span style="color: #858580">(</span>forward-line 1<span style="color: #858580">)</span>
              <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #887070">(</span>not has-next<span style="color: #887070">)</span> <span style="color: #887070">(</span>&lt; <span style="color: #707183">(</span>point<span style="color: #707183">)</span> subtree-end<span style="color: #887070">)</span> <span style="color: #887070">(</span>re-search-forward <span style="color: #4e9a06">&quot;^</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">*+ NEXT &quot;</span> subtree-end t<span style="color: #887070">)</span><span style="color: #80a880">)</span>
                <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">unless</span> <span style="color: #887070">(</span>member <span style="color: #4e9a06">&quot;WAITING&quot;</span> <span style="color: #707183">(</span>org-get-tags-at<span style="color: #707183">)</span><span style="color: #887070">)</span>
                  <span style="color: #887070">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> has-next t<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
            <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">if</span> has-next
                nil
              next-headline<span style="color: #6276ba">)</span><span style="color: #907373">)</span> <span style="color: #204a87">; </span><span style="color: #204a87">a stuck project, has subtasks but no next task</span>
        nil<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-non-stuck-projects</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are not stuck projects&quot;</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">(bh/list-sublevels-for-projects-indented)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>next-headline <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>outline-next-heading<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span>bh/is-project-p<span style="color: #907373">)</span>
          <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #6276ba">(</span><span style="color: #858580">(</span>subtree-end <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #887070">(</span>org-end-of-subtree t<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span>
                 <span style="color: #858580">(</span>has-next <span style="color: #858580">)</span><span style="color: #6276ba">)</span>
            <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
              <span style="color: #858580">(</span>forward-line 1<span style="color: #858580">)</span>
              <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #887070">(</span>not has-next<span style="color: #887070">)</span> <span style="color: #887070">(</span>&lt; <span style="color: #707183">(</span>point<span style="color: #707183">)</span> subtree-end<span style="color: #887070">)</span> <span style="color: #887070">(</span>re-search-forward <span style="color: #4e9a06">&quot;^</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">*+ NEXT &quot;</span> subtree-end t<span style="color: #887070">)</span><span style="color: #80a880">)</span>
                <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">unless</span> <span style="color: #887070">(</span>member <span style="color: #4e9a06">&quot;WAITING&quot;</span> <span style="color: #707183">(</span>org-get-tags-at<span style="color: #707183">)</span><span style="color: #887070">)</span>
                  <span style="color: #887070">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> has-next t<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
            <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">if</span> has-next
                next-headline
              nil<span style="color: #6276ba">)</span><span style="color: #907373">)</span> <span style="color: #204a87">; </span><span style="color: #204a87">a stuck project, has subtasks but no next task</span>
        next-headline<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-non-projects</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are not projects&quot;</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">(bh/list-sublevels-for-projects-indented)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #709870">(</span>bh/skip-non-stuck-projects<span style="color: #709870">)</span><span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
        <span style="color: #709870">(</span>widen<span style="color: #709870">)</span>
        <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #907373">(</span><span style="color: #6276ba">(</span>subtree-end <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #80a880">(</span>org-end-of-subtree t<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
           <span style="color: #6276ba">(</span><span style="color: #858580">(</span>bh/is-project-p<span style="color: #858580">)</span>
            nil<span style="color: #6276ba">)</span>
           <span style="color: #6276ba">(</span><span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #80a880">(</span>bh/is-project-subtree-p<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>not <span style="color: #887070">(</span>bh/is-task-p<span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span>
            nil<span style="color: #6276ba">)</span>
           <span style="color: #6276ba">(</span>t
            subtree-end<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #709870">(</span>org-end-of-subtree t<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-non-tasks</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Show non-project tasks.</span>
<span style="color: #4e9a06">Skip project and sub-project tasks, habits, and project related tasks.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>next-headline <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>outline-next-heading<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-task-p<span style="color: #6276ba">)</span>
        nil<span style="color: #907373">)</span>
       <span style="color: #907373">(</span>t
        next-headline<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-project-trees-and-habits</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are projects&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-project-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-is-habit-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span>t
        nil<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-projects-and-habits-and-single-tasks</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are projects, tasks that are habits, single non-project tasks&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>next-headline <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>outline-next-heading<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-is-habit-p<span style="color: #6276ba">)</span>
        next-headline<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> bh/hide-scheduled-and-waiting-next-tasks
             <span style="color: #858580">(</span>member <span style="color: #4e9a06">&quot;WAITING&quot;</span> <span style="color: #80a880">(</span>org-get-tags-at<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
        next-headline<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-project-p<span style="color: #6276ba">)</span>
        next-headline<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>bh/is-task-p<span style="color: #858580">)</span> <span style="color: #858580">(</span>not <span style="color: #80a880">(</span>bh/is-project-subtree-p<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
        next-headline<span style="color: #907373">)</span>
       <span style="color: #907373">(</span>t
        nil<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-project-tasks-maybe</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Show tasks related to the current restriction.</span>
<span style="color: #4e9a06">When restricted to a project, skip project and sub project tasks, habits, NEXT tasks, and loose tasks.</span>
<span style="color: #4e9a06">When not restricted, skip project and sub-project tasks, habits, and project related tasks.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
           <span style="color: #907373">(</span>next-headline <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>outline-next-heading<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
           <span style="color: #907373">(</span>limit-to-project <span style="color: #6276ba">(</span>marker-buffer org-agenda-restrict-begin<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-project-p<span style="color: #6276ba">)</span>
        next-headline<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-is-habit-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>not limit-to-project<span style="color: #858580">)</span>
             <span style="color: #858580">(</span>bh/is-project-subtree-p<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> limit-to-project
             <span style="color: #858580">(</span>bh/is-project-subtree-p<span style="color: #858580">)</span>
             <span style="color: #858580">(</span>member <span style="color: #80a880">(</span>org-get-todo-state<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>list <span style="color: #4e9a06">&quot;NEXT&quot;</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span>t
        nil<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-project-tasks</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Show non-project tasks.</span>
<span style="color: #4e9a06">Skip project and sub-project tasks, habits, and project related tasks.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-project-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-is-habit-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-project-subtree-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span>t
        nil<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-non-project-tasks</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Show project tasks.</span>
<span style="color: #4e9a06">Skip project and sub-project tasks, habits, and loose non-project tasks.&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
           <span style="color: #907373">(</span>next-headline <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>outline-next-heading<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-project-p<span style="color: #6276ba">)</span>
        next-headline<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-is-habit-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>bh/is-project-subtree-p<span style="color: #858580">)</span>
             <span style="color: #858580">(</span>member <span style="color: #80a880">(</span>org-get-todo-state<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>list <span style="color: #4e9a06">&quot;NEXT&quot;</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>not <span style="color: #858580">(</span>bh/is-project-subtree-p<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span>t
        nil<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-projects-and-habits</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are projects and tasks that are habits&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/is-project-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="color: #6276ba">(</span>org-is-habit-p<span style="color: #6276ba">)</span>
        subtree-end<span style="color: #907373">)</span>
       <span style="color: #907373">(</span>t
        nil<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-non-subprojects</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are not projects&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>next-headline <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #6276ba">(</span>outline-next-heading<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #709870">(</span>bh/is-subproject-p<span style="color: #709870">)</span>
        nil
      next-headline<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-Archiving" class="outline-2">
    <h2 id="Archiving"><a id="sec-15" name="sec-15"></a><span class="section-number-2">15</span> Archiving</h2>

    <div id="text-Archiving" class="outline-text-2"></div>

    <div id="outline-container-ArchivingSubtrees" class="outline-3">
      <h3 id="ArchivingSubtrees"><a id="sec-15-1" name="sec-15-1"></a><span class="section-number-3">15.1</span> Archiving Subtrees</h3>

      <div id="text-ArchivingSubtrees" class="outline-text-3">
        <p>My archiving procedure has changed. I used to move entire subtrees to a separate archive file for the project. Task subtrees in <code>FILE.org</code> get archived to <code>FILE.org_archive</code> using the <code>a y</code> command in the agenda. </p>

        <p>I still archive to the same archive file as before but now I archive any done state todo task that is old enough to archive. Tasks to archive are listed automatically at the end of my block agenda and these are guaranteed to be old enough that I've already billed any time associated with these tasks. This cleans up my project trees and removes the old tasks that are no longer interesting. The archived tasks get extra property data created during the archive procedure so that it is possible to reconstruct exactly where the archived entry came from in the rare case where you want to unarchive something. </p>

        <p>My archive files are huge but so far I haven't found a need to split them by year (or decade) :) </p>

        <p>Archivable tasks show up in the last section of my block agenda when a new month starts. Any tasks that are done but have no timestamps this month or last month (ie. they are over 30 days old) are available to archive. Timestamps include closed dates, notes, clock data, etc - any active or inactive timestamp in the task. </p>

        <p>Archiving is trivial. Just mark all of the entries in the block agenda using the <code>m</code> key and then archive them all to the appropriate place with <code>B $</code>. This normally takes less than 5 minutes once a month. </p>
      </div>
    </div>

    <div id="outline-container-ArchiveSetup" class="outline-3">
      <h3 id="ArchiveSetup"><a id="sec-15-2" name="sec-15-2"></a><span class="section-number-3">15.2</span> Archive Setup</h3>

      <div id="text-ArchiveSetup" class="outline-text-3">
        <p>I no longer use an <code>ARCHIVE</code> property in my subtrees. Tasks can just archive normally to the <code>Archived Tasks</code> heading in the archive file. </p>

        <p>The following setting ensures that task states are untouched when they are archived. This makes it possible to archive tasks that are not marked <code>DONE</code>. By default tasks are archived under the heading <code>* Archived Tasks</code> in the archive file. </p>

        <p>This archiving function does not keep your project trees intact. It archives done state tasks after they are old enough to they are removed from the main org file. It should be possible to reconstruct the original tree from the archive detail properties but I've never needed to do this yet. The archived detail is very useful the few times a year I actually need to look for some archived data but most of the time I just move it out of the way and keep it for historical purposes. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-archive-mark-done nil<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-archive-location <span style="color: #4e9a06">&quot;%s_archive::* Archived Tasks&quot;</span><span style="color: #707183">)</span></pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/skip-non-archivable-tasks</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Skip trees that are not available for archiving&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #204a87">;; </span><span style="color: #204a87">Consider only tasks with done todo headings as archivable candidates</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>next-headline <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>outline-next-heading<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span>subtree-end <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span> <span style="color: #858580">(</span>org-end-of-subtree t<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span>member <span style="color: #6276ba">(</span>org-get-todo-state<span style="color: #6276ba">)</span> org-todo-keywords-1<span style="color: #907373">)</span>
          <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #6276ba">(</span>member <span style="color: #858580">(</span>org-get-todo-state<span style="color: #858580">)</span> org-done-keywords<span style="color: #6276ba">)</span>
              <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #858580">(</span><span style="color: #80a880">(</span>daynr <span style="color: #887070">(</span>string-to-int <span style="color: #707183">(</span>format-time-string <span style="color: #4e9a06">&quot;%d&quot;</span> <span style="color: #7388d6">(</span>current-time<span style="color: #7388d6">)</span><span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                     <span style="color: #80a880">(</span>a-month-ago <span style="color: #887070">(</span>* 60 60 24 <span style="color: #707183">(</span>+ daynr 1<span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                     <span style="color: #80a880">(</span>last-month <span style="color: #887070">(</span>format-time-string <span style="color: #4e9a06">&quot;%Y-%m-&quot;</span> <span style="color: #707183">(</span>time-subtract <span style="color: #7388d6">(</span>current-time<span style="color: #7388d6">)</span> <span style="color: #7388d6">(</span>seconds-to-time a-month-ago<span style="color: #7388d6">)</span><span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                     <span style="color: #80a880">(</span>this-month <span style="color: #887070">(</span>format-time-string <span style="color: #4e9a06">&quot;%Y-%m-&quot;</span> <span style="color: #707183">(</span>current-time<span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                     <span style="color: #80a880">(</span>subtree-is-current <span style="color: #887070">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
                                           <span style="color: #707183">(</span>forward-line 1<span style="color: #707183">)</span>
                                           <span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #7388d6">(</span>&lt; <span style="color: #909183">(</span>point<span style="color: #909183">)</span> subtree-end<span style="color: #7388d6">)</span>
                                                <span style="color: #7388d6">(</span>re-search-forward <span style="color: #909183">(</span>concat last-month <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">&quot;</span> this-month<span style="color: #909183">)</span> subtree-end t<span style="color: #7388d6">)</span><span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span>
                <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">if</span> subtree-is-current
                    subtree-end <span style="color: #204a87">; </span><span style="color: #204a87">Has a date in this month or last month, skip it</span>
                  nil<span style="color: #858580">)</span><span style="color: #6276ba">)</span>  <span style="color: #204a87">; </span><span style="color: #204a87">available to archive</span>
            <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">or</span> subtree-end <span style="color: #858580">(</span>point-max<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        next-headline<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-ArchiveTagHidesInfo" class="outline-3">
      <h3 id="ArchiveTagHidesInfo"><a id="sec-15-3" name="sec-15-3"></a><span class="section-number-3">15.3</span> Archive Tag - Hiding Information</h3>

      <div id="text-ArchiveTagHidesInfo" class="outline-text-3">
        <p>The only time I set the ARCHIVE tag on a task is to prevent it from opening by default because it has tons of information I don't really need to look at on a regular basis. I can open the task with C-TAB if I need to see the gory details (like a huge table of data related to the task) but normally I don't need that information displayed. </p>
      </div>
    </div>

    <div id="outline-container-WhenToArchive" class="outline-3">
      <h3 id="WhenToArchive"><a id="sec-15-4" name="sec-15-4"></a><span class="section-number-3">15.4</span> When to Archive</h3>

      <div id="text-WhenToArchive" class="outline-text-3">
        <p>Archiving monthly works well for me. I keep completed tasks around for at least 30 days before archiving them. This keeps current clocking information for the last 30 days out of the archives. This keeps my files that contribute to the agenda fairly current (this month, and last month, and anything that is unfinished). I only rarely visit tasks in the archive when I need to pull up ancient history for something. </p>

        <p>Archiving keeps my main working files clutter-free. If I ever need the detail for the archived tasks they are available in the appropriate archive file. </p>
      </div>
    </div>
  </div>

  <div id="outline-container-Publishing" class="outline-2">
    <h2 id="Publishing"><a id="sec-16" name="sec-16"></a><span class="section-number-2">16</span> Publishing and Exporting</h2>

    <div id="text-Publishing" class="outline-text-2">
      <p>I don't do a lot of publishing for other people but I do keep a set of private client system documentation online. Most of this documentation is a collection of notes exported to HTML. </p>

      <p>Everything at <a href="http://doc.norang.ca/">http://doc.norang.ca/</a> is generated by publishing org-files. This includes the index pages on this site. </p>

      <p>Org-mode can export to a variety of publishing formats including (but not limited to) </p>

      <ul class="org-ul">
        <li>ASCII (plain text - but not the original org-mode file) </li>

        <li>HTML </li>

        <li>LaTeX </li>

        <li>Docbook which enables getting to lots of other formats like ODF, XML, etc </li>

        <li>PDF via LaTeX or Docbook </li>

        <li>iCal </li>
      </ul>

      <p>I haven't begun the scratch the surface of what org-mode is capable of doing. My main use case for org-mode publishing is just to create HTML documents for viewing online conveniently. Someday I'll get time to try out the other formats when I need them for something. </p>
    </div>

    <div id="outline-container-sec-16-1" class="outline-3">
      <h3 id="sec-16-1"><span class="section-number-3">16.1</span> New Exporter Setup</h3>

      <div id="text-16-1" class="outline-text-3">
        

        <p>The new exporter created by Nicolas Goaziou was introduced in org 8.0. </p>

        <p>I have the following setup for the exporters I use. </p>

        <p>Alphabetical listing options need to be set before the exporters are loaded for filling to work correctly. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-alphabetical-lists t<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Explicitly load required exporters</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">ox-html</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">ox-latex</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">ox-ascii</span><span style="color: #707183">)</span></pre>
        </div>
      </div>

      <div id="outline-container-sec-16-1-1" class="outline-4">
        <h4 id="sec-16-1-1"><span class="section-number-4">16.1.1</span> Conversion from the old exporter to the new exporter</h4>

        <div id="text-16-1-1" class="outline-text-4">
          

          <p>Here is the list of changes I made to move from the old exporter (pre org 8.0) to the new exporter. </p>

          <ul class="org-ul">
            <li>Explicitly require exporters 
              <ul class="org-ul">
                <li>Add <code>ox-html</code> </li>

                <li>Add <code>ox-latex</code> </li>

                <li>Add <code>ox-ascii</code> </li>
              </ul>
            </li>

            <li>Rename variables 
              <ul class="org-ul">
                <li><code>org-export-html-style-extra</code> to <code>org-html-head-extra</code> </li>

                <li><code>org-export-html-validation-link</code> to <code>org-html-validation-link</code> </li>

                <li><code>org-export-html-inline-images</code> to <code>org-html-inline-images</code> </li>

                <li><code>org-export-html-style-include-default</code> to <code>org-html-head-include-default-style</code> </li>

                <li><code>org-export-html-xml-declaration</code> to <code>org-html-xml-declaration</code> </li>

                <li><code>org-export-latex-listings</code> to <code>org-latex-listings</code> </li>

                <li><code>org-export-html-style-include-scripts</code> to <code>org-html-head-include-scripts</code> </li>
              </ul>
            </li>

            <li>Publishing changes 
              <ul class="org-ul">
                <li>Rename <code>:publishing-function</code> 

                  <ul class="org-ul">
                    <li><code>org-publish-org-to-html</code> to <code>org-html-publish-to-html</code> </li>

                    <li><code>org-publish-org-to-org</code> to <code>org-org-publish-to-org</code> </li>
                  </ul>
                </li>

                <li>Change <code>:style</code> to <code>:html-head</code> </li>
              </ul>
            </li>

            <li>Change <code>bh/is-late-deadline</code> to handle modified deadline string in agenda </li>

            <li>Reverse agenda sorting for late deadlines 
              <p>These are no longer reported with negative values on the agenda </p>
            </li>

            <li>Add a blank line after my inactive timestamps following headings to prevent them from being exported. </li>
          </ul>
        </div>
      </div>
    </div>

    <div id="outline-container-OrgBabel" class="outline-3">
      <h3 id="OrgBabel"><a id="sec-16-2" name="sec-16-2"></a><span class="section-number-3">16.2</span> Org-babel Setup</h3>

      <div id="text-OrgBabel" class="outline-text-3">
        <p>Org-babel makes it easy to generate decent graphics using external packages like ditaa, graphviz, PlantUML, and others. </p>

        <p>The setup is really easy. <code>ditaa</code> is provided with the org-mode source. You'll have to install the <code>graphviz</code> and <code>PlantUML</code> packages on your system. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-ditaa-jar-path <span style="color: #4e9a06">&quot;~/git/org-mode/contrib/scripts/ditaa.jar&quot;</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-plantuml-jar-path <span style="color: #4e9a06">&quot;~/java/plantuml.jar&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-babel-after-execute-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/display-inline-images</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Make babel results blocks lowercase</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-babel-results-keyword <span style="color: #4e9a06">&quot;results&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/display-inline-images</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">condition-case</span> nil
      <span style="color: #909183">(</span>org-display-inline-images<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #f5666d">error</span> nil<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>org-babel-do-load-languages
 <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> org-babel-load-languages<span style="color: #7388d6">)</span>
 <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>emacs-lisp . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>dot . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>ditaa . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>R . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>python . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>ruby . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>gnuplot . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>clojure . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>sh . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>ledger . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>org . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>plantuml . t<span style="color: #709870">)</span>
         <span style="color: #709870">(</span>latex . t<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Do not prompt to confirm evaluation</span>
<span style="color: #204a87">; </span><span style="color: #204a87">This may be dangerous - make sure you understand the consequences</span>
<span style="color: #204a87">; </span><span style="color: #204a87">of setting this -- see the docstring for details</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-confirm-babel-evaluate nil<span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Use fundamental mode when editing plantuml blocks with C-c '</span>
<span style="color: #707183">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-src-lang-modes</span> <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #4e9a06">&quot;plantuml&quot;</span> . fundamental<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>Now you just create a <code>begin-src</code> block for the appropriate tool, edit the text, and build the pictures with <code>C-c C-c</code>. After evaluating the block results are displayed. You can toggle display of inline images with <code>C-c C-x C-v</code> </p>

        <p>I disable startup with inline images because when I access my org-files from an SSH session without X this breaks (say from my Android phone) it fails when trying to display the images on a non-X session. It's much more important for me to be able to access my org files from my Android phone remotely than it is to see images on startup. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Don't enable this because it breaks access to emacs from my Android phone</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-startup-with-inline-images nil<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-playingwithditaa" class="outline-3">
      <h3 id="playingwithditaa"><a id="sec-16-3" name="sec-16-3"></a><span class="section-number-3">16.3</span> Playing with ditaa</h3>

      <div id="text-playingwithditaa" class="outline-text-3">
        <p><a href="http://ditaa.sourceforge.net/">ditaa</a> is a great tool for quickly generating graphics to convey ideas and <code>ditaa</code> is distributed with org-mode! All of the graphics in this document are automatically generated by org-mode using plain text source. </p>

        <p>Artist mode makes it easy to create boxes and lines for ditaa graphics. </p>

        <p>The source for a ditaa graphic looks like this in org-mode: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="color: #204a87">#+begin_src ditaa :file some_filename.png :cmdline -r -s 0.8</span>
  &lt;context of ditaa source goes here&gt;
<span style="color: #204a87">#+end_src</span></pre>
        </div>

        <p>Here's an example without the <code>#+begin_src</code> and <code>#+end_src</code> lines. </p>

        <div class="org-src-container">
          <pre class="src src-ditaa">    +-----------+        +---------+  
    |    PLC    |        |         |                
    |  Network  +&lt;------&gt;+   PLC   +&lt;---=---------+ 
    |    cRED   |        |  c707   |              | 
    +-----------+        +----+----+              | 
                              ^                   | 
                              |                   | 
                              |  +----------------|-----------------+
                              |  |                |                 |
                              v  v                v                 v
      +----------+       +----+--+--+      +-------+---+      +-----+-----+       Windows clients
      |          |       |          |      |           |      |           |      +----+      +----+
      | Database +&lt;-----&gt;+  Shared  +&lt;----&gt;+ Executive +&lt;-=--&gt;+ Operator  +&lt;----&gt;|cYEL| . . .|cYEL|
      |   c707   |       |  Memory  |      |   c707    |      | Server    |      |    |      |    |
      +--+----+--+       |{d} cGRE  |      +------+----+      |   c707    |      +----+      +----+
         ^    ^          +----------+             ^           +-------+---+
         |    |                                   |                        
         |    +--------=--------------------------+                    
         v                                                             
+--------+--------+                                                         
|                 |                                                         
| Millwide System |            -------- Data ---------                      
| cBLU            |            --=----- Signals ---=--                      
+-----------------+</pre>
        </div>

        <div class="figure">
          <p><img alt="communication.png" src="communication.png" /> </p>
        </div>
      </div>
    </div>

    <div id="outline-container-Graphviz" class="outline-3">
      <h3 id="Graphviz"><a id="sec-16-4" name="sec-16-4"></a><span class="section-number-3">16.4</span> Playing with graphviz</h3>

      <div id="text-Graphviz" class="outline-text-3">
        <p><a href="http://www.graphviz.org/">Graphviz</a> is another great tool for creating graphics in your documents. </p>

        <p>The source for a graphviz graphic looks like this in org-mode: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="color: #204a87">#+begin_src dot :file some_filename.png :cmdline -Kdot -Tpng</span>
  &lt;context of graphviz source goes here&gt;
<span style="color: #204a87">#+end_src</span></pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-dot">digraph G {
  size=<span style="color: #4e9a06">&quot;8,6&quot;</span>
  ratio=expand
  edge [dir=both]
  plcnet [shape=box, label=<span style="color: #4e9a06">&quot;PLC Network&quot;</span>]
  subgraph cluster_wrapline {
    label=<span style="color: #4e9a06">&quot;Wrapline Control System&quot;</span>
    color=purple
    subgraph {
    rank=same
    exec
    sharedmem [style=filled, fillcolor=lightgrey, shape=box]
    }
    edge[style=dotted, dir=none]
    exec -&gt; opserver
    exec -&gt; db
    plc -&gt; exec
    edge [style=line, dir=both]
    exec -&gt; sharedmem
    sharedmem -&gt; db
    plc -&gt; sharedmem
    sharedmem -&gt; opserver
  }
  plcnet -&gt; plc [constraint=false]
  millwide [shape=box, label=<span style="color: #4e9a06">&quot;Millwide System&quot;</span>]
  db -&gt; millwide

  subgraph cluster_opclients {
    color=blue
    label=<span style="color: #4e9a06">&quot;Operator Clients&quot;</span>
    rankdir=LR
    labelloc=b
    node[label=client]
    opserver -&gt; client1
    opserver -&gt; client2
    opserver -&gt; client3
  }
}</pre>
        </div>

        <div class="figure">
          <p><img alt="gv01.png" src="gv01.png" /> </p>
        </div>

        <p>The <code>-Kdot</code> is optional (defaults to <code>dot</code>) but you can substitute other graphviz types instead here (ie. <code>twopi</code>, <code>neato</code>, <code>circo</code>, etc). </p>
      </div>
    </div>

    <div id="outline-container-PlantUML" class="outline-3">
      <h3 id="PlantUML"><a id="sec-16-5" name="sec-16-5"></a><span class="section-number-3">16.5</span> Playing with PlantUML</h3>

      <div id="text-PlantUML" class="outline-text-3">
        <p>I have just started using <a href="http://plantuml.sourceforge.net/">PlantUML</a> which is built on top of <a href="http://www.graphviz.org/">Graphviz</a>. I'm still experimenting with this but so far I like it a lot. The todo state change diagrams in this document are created with PlantUML. </p>

        <p>The source for a PlantUML graphic looks like this in org-mode: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="color: #204a87">#+begin_src plantuml :file somefile.png</span>
  &lt;context of PlantUML source goes here&gt;
<span style="color: #204a87">#+end_src</span></pre>
        </div>
      </div>

      <div id="outline-container-PlantUMLSequence" class="outline-4">
        <h4 id="PlantUMLSequence"><a id="sec-16-5-1" name="sec-16-5-1"></a><span class="section-number-4">16.5.1</span> Sequence Diagram</h4>

        <div id="text-PlantUMLSequence" class="outline-text-4">
          

          <div class="org-src-container">
            <pre class="src src-plantuml">title Example Sequence Diagram
activate Client
Client -&gt; Server: Session Initiation
note right: Client requests new session
activate Server
Client &lt;-- Server: Authorization Request
note left: Server requires authentication
Client -&gt; Server: Authorization Response
note right: Client provides authentication details
Server --&gt; Client: Session Token
note left: Session established
deactivate Server
Client -&gt; Client: Saves token
deactivate Client</pre>
          </div>

          <div class="figure">
            <p><img alt="sequence.png" src="sequence.png" /> </p>
          </div>
        </div>
      </div>

      <div id="outline-container-PlantUMLActivity" class="outline-4">
        <h4 id="PlantUMLActivity"><a id="sec-16-5-2" name="sec-16-5-2"></a><span class="section-number-4">16.5.2</span> Activity Diagram</h4>

        <div id="text-PlantUMLActivity" class="outline-text-4">
          

          <div class="org-src-container">
            <pre class="src src-plantuml">title Example Activity Diagram
note right: Example Function
(*)--&gt; &quot;Step 1&quot;
--&gt; &quot;Step 2&quot;
-&gt; &quot;Step 3&quot;
--&gt; &quot;Step 4&quot;
--&gt; === STARTLOOP ===
note top: For each element in the array
if &quot;Are we done?&quot; then
  -&gt; [no] &quot;Do this&quot;
  -&gt; &quot;Do that&quot;
  note bottom: Important note\ngoes here
  -up-&gt; &quot;Increment counters&quot;
  --&gt; === STARTLOOP ===
else
  --&gt; [yes] === ENDLOOP ===
endif
--&gt; &quot;Last Step&quot;
--&gt; (*)</pre>
          </div>

          <div class="figure">
            <p><img alt="activity.png" src="activity.png" /> </p>
          </div>
        </div>
      </div>

      <div id="outline-container-PlantUMLUseCase" class="outline-4">
        <h4 id="PlantUMLUseCase"><a id="sec-16-5-3" name="sec-16-5-3"></a><span class="section-number-4">16.5.3</span> Usecase Diagram</h4>

        <div id="text-PlantUMLUseCase" class="outline-text-4">
          <div class="org-src-container">
            <pre class="src src-plantuml">LabUser --&gt; (Runs Simulation)
LabUser --&gt; (Analyses Results)</pre>
          </div>

          <div class="figure">
            <p><img alt="usecase.png" src="usecase.png" /> </p>
          </div>
        </div>
      </div>

      <div id="outline-container-PlantUMLObject" class="outline-4">
        <h4 id="PlantUMLObject"><a id="sec-16-5-4" name="sec-16-5-4"></a><span class="section-number-4">16.5.4</span> Object Diagram</h4>

        <div id="text-PlantUMLObject" class="outline-text-4">
          <div class="org-src-container">
            <pre class="src src-plantuml">Object1 &lt;|-- Object2
Object1: someVar
Object1: execute()
Object2: getState()
Object2: setState()
Object2: state</pre>
          </div>

          <div class="figure">
            <p><img alt="object.png" src="object.png" /> </p>
          </div>
        </div>
      </div>

      <div id="outline-container-PlantUMLState" class="outline-4">
        <h4 id="PlantUMLState"><a id="sec-16-5-5" name="sec-16-5-5"></a><span class="section-number-4">16.5.5</span> State Diagram</h4>

        <div id="text-PlantUMLState" class="outline-text-4">
          <div class="org-src-container">
            <pre class="src src-plantuml">[*] --&gt; Start
Start -&gt; State2
State2 -&gt; State3
note right of State3: Notes can be\nattached to states
State2 --&gt; State4
State4 -&gt; Finish
State3 --&gt; Finish
Finish --&gt; [*]</pre>
          </div>

          <div class="figure">
            <p><img alt="plantuml_example_states.png" src="plantuml_example_states.png" /> </p>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-PublishingSingleFiles" class="outline-3">
      <h3 id="PublishingSingleFiles"><a id="sec-16-6" name="sec-16-6"></a><span class="section-number-3">16.6</span> Publishing Single Files</h3>

      <div id="text-PublishingSingleFiles" class="outline-text-3">
        <p>Org-mode exports the current file to one of the standard formats by invoking an export function. The standard key binding for this is <code>C-c C-e</code> followed by the key for the type of export you want. </p>

        <p>This works great for single files or parts of files – if you narrow the buffer to only part of the org-mode file then you only get the narrowed detail in the export. </p>
      </div>
    </div>

    <div id="outline-container-PublishingProjects" class="outline-3">
      <h3 id="PublishingProjects"><a id="sec-16-7" name="sec-16-7"></a><span class="section-number-3">16.7</span> Publishing Projects</h3>

      <div id="text-PublishingProjects" class="outline-text-3">
        <p>I mainly use publishing for publishing multiple files or projects. I don't want to remember where the created export file needs to move to and org-mode projects are a great solution to this. </p>

        <p>The <a href="http://doc.norang.ca">http://doc.norang.ca</a> website (and a bunch of other files that are not publicly available) are all created by editing org-mode files and publishing the project the file is contained in. This is great for people like me who want to figure out the details once and forget about it. I love stuff that Just Works(tm). </p>

        <p>I have 5 main projects I use org-mode publishing for currently: </p>

        <ul class="org-ul">
          <li>norang (website) </li>

          <li>doc.norang.ca (website, published documents) </li>

          <li>doc.norang.ca/private (website, non-published documents) </li>

          <li>www.norang.ca/tmp (temporary publishing site for testing org-mode stuff) </li>

          <li>org files (which are selectively included by other websites) </li>
        </ul>

        <p>Here's my publishing setup: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">experimenting with docbook exports - not finished</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-docbook-xsl-fo-proc-command <span style="color: #4e9a06">&quot;fop %s %s&quot;</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-docbook-xslt-proc-command <span style="color: #4e9a06">&quot;xsltproc --output %s /usr/share/xml/docbook/stylesheet/nwalsh/fo/docbook.xsl %s&quot;</span><span style="color: #707183">)</span>
<span style="color: #204a87">;</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Inline images in HTML instead of producting links to the image</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-html-inline-images t<span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Do not use sub or superscripts - I currently don't need this functionality in my documents</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-with-sub-superscripts nil<span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Use org.css from the norang website for export document stylesheets</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-html-head-extra <span style="color: #4e9a06">&quot;&lt;link rel=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">stylesheet</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">http://doc.norang.ca/org.css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> type=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text/css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> /&gt;&quot;</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-html-head-include-default-style nil<span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Do not generate internal css formatting for HTML exports</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-htmlize-output-type <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> css<span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Export with LaTeX fragments</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-with-LaTeX-fragments t<span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Increase default number of headings to export</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-headline-levels 6<span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">List of projects</span>
<span style="color: #204a87">; </span><span style="color: #204a87">norang       - http://www.norang.ca/</span>
<span style="color: #204a87">; </span><span style="color: #204a87">doc          - http://doc.norang.ca/</span>
<span style="color: #204a87">; </span><span style="color: #204a87">org-mode-doc - http://doc.norang.ca/org-mode.html and associated files</span>
<span style="color: #204a87">; </span><span style="color: #204a87">org          - miscellaneous todo lists for publishing</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-publish-project-alist
      <span style="color: #204a87">;</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">http://www.norang.ca/  (norang website)</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">norang-org are the org-files that generate the content</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">norang-extra are images and css files that need to be included</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">norang is the top-level project that gets published</span>
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;norang-org&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/www.norang.ca&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/www.norang.ca/htdocs&quot;</span>
               <span style="color: #a020f0">:recursive</span> t
               <span style="color: #a020f0">:table-of-contents</span> nil
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;org&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> org-html-publish-to-html
               <span style="color: #a020f0">:style-include-default</span> nil
               <span style="color: #a020f0">:section-numbers</span> nil
               <span style="color: #a020f0">:table-of-contents</span> nil
               <span style="color: #a020f0">:html-head</span> <span style="color: #4e9a06">&quot;&lt;link rel=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">stylesheet</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">norang.css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> type=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text/css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> /&gt;&quot;</span>
               <span style="color: #a020f0">:author-info</span> nil
               <span style="color: #a020f0">:creator-info</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;norang-extra&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/www.norang.ca/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/www.norang.ca/htdocs&quot;</span>
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">pdf</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">png</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">jpg</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">gif&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> org-publish-attachment
               <span style="color: #a020f0">:recursive</span> t
               <span style="color: #a020f0">:author</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;norang&quot;</span>
               <span style="color: #a020f0">:components</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;norang-org&quot;</span> <span style="color: #4e9a06">&quot;norang-extra&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #204a87">;</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">http://doc.norang.ca/  (norang website)</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">doc-org are the org-files that generate the content</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">doc-extra are images and css files that need to be included</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">doc is the top-level project that gets published</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;doc-org&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/doc.norang.ca/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/doc.norang.ca/htdocs&quot;</span>
               <span style="color: #a020f0">:recursive</span> nil
               <span style="color: #a020f0">:section-numbers</span> nil
               <span style="color: #a020f0">:table-of-contents</span> nil
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;org&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> <span style="color: #907373">(</span>org-html-publish-to-html org-org-publish-to-org<span style="color: #907373">)</span>
               <span style="color: #a020f0">:style-include-default</span> nil
               <span style="color: #a020f0">:html-head</span> <span style="color: #4e9a06">&quot;&lt;link rel=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">stylesheet</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">/org.css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> type=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text/css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> /&gt;&quot;</span>
               <span style="color: #a020f0">:author-info</span> nil
               <span style="color: #a020f0">:creator-info</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;doc-extra&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/doc.norang.ca/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/doc.norang.ca/htdocs&quot;</span>
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">pdf</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">png</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">jpg</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">gif&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> org-publish-attachment
               <span style="color: #a020f0">:recursive</span> nil
               <span style="color: #a020f0">:author</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;doc&quot;</span>
               <span style="color: #a020f0">:components</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;doc-org&quot;</span> <span style="color: #4e9a06">&quot;doc-extra&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;doc-private-org&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/doc.norang.ca/private&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/doc.norang.ca/htdocs/private&quot;</span>
               <span style="color: #a020f0">:recursive</span> nil
               <span style="color: #a020f0">:section-numbers</span> nil
               <span style="color: #a020f0">:table-of-contents</span> nil
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;org&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> <span style="color: #907373">(</span>org-html-publish-to-html org-org-publish-to-org<span style="color: #907373">)</span>
               <span style="color: #a020f0">:style-include-default</span> nil
               <span style="color: #a020f0">:html-head</span> <span style="color: #4e9a06">&quot;&lt;link rel=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">stylesheet</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">/org.css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> type=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text/css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> /&gt;&quot;</span>
               <span style="color: #a020f0">:auto-sitemap</span> t
               <span style="color: #a020f0">:sitemap-filename</span> <span style="color: #4e9a06">&quot;index.html&quot;</span>
               <span style="color: #a020f0">:sitemap-title</span> <span style="color: #4e9a06">&quot;Norang Private Documents&quot;</span>
               <span style="color: #a020f0">:sitemap-style</span> <span style="color: #4e9a06">&quot;tree&quot;</span>
               <span style="color: #a020f0">:author-info</span> nil
               <span style="color: #a020f0">:creator-info</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;doc-private-extra&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/doc.norang.ca/private&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/doc.norang.ca/htdocs/private&quot;</span>
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">pdf</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">png</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">jpg</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">gif&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> org-publish-attachment
               <span style="color: #a020f0">:recursive</span> nil
               <span style="color: #a020f0">:author</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;doc-private&quot;</span>
               <span style="color: #a020f0">:components</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;doc-private-org&quot;</span> <span style="color: #4e9a06">&quot;doc-private-extra&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #204a87">;</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">Miscellaneous pages for other websites</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">org are the org-files that generate the content</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;org-org&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/org/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/org&quot;</span>
               <span style="color: #a020f0">:recursive</span> t
               <span style="color: #a020f0">:section-numbers</span> nil
               <span style="color: #a020f0">:table-of-contents</span> nil
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;org&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> org-html-publish-to-html
               <span style="color: #a020f0">:style-include-default</span> nil
               <span style="color: #a020f0">:html-head</span> <span style="color: #4e9a06">&quot;&lt;link rel=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">stylesheet</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">/org.css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> type=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text/css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> /&gt;&quot;</span>
               <span style="color: #a020f0">:author-info</span> nil
               <span style="color: #a020f0">:creator-info</span> nil<span style="color: #709870">)</span>
              <span style="color: #204a87">;</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">http://doc.norang.ca/  (norang website)</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">org-mode-doc-org this document</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">org-mode-doc-extra are images and css files that need to be included</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">org-mode-doc is the top-level project that gets published</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">This uses the same target directory as the 'doc' project</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;org-mode-doc-org&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/org-mode-doc/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/doc.norang.ca/htdocs&quot;</span>
               <span style="color: #a020f0">:recursive</span> t
               <span style="color: #a020f0">:section-numbers</span> nil
               <span style="color: #a020f0">:table-of-contents</span> nil
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;org&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> <span style="color: #907373">(</span>org-html-publish-to-html<span style="color: #907373">)</span>
               <span style="color: #a020f0">:plain-source</span> t
               <span style="color: #a020f0">:htmlized-source</span> t
               <span style="color: #a020f0">:style-include-default</span> nil
               <span style="color: #a020f0">:html-head</span> <span style="color: #4e9a06">&quot;&lt;link rel=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">stylesheet</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">/org.css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> type=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text/css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> /&gt;&quot;</span>
               <span style="color: #a020f0">:author-info</span> nil
               <span style="color: #a020f0">:creator-info</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;org-mode-doc-extra&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;~/git/org-mode-doc/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/doc.norang.ca/htdocs&quot;</span>
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">pdf</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">png</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">jpg</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">gif</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">org&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> org-publish-attachment
               <span style="color: #a020f0">:recursive</span> t
               <span style="color: #a020f0">:author</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;org-mode-doc&quot;</span>
               <span style="color: #a020f0">:components</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;org-mode-doc-org&quot;</span> <span style="color: #4e9a06">&quot;org-mode-doc-extra&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
              <span style="color: #204a87">;</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">http://doc.norang.ca/  (norang website)</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">org-mode-doc-org this document</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">org-mode-doc-extra are images and css files that need to be included</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">org-mode-doc is the top-level project that gets published</span>
              <span style="color: #204a87">; </span><span style="color: #204a87">This uses the same target directory as the 'doc' project</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;tmp-org&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;/tmp/publish/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/www.norang.ca/htdocs/tmp&quot;</span>
               <span style="color: #a020f0">:recursive</span> t
               <span style="color: #a020f0">:section-numbers</span> nil
               <span style="color: #a020f0">:table-of-contents</span> nil
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;org&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> <span style="color: #907373">(</span>org-html-publish-to-html org-org-publish-to-org<span style="color: #907373">)</span>
               <span style="color: #a020f0">:html-head</span> <span style="color: #4e9a06">&quot;&lt;link rel=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">stylesheet</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">http://doc.norang.ca/org.css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> type=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text/css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> /&gt;&quot;</span>
               <span style="color: #a020f0">:plain-source</span> t
               <span style="color: #a020f0">:htmlized-source</span> t
               <span style="color: #a020f0">:style-include-default</span> nil
               <span style="color: #a020f0">:auto-sitemap</span> t
               <span style="color: #a020f0">:sitemap-filename</span> <span style="color: #4e9a06">&quot;index.html&quot;</span>
               <span style="color: #a020f0">:sitemap-title</span> <span style="color: #4e9a06">&quot;Test Publishing Area&quot;</span>
               <span style="color: #a020f0">:sitemap-style</span> <span style="color: #4e9a06">&quot;tree&quot;</span>
               <span style="color: #a020f0">:author-info</span> t
               <span style="color: #a020f0">:creator-info</span> t<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;tmp-extra&quot;</span>
               <span style="color: #a020f0">:base-directory</span> <span style="color: #4e9a06">&quot;/tmp/publish/&quot;</span>
               <span style="color: #a020f0">:publishing-directory</span> <span style="color: #4e9a06">&quot;/ssh:www-data@www:~/www.norang.ca/htdocs/tmp&quot;</span>
               <span style="color: #a020f0">:base-extension</span> <span style="color: #4e9a06">&quot;css</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">pdf</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">png</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">jpg</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">gif&quot;</span>
               <span style="color: #a020f0">:publishing-function</span> org-publish-attachment
               <span style="color: #a020f0">:recursive</span> t
               <span style="color: #a020f0">:author</span> nil<span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;tmp&quot;</span>
               <span style="color: #a020f0">:components</span> <span style="color: #907373">(</span><span style="color: #4e9a06">&quot;tmp-org&quot;</span> <span style="color: #4e9a06">&quot;tmp-extra&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">I'm lazy and don't want to remember the name of the project to publish when I modify</span>
<span style="color: #204a87">; </span><span style="color: #204a87">a file that is part of a project.  So this function saves the file, and publishes</span>
<span style="color: #204a87">; </span><span style="color: #204a87">the project that includes this file</span>
<span style="color: #204a87">;</span>
<span style="color: #204a87">; </span><span style="color: #204a87">It's bound to C-S-F12 so I just edit and hit C-S-F12 when I'm done and move on to the next thing</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/save-then-publish</span> <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #2f8b58">&amp;optional</span> force<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span> <span style="color: #4e9a06">&quot;P&quot;</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>save-buffer<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>org-save-all-org-buffers<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>org-html-head-extra<span style="color: #709870">)</span>
        <span style="color: #709870">(</span>org-html-validation-link <span style="color: #4e9a06">&quot;&lt;a href=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">http://validator.w3.org/check?uri=referer</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;Validate XHTML 1.0&lt;/a&gt;&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-publish-current-project force<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-s-&lt;f12&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/save-then-publish</span><span style="color: #707183">)</span></pre>
        </div>

        <p>The main projects are <code>norang</code>, <code>doc</code>, <code>doc-private</code>, <code>org-mode-doc</code>, and <code>tmp</code>. These projects publish directly to the webserver directory on a remote web server that serves the site. Publishing one of these projects exports all modified pages, generates images, and copies the resulting files to the webserver so that they are immediately available for viewing. </p>

        <p>The <a href="http://doc.norang.ca/">http://doc.norang.ca/</a> site contains subdirectories with client and private documentation that are restricted by using Apache Basic authentication. I don't create links to these sites from the publicly viewable pages. <a href="http://doc.norang.ca/someclient/">http://doc.norang.ca/someclient/</a> would show the index for any org files under <code>~/git/doc.norang.ca/someclient/</code> if that is set up as a viewable website. I use most of the information myself but give access to clients if they are interested in the information/notes that I keep about their systems. </p>

        <p>This works great for me - I know where my notes are and I can access them from anywhere on the internet. I'm also free to share notes with other people by simply giving them the link to the appropriate site. </p>

        <p>All I need to remember to do is edit the appropriate org file and publish it with C-S-F12 – not exactly hard :) </p>

        <p>I added a temporary publishing site for testing exports and validation. This is the <code>tmp</code> site which takes files from <code>/tmp/publish</code> and exports those files to a website publishing directory. This makes it easy to try new throw-away things on a live server. </p>
      </div>
    </div>

    <div id="outline-container-MiscBabelExportSettings" class="outline-3">
      <h3 id="MiscBabelExportSettings"><a id="sec-16-8" name="sec-16-8"></a><span class="section-number-3">16.8</span> Miscellaneous Export Settings</h3>

      <div id="text-MiscBabelExportSettings" class="outline-text-3">
        <p>This is a collection of export and publishing related settings that I use. </p>
      </div>

      <div id="outline-container-FontifyLatexListings" class="outline-4">
        <h4 id="FontifyLatexListings"><a id="sec-16-8-1" name="sec-16-8-1"></a><span class="section-number-4">16.8.1</span> Fontify Latex listings for source blocks</h4>

        <div id="text-FontifyLatexListings" class="outline-text-4">
          <p>For export to latex I use the following setting to get fontified listings from source blocks: </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-latex-listings t<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-ExportHTMLWithoutXMLHeader" class="outline-4">
        <h4 id="ExportHTMLWithoutXMLHeader"><a id="sec-16-8-2" name="sec-16-8-2"></a><span class="section-number-4">16.8.2</span> Export HTML without XML header</h4>

        <div id="text-ExportHTMLWithoutXMLHeader" class="outline-text-4">
          <p>I use the following setting to remove the xml header line for HTML exports. This xml line was confusing Open Office when opening the HTML to convert to ODT. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-html-xml-declaration <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;html&quot;</span> . <span style="color: #4e9a06">&quot;&quot;</span><span style="color: #709870">)</span>
                                       <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;was-html&quot;</span> . <span style="color: #4e9a06">&quot;&lt;?xml version=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">1.0</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> encoding=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">%s</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">?&gt;&quot;</span><span style="color: #709870">)</span>
                                       <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;php&quot;</span> . <span style="color: #4e9a06">&quot;&lt;?php echo </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&lt;?xml version=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">1.0</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> encoding=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">%s</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> ?&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">; ?&gt;&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-AllowVariableBindingForExport" class="outline-4">
        <h4 id="AllowVariableBindingForExport"><a id="sec-16-8-3" name="sec-16-8-3"></a><span class="section-number-4">16.8.3</span> Allow binding variables on export without confirmation</h4>

        <div id="text-AllowVariableBindingForExport" class="outline-text-4">
          <p>The following setting allows #+BIND: variables to be set on export without confirmation. In rare situations where I want to override some org-mode variable for export this allows exporting the document without a prompt. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-allow-BIND t<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-Reminders" class="outline-2">
    <h2 id="Reminders"><a id="sec-17" name="sec-17"></a><span class="section-number-2">17</span> Reminders</h2>

    <div id="text-Reminders" class="outline-text-2">
      <p>I use appt for reminders. It's simple and unobtrusive – putting pending appointments in the status bar and beeping as 12, 9, 6, 3, and 0 minutes before the appointment is due. </p>

      <p>Everytime the agenda is displayed (and that's lots for me) the appointment list is erased and rebuilt from the current agenda details for today. This means everytime I reschedule something, add or remove tasks that are time related the appointment list is automatically updated the next time I look at the agenda. </p>
    </div>

    <div id="outline-container-ReminderSetup" class="outline-3">
      <h3 id="ReminderSetup"><a id="sec-17-1" name="sec-17-1"></a><span class="section-number-3">17.1</span> Reminder Setup</h3>

      <div id="text-ReminderSetup" class="outline-text-3">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">Erase all reminders and rebuilt reminders for today from the agenda</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/org-agenda-to-appt</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> appt-time-msg-list nil<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>org-agenda-to-appt<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Rebuild the reminders everytime the agenda is displayed</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-finalize-agenda-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/org-agenda-to-appt</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">This is at the end of my .emacs - so appointments are set up when Emacs starts</span>
<span style="color: #707183">(</span>bh/org-agenda-to-appt<span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Activate appointments so we get notifications</span>
<span style="color: #707183">(</span>appt-activate t<span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">If we leave Emacs running overnight - reset the appointments one minute after midnight</span>
<span style="color: #707183">(</span>run-at-time <span style="color: #4e9a06">&quot;24:01&quot;</span> nil <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/org-agenda-to-appt</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-ProductivityTools" class="outline-2">
    <h2 id="ProductivityTools"><a id="sec-18" name="sec-18"></a><span class="section-number-2">18</span> Productivity Tools</h2>

    <div id="text-ProductivityTools" class="outline-text-2">
      <p>This section is a miscellaneous collection of Emacs customizations that I use with org-mode so that it Works-For-Me(tm). </p>
    </div>

    <div id="outline-container-AbbrevMode" class="outline-3">
      <h3 id="AbbrevMode"><a id="sec-18-1" name="sec-18-1"></a><span class="section-number-3">18.1</span> Abbrev-mode and Skeletons</h3>

      <div id="text-AbbrevMode" class="outline-text-3">
        

        <p>I use skeletons with abbrev-mode to quickly add preconfigured blocks to my Emacs edit buffers. </p>

        <p>I have blocks for creating: </p>

        <ul class="org-ul">
          <li>generic blocks in org-mode </li>

          <li>plantuml blocks in org-mode 
            <ul class="org-ul">
              <li>plantuml activity diagram block in org-mode </li>

              <li>plantuml sequence diagram block in org-mode </li>
            </ul>
          </li>

          <li>graphviz dot blocks in org-mode </li>

          <li>ditaa blocks in org-mode </li>

          <li>elisp source blocks in org-mode </li>
        </ul>

        <p>I still use <code>&lt; e TAB</code> and <code>&lt; s TAB</code> for creating example blocks and simple shell script blocks that need no further parameters. </p>

        <p>Here's my current setup for org-mode related skeletons. Each one defines an abbrev-mode shortcut so I can type <code>splantumlRET</code> to create a Plantuml block. This prompts for the filename (without extension) for the generated image file. </p>

        <p>At work I add a <code>:tangle</code> header to the skeleton and explicitly include the <code>@startuml</code> and <code>@enduml</code> marker lines in the skeleton so I can tangle the source file and share it with my colleagues. This makes the tangled source useable in Notepad and the <code>PlantUML</code> jar file running standalone. </p>

        <p>I have put the <code>s</code> (src) prefix on the shortcuts to prevent abbrev-mode from trying to expand <code>PlantUML</code> when I'm typing it in a sentence. </p>

        <p>For convenience in activity diagrams I added <code>sif</code> and <code>sfor</code> and just change the labels for the synchronization bars. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Enable abbrev-mode</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode-hook</span> <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">lambda</span> <span style="color: #909183">()</span> <span style="color: #909183">(</span>abbrev-mode 1<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Skeletons</span>
<span style="color: #204a87">;;</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">sblk - Generic block #+begin_FOO .. #+end_FOO</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block</span>
  <span style="color: #4e9a06">&quot;Insert an org block, querying for type.&quot;</span>
  <span style="color: #4e9a06">&quot;Type: &quot;</span>
  <span style="color: #4e9a06">&quot;#+begin_&quot;</span> str <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  _ - \n
  <span style="color: #4e9a06">&quot;#+end_&quot;</span> str <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;sblk&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">splantuml - PlantUML Source block</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-plantuml</span>
  <span style="color: #4e9a06">&quot;Insert a org plantuml block, querying for filename.&quot;</span>
  <span style="color: #4e9a06">&quot;File (no extension): &quot;</span>
  <span style="color: #4e9a06">&quot;#+begin_src plantuml :file &quot;</span> str <span style="color: #4e9a06">&quot;.png :cache yes</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  _ - \n
  <span style="color: #4e9a06">&quot;#+end_src</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;splantuml&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-plantuml</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-plantuml-activity</span>
  <span style="color: #4e9a06">&quot;Insert a org plantuml block, querying for filename.&quot;</span>
  <span style="color: #4e9a06">&quot;File (no extension): &quot;</span>
  <span style="color: #4e9a06">&quot;#+begin_src plantuml :file &quot;</span> str <span style="color: #4e9a06">&quot;-act.png :cache yes :tangle &quot;</span> str <span style="color: #4e9a06">&quot;-act.txt</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #7388d6">(</span>bh/plantuml-reset-counters<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;@startuml</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;skinparam activity {</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;BackgroundColor&lt;&lt;New&gt;&gt; Cyan</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;}</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;title &quot;</span> str <span style="color: #4e9a06">&quot; - </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;note left: &quot;</span> str <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;(*) --&gt; </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&quot;</span> str <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;--&gt; (*)</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  _ - \n
  <span style="color: #4e9a06">&quot;@enduml</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;#+end_src</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defvar</span> <span style="font-weight: bold; color: #0084c8">bh/plantuml-if-count</span> 0<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/plantuml-if</span> <span style="color: #7388d6">()</span> 
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">incf</span> bh/plantuml-if-count<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>number-to-string bh/plantuml-if-count<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defvar</span> <span style="font-weight: bold; color: #0084c8">bh/plantuml-loop-count</span> 0<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/plantuml-loop</span> <span style="color: #7388d6">()</span> 
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">incf</span> bh/plantuml-loop-count<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>number-to-string bh/plantuml-loop-count<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/plantuml-reset-counters</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/plantuml-if-count 0
        bh/plantuml-loop-count 0<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;sact&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-plantuml-activity</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-plantuml-activity-if</span>
  <span style="color: #4e9a06">&quot;Insert a org plantuml block activity if statement&quot;</span>
  <span style="color: #4e9a06">&quot;&quot;</span> 
  <span style="color: #4e9a06">&quot;if </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06"> then</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;  -&gt; [condition] ==IF&quot;</span> <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> ifn <span style="color: #909183">(</span>bh/plantuml-if<span style="color: #909183">)</span><span style="color: #7388d6">)</span> <span style="color: #4e9a06">&quot;==</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;  --&gt; ==IF&quot;</span> ifn <span style="color: #4e9a06">&quot;M1==</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;  -left-&gt; ==IF&quot;</span> ifn <span style="color: #4e9a06">&quot;M2==</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;else</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;end if</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;--&gt; ==IF&quot;</span> ifn <span style="color: #4e9a06">&quot;M2==&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;sif&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-plantuml-activity-if</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-plantuml-activity-for</span>
  <span style="color: #4e9a06">&quot;Insert a org plantuml block activity for statement&quot;</span>
  <span style="color: #4e9a06">&quot;Loop for each: &quot;</span> 
  <span style="color: #4e9a06">&quot;--&gt; ==LOOP&quot;</span> <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> loopn <span style="color: #909183">(</span>bh/plantuml-loop<span style="color: #909183">)</span><span style="color: #7388d6">)</span> <span style="color: #4e9a06">&quot;==</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;note left: Loop&quot;</span> loopn <span style="color: #4e9a06">&quot;: For each &quot;</span> str <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;--&gt; ==ENDLOOP&quot;</span> loopn <span style="color: #4e9a06">&quot;==</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;note left: Loop&quot;</span> loopn <span style="color: #4e9a06">&quot;: End for each &quot;</span> str <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span> <span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;sfor&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-plantuml-activity-for</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-plantuml-sequence</span>
  <span style="color: #4e9a06">&quot;Insert a org plantuml activity diagram block, querying for filename.&quot;</span>
  <span style="color: #4e9a06">&quot;File appends (no extension): &quot;</span>
  <span style="color: #4e9a06">&quot;#+begin_src plantuml :file &quot;</span> str <span style="color: #4e9a06">&quot;-seq.png :cache yes :tangle &quot;</span> str <span style="color: #4e9a06">&quot;-seq.txt</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;@startuml</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;title &quot;</span> str <span style="color: #4e9a06">&quot; - </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;actor CSR as </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">Customer Service Representative</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;participant CSMO as </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">CSM Online</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;participant CSMU as </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">CSM Unix</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;participant NRIS</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;actor Customer&quot;</span>
  _ - \n
  <span style="color: #4e9a06">&quot;@enduml</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;#+end_src</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;sseq&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-plantuml-sequence</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">sdot - Graphviz DOT block</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-dot</span>
  <span style="color: #4e9a06">&quot;Insert a org graphviz dot block, querying for filename.&quot;</span>
  <span style="color: #4e9a06">&quot;File (no extension): &quot;</span>
  <span style="color: #4e9a06">&quot;#+begin_src dot :file &quot;</span> str <span style="color: #4e9a06">&quot;.png :cache yes :cmdline -Kdot -Tpng</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;graph G {</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  _ - \n
  <span style="color: #4e9a06">&quot;}</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  <span style="color: #4e9a06">&quot;#+end_src</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;sdot&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-dot</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">sditaa - Ditaa source block</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-ditaa</span>
  <span style="color: #4e9a06">&quot;Insert a org ditaa block, querying for filename.&quot;</span>
  <span style="color: #4e9a06">&quot;File (no extension): &quot;</span>
  <span style="color: #4e9a06">&quot;#+begin_src ditaa :file &quot;</span> str <span style="color: #4e9a06">&quot;.png :cache yes</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  _ - \n
  <span style="color: #4e9a06">&quot;#+end_src</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;sditaa&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-ditaa</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">selisp - Emacs Lisp source block</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">define-skeleton</span> <span style="font-weight: bold; color: #00578e">skel-org-block-elisp</span>
  <span style="color: #4e9a06">&quot;Insert a org emacs-lisp block&quot;</span>
  <span style="color: #4e9a06">&quot;&quot;</span>
  <span style="color: #4e9a06">&quot;#+begin_src emacs-lisp</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span>
  _ - \n
  <span style="color: #4e9a06">&quot;#+end_src</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&quot;</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>define-abbrev org-mode-abbrev-table <span style="color: #4e9a06">&quot;selisp&quot;</span> <span style="color: #4e9a06">&quot;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">skel-org-block-elisp</span><span style="color: #707183">)</span></pre>
        </div>

        <p>I also use abbrev-mode when taking notes at work. I tend to write first names for people which get expanded to their complete name in my notes. So if I write <code>mickey</code> it gets automatically expanded to <code>Mickey Mouse</code> as I type. To create an abbreviation just type in the short form followed by <code>C-x a i l</code> to create an abbreviation for the current mode I'm in. </p>

        <p>The only thing you have to be careful with is not to use a common word for your abbreviation since abbrev-mode will try to expand it everytime you enter it. I found this annoying when I used <code>plantuml</code> as one of my abbreviations. </p>

        <p>I also use skeletons and abbrev-mode for C source files at work. This works really well for me. </p>
      </div>

      <div id="outline-container-ActivityDiagramExample" class="outline-4">
        <h4 id="ActivityDiagramExample"><a id="sec-18-1-1" name="sec-18-1-1"></a><span class="section-number-4">18.1.1</span> Example PlantUml Activity Diagram Generation</h4>

        <div id="text-ActivityDiagramExample" class="outline-text-4">
          

          <p>When creating activity diagrams I can use 'sif' and 'sfor' to add IF and FOR blocks to the diagram with unique numbering automatically generated. </p>

          <p>Example: Create a new diagram and enter 2 IFs and 2 FOR blocks </p>

          <p>Create diagram: &quot;sact RET test RET&quot; </p>

          <p>gives </p>

          <div class="org-src-container">
            <pre class="src src-plantuml">@startuml
skinparam activity {
BackgroundColor&lt;&lt;New&gt;&gt; Cyan
}

title test - 
note left: test
(*) --&gt; &quot;test&quot;
--&gt; (*)

@enduml</pre>
          </div>

          <div class="figure">
            <p><img alt="test-act.png" src="test-act.png" /> </p>
          </div>

          <p>Put cursor on –&gt; (*) and enter &quot;sif RET&quot; </p>

          <p>gives </p>

          <div class="org-src-container">
            <pre class="src src-plantuml">@startuml
skinparam activity {
BackgroundColor&lt;&lt;New&gt;&gt; Cyan
}

title test - 
note left: test
(*) --&gt; &quot;test&quot;
if &quot;&quot; then
  -&gt; [condition] ==IF1==
  --&gt; ==IF1M1==
  -left-&gt; ==IF1M2==
else
end if
--&gt; ==IF1M2==
--&gt; (*)

@enduml</pre>
          </div>

          <div class="figure">
            <p><img alt="test-act2.png" src="test-act2.png" /> </p>
          </div>

          <p>repeat on –&gt; (*) line </p>

          <p>gives </p>

          <div class="org-src-container">
            <pre class="src src-plantuml">@startuml
skinparam activity {
BackgroundColor&lt;&lt;New&gt;&gt; Cyan
}

title test - 
note left: test
(*) --&gt; &quot;test&quot;
if &quot;&quot; then
  -&gt; [condition] ==IF1==
  --&gt; ==IF1M1==
  -left-&gt; ==IF1M2==
else
end if
--&gt; ==IF1M2==
if &quot;&quot; then
  -&gt; [condition] ==IF2==
  --&gt; ==IF2M1==
  -left-&gt; ==IF2M2==
else
end if
--&gt; ==IF2M2==
--&gt; (*)

@enduml</pre>
          </div>

          <div class="figure">
            <p><img alt="test-act3.png" src="test-act3.png" /> </p>
          </div>

          <p>and add two for loops at the end with &quot;sfor RET line in file RET&quot; and &quot;sfor RET address in addressbook RET&quot; </p>

          <p>gives </p>

          <div class="org-src-container">
            <pre class="src src-plantuml">@startuml
skinparam activity {
BackgroundColor&lt;&lt;New&gt;&gt; Cyan
}

title test - 
note left: test
(*) --&gt; &quot;test&quot;
if &quot;&quot; then
  -&gt; [condition] ==IF1==
  --&gt; ==IF1M1==
  -left-&gt; ==IF1M2==
else
end if
--&gt; ==IF1M2==
if &quot;&quot; then
  -&gt; [condition] ==IF2==
  --&gt; ==IF2M1==
  -left-&gt; ==IF2M2==
else
end if
--&gt; ==IF2M2==
--&gt; ==LOOP1==
note left: Loop1: For each line in file
--&gt; ==ENDLOOP1==
note left: Loop1: End for each line in file
--&gt; ==LOOP2==
note left: Loop2: For each address in addressbook
--&gt; ==ENDLOOP2==
note left: Loop2: End for each address in addressbook

--&gt; (*)

@enduml</pre>
          </div>

          <div class="figure">
            <p><img alt="test-act4.png" src="test-act4.png" /> </p>
          </div>

          <p>I use rectangular cut and paste if I need to indent generated blocks. </p>
        </div>
      </div>
    </div>

    <div id="outline-container-FocusOnCurrentWork" class="outline-3">
      <h3 id="FocusOnCurrentWork"><a id="sec-18-2" name="sec-18-2"></a><span class="section-number-3">18.2</span> Focus On Current Work</h3>

      <div id="text-FocusOnCurrentWork" class="outline-text-3">
        <p>There is more than one way to do this. Use what works for you. </p>
      </div>

      <div id="outline-container-NarrowToSubtree" class="outline-4">
        <h4 id="NarrowToSubtree"><a id="sec-18-2-1" name="sec-18-2-1"></a><span class="section-number-4">18.2.1</span> Narrowing to a subtree with <code>bh/org-todo</code></h4>

        <div id="text-NarrowToSubtree" class="outline-text-4">
          <p><code>f5</code> and <code>S-f5</code> are bound the functions for narrowing and widening the emacs buffer as defined below. </p>

          <p>We now use: </p>

          <ul class="org-ul">
            <li>T (tasks) for C-c / t on the current buffer </li>

            <li>N (narrow) narrows to this task subtree </li>

            <li>U (up) narrows to the immediate parent task subtree without moving </li>

            <li>P (project) narrows to the parent project subtree without moving </li>

            <li>F (file) narrows to the current file or file of the existing restriction </li>
          </ul>

          <p>The agenda keeps widening the org buffer so this gives a convenient way to focus on what we are doing. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f5&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/org-todo</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/org-todo</span> <span style="color: #7388d6">(</span>arg<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span> <span style="color: #4e9a06">&quot;p&quot;</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>equal arg 4<span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
        <span style="color: #709870">(</span>bh/narrow-to-org-subtree<span style="color: #709870">)</span>
        <span style="color: #709870">(</span>org-show-todo-tree nil<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/narrow-to-org-subtree<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-show-todo-tree nil<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;S-f5&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/widen</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/widen</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode</span><span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">progn</span>
        <span style="color: #709870">(</span>org-agenda-remove-restriction-lock<span style="color: #709870">)</span>
        <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">when</span> org-agenda-sticky
          <span style="color: #907373">(</span>org-agenda-redo<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>org-defkey org-agenda-mode-map <span style="color: #4e9a06">&quot;W&quot;</span> <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">lambda</span> <span style="color: #907373">()</span> <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #907373">)</span> <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/hide-scheduled-and-waiting-next-tasks t<span style="color: #907373">)</span> <span style="color: #907373">(</span>bh/widen<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/restrict-to-file-or-follow</span> <span style="color: #7388d6">(</span>arg<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Set agenda restriction to 'file or with argument invoke follow mode.</span>
<span style="color: #4e9a06">I don't use follow mode very often but I restrict to file all the time</span>
<span style="color: #4e9a06">so change the default 'F' binding in the agenda to allow both&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span> <span style="color: #4e9a06">&quot;p&quot;</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>equal arg 4<span style="color: #909183">)</span>
      <span style="color: #909183">(</span>org-agenda-follow-mode<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>widen<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/set-agenda-restriction-lock 4<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-agenda-redo<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>beginning-of-buffer<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>org-defkey org-agenda-mode-map <span style="color: #4e9a06">&quot;F&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/restrict-to-file-or-follow</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/narrow-to-org-subtree</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span>widen<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>org-narrow-to-subtree<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
    <span style="color: #909183">(</span>org-agenda-set-restriction-lock<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/narrow-to-subtree</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode</span><span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">progn</span>
        <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> <span style="color: #907373">(</span>org-get-at-bol <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-hd-marker</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span>bh/narrow-to-org-subtree<span style="color: #907373">)</span><span style="color: #709870">)</span>
        <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">when</span> org-agenda-sticky
          <span style="color: #907373">(</span>org-agenda-redo<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/narrow-to-org-subtree<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>org-defkey org-agenda-mode-map <span style="color: #4e9a06">&quot;N&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/narrow-to-subtree</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/narrow-up-one-org-level</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span>widen<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
    <span style="color: #909183">(</span>outline-up-heading 1 <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">invisible-ok</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/narrow-to-org-subtree<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/get-pom-from-agenda-restriction-or-point</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #709870">(</span>marker-position org-agenda-restrict-begin<span style="color: #709870">)</span> org-agenda-restrict-begin<span style="color: #909183">)</span>
      <span style="color: #909183">(</span>org-get-at-bol <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-hd-marker</span><span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #709870">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode</span><span style="color: #709870">)</span> <span style="color: #709870">(</span>point<span style="color: #709870">)</span><span style="color: #909183">)</span>
      org-clock-marker<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/narrow-up-one-level</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode</span><span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">progn</span>
        <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> <span style="color: #907373">(</span>bh/get-pom-from-agenda-restriction-or-point<span style="color: #907373">)</span>
          <span style="color: #907373">(</span>bh/narrow-up-one-org-level<span style="color: #907373">)</span><span style="color: #709870">)</span>
        <span style="color: #709870">(</span>org-agenda-redo<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/narrow-up-one-org-level<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>org-defkey org-agenda-mode-map <span style="color: #4e9a06">&quot;U&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/narrow-up-one-level</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/narrow-to-org-project</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span>widen<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
    <span style="color: #909183">(</span>bh/find-project-task<span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/narrow-to-org-subtree<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/narrow-to-project</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode</span><span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">progn</span>
        <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> <span style="color: #907373">(</span>bh/get-pom-from-agenda-restriction-or-point<span style="color: #907373">)</span>
          <span style="color: #907373">(</span>bh/narrow-to-org-project<span style="color: #907373">)</span>
          <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
            <span style="color: #6276ba">(</span>bh/find-project-task<span style="color: #6276ba">)</span>
            <span style="color: #6276ba">(</span>org-agenda-set-restriction-lock<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
        <span style="color: #709870">(</span>org-agenda-redo<span style="color: #709870">)</span>
        <span style="color: #709870">(</span>beginning-of-buffer<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>bh/narrow-to-org-project<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
      <span style="color: #709870">(</span>org-agenda-set-restriction-lock<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>org-defkey org-agenda-mode-map <span style="color: #4e9a06">&quot;P&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/narrow-to-project</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defvar</span> <span style="font-weight: bold; color: #0084c8">bh/project-list</span> nil<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/view-next-project</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span>num-project-left current-project<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">unless</span> <span style="color: #709870">(</span>marker-position org-agenda-restrict-begin<span style="color: #709870">)</span>
      <span style="color: #709870">(</span>goto-char <span style="color: #907373">(</span>point-min<span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">Clear all of the existing markers on the list</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">while</span> bh/project-list
        <span style="color: #907373">(</span>set-marker <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">pop</span> bh/project-list<span style="color: #6276ba">)</span> nil<span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span>re-search-forward <span style="color: #4e9a06">&quot;Tasks to Refile&quot;</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span>forward-visible-line 1<span style="color: #709870">)</span><span style="color: #909183">)</span>

    <span style="color: #204a87">; </span><span style="color: #204a87">Build a new project marker list</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">unless</span> bh/project-list
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #907373">(</span>&lt; <span style="color: #6276ba">(</span>point<span style="color: #6276ba">)</span> <span style="color: #6276ba">(</span>point-max<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>&lt; <span style="color: #80a880">(</span>point<span style="color: #80a880">)</span> <span style="color: #80a880">(</span>point-max<span style="color: #80a880">)</span><span style="color: #858580">)</span>
                    <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #80a880">(</span>not <span style="color: #887070">(</span>org-get-at-bol <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-hd-marker</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
                        <span style="color: #80a880">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> <span style="color: #887070">(</span>org-get-at-bol <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-hd-marker</span><span style="color: #887070">)</span>
                          <span style="color: #887070">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #707183">(</span>not <span style="color: #7388d6">(</span>bh/is-project-p<span style="color: #7388d6">)</span><span style="color: #707183">)</span>
                              <span style="color: #707183">(</span>bh/is-project-subtree-p<span style="color: #707183">)</span><span style="color: #887070">)</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span>forward-visible-line 1<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #6276ba">(</span>&lt; <span style="color: #858580">(</span>point<span style="color: #858580">)</span> <span style="color: #858580">(</span>point-max<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/project-list</span> <span style="color: #858580">(</span>copy-marker <span style="color: #80a880">(</span>org-get-at-bol <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-hd-marker</span><span style="color: #80a880">)</span><span style="color: #858580">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span>forward-visible-line 1<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>

    <span style="color: #204a87">; </span><span style="color: #204a87">Pop off the first marker on the list and display</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> current-project <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">pop</span> bh/project-list<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">when</span> current-project
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> current-project
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/hide-scheduled-and-waiting-next-tasks nil<span style="color: #907373">)</span>
        <span style="color: #907373">(</span>bh/narrow-to-project<span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #204a87">; </span><span style="color: #204a87">Remove the marker</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> current-project nil<span style="color: #709870">)</span>
      <span style="color: #709870">(</span>org-agenda-redo<span style="color: #709870">)</span>
      <span style="color: #709870">(</span>beginning-of-buffer<span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> num-projects-left <span style="color: #907373">(</span>length bh/project-list<span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span>&gt; num-projects-left 0<span style="color: #907373">)</span>
          <span style="color: #907373">(</span>message <span style="color: #4e9a06">&quot;%s projects left to view&quot;</span> num-projects-left<span style="color: #907373">)</span>
        <span style="color: #907373">(</span>beginning-of-buffer<span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/hide-scheduled-and-waiting-next-tasks t<span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #f5666d">error</span> <span style="color: #4e9a06">&quot;All projects viewed.&quot;</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>org-defkey org-agenda-mode-map <span style="color: #4e9a06">&quot;V&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/view-next-project</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
          </div>

          <p>This makes it easy to hide all of the other details in your org-file temporarily by limiting your view to this task subtree. Tasks are folded and hilighted so that only tasks which are incomplete are shown. </p>

          <p>I hit <code>f5</code> (or the <code>T</code> speed key) a lot. This basically does a <code>org-narrow-to-subtree</code> and <code>C-c / t</code> combination leaving the buffer in a narrowed state. I use <code>S-f5</code> (or some other widening speed key like <code>U</code>, <code>W</code>, <code>F</code>) to widen back to the normal view. </p>

          <p>I also have the following setting to force showing the next headline. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-show-entry-below <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>default<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>

          <p>This prevents too many headlines from being folded together when I'm working with collapsed trees. </p>
        </div>
      </div>

      <div id="outline-container-AgendaNarrowToSubtree" class="outline-4">
        <h4 id="AgendaNarrowToSubtree"><a id="sec-18-2-2" name="sec-18-2-2"></a><span class="section-number-4">18.2.2</span> Limiting the agenda to a subtree</h4>

        <div id="text-AgendaNarrowToSubtree" class="outline-text-4">
          <p><code>C-c C-x &lt;</code> turns on the agenda restriction lock for the current subtree. This keeps your agenda focused on only this subtree. Alarms and notifications are still active outside the agenda restriction. <code>C-c C-x &gt;</code> turns off the agenda restriction lock returning your agenda view back to normal. </p>

          <p>I have added key bindings for the agenda to allow using <code>C-c C-x &lt;</code> in the agenda to set the restriction lock to the current task directly. The following elisp accomplishes this. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>org-defkey org-agenda-mode-map <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-c</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-x&lt;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/set-agenda-restriction-lock</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/set-agenda-restriction-lock</span> <span style="color: #7388d6">(</span>arg<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Set restriction lock to current task subtree or file if prefix is specified&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span> <span style="color: #4e9a06">&quot;p&quot;</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let*</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>pom <span style="color: #907373">(</span>bh/get-pom-from-agenda-restriction-or-point<span style="color: #907373">)</span><span style="color: #709870">)</span>
         <span style="color: #709870">(</span>tags <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> pom <span style="color: #6276ba">(</span>org-get-tags-at<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #709870">(</span><span style="color: #907373">(</span>restriction-type <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #858580">(</span>equal arg 4<span style="color: #858580">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">file</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">subtree</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
         <span style="color: #6276ba">(</span><span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #80a880">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode</span><span style="color: #80a880">)</span> pom<span style="color: #858580">)</span>
          <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> pom
            <span style="color: #80a880">(</span>org-agenda-set-restriction-lock restriction-type<span style="color: #80a880">)</span><span style="color: #858580">)</span>
          <span style="color: #858580">(</span>org-agenda-redo<span style="color: #858580">)</span><span style="color: #6276ba">)</span>
         <span style="color: #6276ba">(</span><span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #80a880">(</span>equal major-mode <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode</span><span style="color: #80a880">)</span> <span style="color: #80a880">(</span>org-before-first-heading-p<span style="color: #80a880">)</span><span style="color: #858580">)</span>
          <span style="color: #858580">(</span>org-agenda-set-restriction-lock <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">file</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
         <span style="color: #6276ba">(</span>pom
          <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> pom
            <span style="color: #80a880">(</span>org-agenda-set-restriction-lock restriction-type<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>

          <p>This allows me to set the restriction lock from agenda to task directly. I work from the agenda a lot and I find this very convenient. </p>

          <p>Setting the restriction directly to the task is less surprising than automatically moving up the tree to the project level task – which is what I was doing before. If the select task is too restrictive it's easy to move the restriction lock up a level by visiting the task in the org file and going up and resetting the lock - in case you want to see move of the project. </p>

          <p>Selecting the entire project sometimes has too many tasks in it and I want to limit the view to part of the subtree. This is why I keep the <code>N</code> and <code>U</code> key bindings for adjusting the narrowed region. </p>

          <p>I've added new convenience keys for restricting the agenda and org-buffer to subtree, parent task, and project task, as well as removing the restriction. These keys work both in the agenda and as speed commands on a headline in the org-file. </p>

          <ul class="org-ul">
            <li><code>N</code> narrows to the current task subtree 

              <p>This is the same as same as <code>C-c C-x &lt;</code> </p>
            </li>

            <li><code>U</code> narrows to the parent subtree of this task 

              <p>This goes up one level and narrows to that subtree. </p>
            </li>

            <li><code>P</code> narrows to the entire project containing this task 

              <p>This goes up the tree to the top-level <code>TODO</code> keyword and selects that as the subtree to narrow to </p>
            </li>

            <li><code>W</code> removes the restriction, widening the buffer </li>
          </ul>

          <p>I like the highlighting for a restriction to only affect the headline and not the entire body of the agenda restriction. I use the following setting to keep the highlight on the heading only (as was the case for pre-8.0 versions of org-mode) </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Limit restriction lock highlighting to the headline only</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-restriction-lock-highlight-subtree nil<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-AgendaNarrowToFile" class="outline-4">
        <h4 id="AgendaNarrowToFile"><a id="sec-18-2-3" name="sec-18-2-3"></a><span class="section-number-4">18.2.3</span> Limiting the agenda to a file</h4>

        <div id="text-AgendaNarrowToFile" class="outline-text-4">
          <p>You can limit the agenda view to a single file in multiple ways. </p>

          <p>You can use the agenda restriction lock <code>C-c C-x &lt;</code> on the any line before the first heading to set the agenda restriction lock to this file only. This is equivalent using a prefix argumment (<code>C-u C-c C-x &lt;</code>) anywhere in the file. This lock stays in effect until you remove it with <code>C-c C-x &gt;</code>. </p>

          <p>This also works in the agenda with my <code>C-u C-c c-x &lt;</code> key binding. </p>

          <p>Another way is to invoke the agenda with <code>F12 &lt; a</code> while visiting an org-mode file. This limits the agenda view to just this file. I occasionally use this to view a file not in my <code>org-agenda-files</code> in the agenda. </p>
        </div>
      </div>
    </div>

    <div id="outline-container-TuningAgendaViews" class="outline-3">
      <h3 id="TuningAgendaViews"><a id="sec-18-3" name="sec-18-3"></a><span class="section-number-3">18.3</span> Tuning the Agenda Views</h3>

      <div id="text-TuningAgendaViews" class="outline-text-3">
        <p>Various customizations affect how the agenda views show task details. This section shows each of the customizations I use in my workflow. </p>
      </div>

      <div id="outline-container-HighlightCurrentAgendaLine" class="outline-4">
        <h4 id="HighlightCurrentAgendaLine"><a id="sec-18-3-1" name="sec-18-3-1"></a><span class="section-number-4">18.3.1</span> Highlight the current agenda line</h4>

        <div id="text-HighlightCurrentAgendaLine" class="outline-text-4">
          <p>The following code in my <code>.emacs</code> file keeps the current agenda line highlighted. This makes it obvious what task will be affected by commands issued in the agenda. No more acting on the wrong task by mistake! </p>

          <p>The clock modeline time is also shown with a reverse background. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Always hilight the current agenda line</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span>hl-line-mode 1<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">The following custom-set-faces create the highlights</span>
<span style="color: #707183">(</span>custom-set-faces
  <span style="color: #204a87">;; </span><span style="color: #204a87">custom-set-faces was added by Custom.</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">If you edit it by hand, you could mess it up, so be careful.</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">Your init file should contain only one such instance.</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">If there is more than one, they won't work right.</span>
 <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>org-mode-line-clock <span style="color: #909183">(</span><span style="color: #709870">(</span>t <span style="color: #907373">(</span><span style="color: #a020f0">:background</span> <span style="color: #4e9a06">&quot;grey75&quot;</span> <span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;red&quot;</span> <span style="color: #a020f0">:box</span> <span style="color: #6276ba">(</span><span style="color: #a020f0">:line-width</span> -1 <span style="color: #a020f0">:style</span> released-button<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span> t<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-GlobalTodoListsShowAllTasks" class="outline-4">
        <h4 id="GlobalTodoListsShowAllTasks"><a id="sec-18-3-2" name="sec-18-3-2"></a><span class="section-number-4">18.3.2</span> Keep tasks with timestamps visible on the global todo lists</h4>

        <div id="text-GlobalTodoListsShowAllTasks" class="outline-text-4">
          <p>Tasks with dates (<code>SCHEDULED:</code>, <code>DEADLINE:</code>, or active dates) show up in the agenda when appropriate. The block agenda view (<code>F12 a</code>) tries to keep tasks showing up only in one location (either in the calendar or other todo lists in later sections of the block agenda.) I now rarely use the global todo list search in org-mode (<code>F12 t</code>, <code>F12 m</code>) and when I do I'm trying to find a specific task quickly. These lists now include <span class="underline">everything</span> so I can just search for the item I want and move on. </p>

          <p>The block agenda prevents display of tasks with deadlines or scheduled dates in the future so you can safely ignore these until the appropriate time. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Keep tasks with dates on the global todo lists</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-todo-ignore-with-date nil<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Keep tasks with deadlines on the global todo lists</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-todo-ignore-deadlines nil<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Keep tasks with scheduled dates on the global todo lists</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-todo-ignore-scheduled nil<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Keep tasks with timestamps on the global todo lists</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-todo-ignore-timestamp nil<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Remove completed deadline tasks from the agenda view</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-skip-deadline-if-done t<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Remove completed scheduled tasks from the agenda view</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-skip-scheduled-if-done t<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Remove completed items from search results</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-skip-timestamp-if-done t<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-DiaryForAppointments" class="outline-4">
        <h4 id="DiaryForAppointments"><a id="sec-18-3-3" name="sec-18-3-3"></a><span class="section-number-4">18.3.3</span> Use the Diary for Holidays and Appointments</h4>

        <div id="text-DiaryForAppointments" class="outline-text-4">
          <p>I don't use the emacs Diary for anything but I like seeing the holidays on my agenda. This helps with planning for those days when you're not supposed to be working. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-include-diary nil<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-diary-file <span style="color: #4e9a06">&quot;~/git/org/diary.org&quot;</span><span style="color: #707183">)</span></pre>
          </div>

          <p>The diary file keeps <code>date-tree</code> entries created by the capture mode 'appointment' template. I use this also for miscellaneous tasks I want to clock during interruptions. </p>

          <p>I don't use a <code>~/diary</code> file anymore. That is just there as a zero-length file to keep Emacs happy. I use org-mode's diary functions instead. Inserting entries with <code>i</code> in the emacs agenda creates date entries in the <code>~/git/org/diary.org</code> file. </p>

          <p>I include holidays from the calendar in my <code>todo.org</code> file as follows: </p>

          <div class="org-src-container">
            <pre class="src src-org"><span style="color: #204a87">#+FILETAGS: PERSONAL</span>
<span style="font-weight: bold; color: #00578e">* Appointments</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:CATEGORY:</span> Appt
  <span style="font-weight: bold; color: #a52a2a">:ARCHIVE:</span>  %s_archive::* Appointments
<span style="font-weight: bold; color: #a52a2a">  :END:</span>      
<span style="font-weight: bold; color: #0084c8">** Holidays</span>
<span style="font-weight: bold; color: #a52a2a">   :PROPERTIES:</span>
   <span style="font-weight: bold; color: #a52a2a">:Category:</span> Holiday
<span style="font-weight: bold; color: #a52a2a">   :END:</span>
   %%(org-calendar-holiday)
<span style="font-weight: bold; color: #0084c8">** Some other Appointment</span>
   ...</pre>
          </div>

          <p>I use the following setting so any time strings in the heading are shown in the agenda. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-insert-diary-extract-time t<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-SearchesIncludeArchiveFiles" class="outline-4">
        <h4 id="SearchesIncludeArchiveFiles"><a id="sec-18-3-4" name="sec-18-3-4"></a><span class="section-number-4">18.3.4</span> Searches include archive files</h4>

        <div id="text-SearchesIncludeArchiveFiles" class="outline-text-4">
          <p>I keep a single archive file for each of my org-mode project files. This allows me to search the current file and the archive when I need to dig up old information from the archives. </p>

          <p>I don't need this often but it sure is handy on the occasions that I do need it. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Include agenda archive files when searching for things</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-text-search-extra-files <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span>agenda-archives<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-AgendaViewTweaks" class="outline-4">
        <h4 id="AgendaViewTweaks"><a id="sec-18-3-5" name="sec-18-3-5"></a><span class="section-number-4">18.3.5</span> Agenda view tweaks</h4>

        <div id="text-AgendaViewTweaks" class="outline-text-4">
          <p>The following agenda customizations control </p>

          <ul class="org-ul">
            <li>display of repeating tasks </li>

            <li>display of empty dates on the agenda </li>

            <li>task sort order </li>

            <li>start the agenda weekly view with Sunday </li>

            <li>display of the grid </li>

            <li>habits at the bottom </li>
          </ul>

          <p>I use a custom sorting function so that my daily agenda lists tasks in order of importance. Tasks on the daily agenda are listed in the following order: </p>

          <ol class="org-ol">
            <li>tasks with times at the top so they are hard to miss </li>

            <li>entries for today (active timestamp headlines that are not scheduled or deadline tasks) </li>

            <li>deadlines due today </li>

            <li>late deadline tasks </li>

            <li>scheduled items for today </li>

            <li>pending deadlines (due soon) </li>

            <li>late scheduled items </li>

            <li>habits </li>
          </ol>

          <p>The lisp for this isn't particularly pretty but it works. </p>

          <p>Here are the <code>.emacs</code> settings: </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Show all future entries for repeating tasks</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-repeating-timestamp-show-all t<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Show all agenda dates - even if they are empty</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-show-all-dates t<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Sorting order for tasks on the agenda</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-sorting-strategy
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>agenda habit-down time-up user-defined-up effort-up category-keep<span style="color: #709870">)</span>
              <span style="color: #709870">(</span>todo category-up effort-up<span style="color: #709870">)</span>
              <span style="color: #709870">(</span>tags category-up effort-up<span style="color: #709870">)</span>
              <span style="color: #709870">(</span>search category-up<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Start the weekly agenda on Monday</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-start-on-weekday 1<span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Enable display of the time grid so we can see the marker for the current time</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-time-grid <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>daily today remove-match<span style="color: #709870">)</span>
                                   #<span style="color: #709870">(</span><span style="color: #4e9a06">&quot;----------------&quot;</span> 0 16 <span style="color: #907373">(</span>org-heading t<span style="color: #907373">)</span><span style="color: #709870">)</span>
                                   <span style="color: #709870">(</span>0900 1100 1300 1500 1700<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Display tags farther right</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-tags-column -102<span style="color: #707183">)</span>

<span style="color: #204a87">;;</span>
<span style="color: #204a87">;; </span><span style="color: #204a87">Agenda sorting functions</span>
<span style="color: #204a87">;;</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-cmp-user-defined <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/agenda-sort</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/agenda-sort</span> <span style="color: #7388d6">(</span>a b<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Sorting strategy for agenda items.</span>
<span style="color: #4e9a06">Late deadlines first, then scheduled, then non-late deadlines&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span>result num-a num-b<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
     <span style="color: #204a87">; </span><span style="color: #204a87">time specific items are already sorted first by org-agenda-sorting-strategy</span>

     <span style="color: #204a87">; </span><span style="color: #204a87">non-deadline and non-scheduled items next</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span>bh/agenda-sort-test <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/is-not-scheduled-or-deadline</span> a b<span style="color: #907373">)</span><span style="color: #709870">)</span>

     <span style="color: #204a87">; </span><span style="color: #204a87">deadlines for today next</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span>bh/agenda-sort-test <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/is-due-deadline</span> a b<span style="color: #907373">)</span><span style="color: #709870">)</span>

     <span style="color: #204a87">; </span><span style="color: #204a87">late deadlines next</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span>bh/agenda-sort-test-num <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/is-late-deadline</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">&gt;</span> a b<span style="color: #907373">)</span><span style="color: #709870">)</span>

     <span style="color: #204a87">; </span><span style="color: #204a87">scheduled items for today next</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span>bh/agenda-sort-test <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/is-scheduled-today</span> a b<span style="color: #907373">)</span><span style="color: #709870">)</span>

     <span style="color: #204a87">; </span><span style="color: #204a87">late scheduled items next</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span>bh/agenda-sort-test-num <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/is-scheduled-late</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">&gt;</span> a b<span style="color: #907373">)</span><span style="color: #709870">)</span>

     <span style="color: #204a87">; </span><span style="color: #204a87">pending deadlines last</span>
     <span style="color: #709870">(</span><span style="color: #907373">(</span>bh/agenda-sort-test-num <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/is-pending-deadline</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">&lt;</span> a b<span style="color: #907373">)</span><span style="color: #709870">)</span>

     <span style="color: #204a87">; </span><span style="color: #204a87">finally default to unsorted</span>
     <span style="color: #709870">(</span>t <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> result nil<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    result<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defmacro</span> <span style="font-weight: bold; color: #00578e">bh/agenda-sort-test</span> <span style="color: #7388d6">(</span>fn a b<span style="color: #7388d6">)</span>
  <span style="color: #4e9a06">&quot;Test for agenda sort&quot;</span>
  <span style="font-weight: bold; color: #a52a2a">`</span><span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
    <span style="color: #204a87">; </span><span style="color: #204a87">if both match leave them unsorted</span>
    <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #907373">(</span>apply ,fn <span style="color: #6276ba">(</span>list ,a<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
          <span style="color: #907373">(</span>apply ,fn <span style="color: #6276ba">(</span>list ,b<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
     <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> result nil<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #204a87">; </span><span style="color: #204a87">if a matches put a first</span>
    <span style="color: #909183">(</span><span style="color: #709870">(</span>apply ,fn <span style="color: #907373">(</span>list ,a<span style="color: #907373">)</span><span style="color: #709870">)</span>
     <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> result -1<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #204a87">; </span><span style="color: #204a87">otherwise if b matches put b first</span>
    <span style="color: #909183">(</span><span style="color: #709870">(</span>apply ,fn <span style="color: #907373">(</span>list ,b<span style="color: #907373">)</span><span style="color: #709870">)</span>
     <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> result 1<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #204a87">; </span><span style="color: #204a87">if none match leave them unsorted</span>
    <span style="color: #909183">(</span>t nil<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defmacro</span> <span style="font-weight: bold; color: #00578e">bh/agenda-sort-test-num</span> <span style="color: #7388d6">(</span>fn compfn a b<span style="color: #7388d6">)</span>
  <span style="font-weight: bold; color: #a52a2a">`</span><span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">cond</span>
    <span style="color: #909183">(</span><span style="color: #709870">(</span>apply ,fn <span style="color: #907373">(</span>list ,a<span style="color: #907373">)</span><span style="color: #709870">)</span>
     <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> num-a <span style="color: #907373">(</span>string-to-number <span style="color: #6276ba">(</span>match-string 1 ,a<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
     <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #907373">(</span>apply ,fn <span style="color: #6276ba">(</span>list ,b<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
         <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">progn</span>
           <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> num-b <span style="color: #858580">(</span>string-to-number <span style="color: #80a880">(</span>match-string 1 ,b<span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span>
           <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> result <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #80a880">(</span>apply ,compfn <span style="color: #887070">(</span>list num-a num-b<span style="color: #887070">)</span><span style="color: #80a880">)</span>
                            -1
                          1<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
       <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> result -1<span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="color: #709870">(</span>apply ,fn <span style="color: #907373">(</span>list ,b<span style="color: #907373">)</span><span style="color: #709870">)</span>
     <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> result 1<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>t nil<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-not-scheduled-or-deadline</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #909183">(</span>not <span style="color: #709870">(</span>bh/is-deadline date-str<span style="color: #709870">)</span><span style="color: #909183">)</span>
       <span style="color: #909183">(</span>not <span style="color: #709870">(</span>bh/is-scheduled date-str<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-due-deadline</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>string-match <span style="color: #4e9a06">&quot;Deadline:&quot;</span> date-str<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-late-deadline</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>string-match <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">(</span><span style="color: #4e9a06">[0-9]*</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">)</span><span style="color: #4e9a06"> d</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">.</span><span style="color: #4e9a06"> ago:&quot;</span> date-str<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-pending-deadline</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>string-match <span style="color: #4e9a06">&quot;In </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">(</span><span style="color: #4e9a06">[</span><span style="color: #4e9a06">^</span><span style="color: #4e9a06">-]*</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">)</span><span style="color: #4e9a06">d</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">.</span><span style="color: #4e9a06">:&quot;</span> date-str<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-deadline</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #909183">(</span>bh/is-due-deadline date-str<span style="color: #909183">)</span>
      <span style="color: #909183">(</span>bh/is-late-deadline date-str<span style="color: #909183">)</span>
      <span style="color: #909183">(</span>bh/is-pending-deadline date-str<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-scheduled</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #909183">(</span>bh/is-scheduled-today date-str<span style="color: #909183">)</span>
      <span style="color: #909183">(</span>bh/is-scheduled-late date-str<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-scheduled-today</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>string-match <span style="color: #4e9a06">&quot;Scheduled:&quot;</span> date-str<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/is-scheduled-late</span> <span style="color: #7388d6">(</span>date-str<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>string-match <span style="color: #4e9a06">&quot;Sched</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">.</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">(</span><span style="color: #4e9a06">.*</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">)</span><span style="color: #4e9a06">x:&quot;</span> date-str<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-StickyAgendas" class="outline-4">
        <h4 id="StickyAgendas"><a id="sec-18-3-6" name="sec-18-3-6"></a><span class="section-number-4">18.3.6</span> Sticky Agendas</h4>

        <div id="text-StickyAgendas" class="outline-text-4">
          

          <p>Sticky agendas allow you to have more than one agenda view created simultaneously. You can quickly switch to the view without incurring an agenda rebuild by invoking the agenda custom command key that normally generates the agenda. If it already exists it will display the existing view. <code>g</code> forces regeneration of the agenda view. </p>

          <p>I normally have two views displayed (<code>F12 a</code> for the daily/weekly agenda and <code>F12 SPC</code> for my project management view) </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Use sticky agenda's so they persist</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-sticky t<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-ChecklistHandling" class="outline-3">
      <h3 id="ChecklistHandling"><a id="sec-18-4" name="sec-18-4"></a><span class="section-number-3">18.4</span> Checklist handling</h3>

      <div id="text-ChecklistHandling" class="outline-text-3">
        <p>Checklists are great for repeated tasks with lots of things that need to be done. For a long time I was manually resetting the check boxes to unchecked when marking the repeated task <code>DONE</code> but no more! There's a contributed <code>org-checklist</code> that can uncheck the boxes automagically when the task is marked done. </p>

        <p>Add the following to your <code>.emacs</code> </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">load-path</span> <span style="color: #7388d6">(</span>expand-file-name <span style="color: #4e9a06">&quot;~/git/org-mode/contrib/lisp&quot;</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-checklist</span><span style="color: #707183">)</span></pre>
        </div>

        <p>and then to use it in a task you simply set the property <code>RESET_CHECK_BOXES</code> to <code>t</code> like this </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> Invoicing and Archive Tasks </span><span style="font-weight: bold; color: #ff0000">[0/7]</span>
  <span style="font-weight: bold; color: #a52a2a">DEADLINE:</span> <span style="text-decoration: underline; color: #a020f0">&lt;2009-07-01 Wed +1m -0d&gt;</span> 
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:RESET_CHECK_BOXES:</span> t
<span style="font-weight: bold; color: #a52a2a">  :END:</span>

  - <span style="font-weight: bold">[ ]</span> Do task 1
  - <span style="font-weight: bold">[ ]</span> Do task 2
  ...
  - <span style="font-weight: bold">[ ]</span> Do task 7</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-Backups" class="outline-3">
      <h3 id="Backups"><a id="sec-18-5" name="sec-18-5"></a><span class="section-number-3">18.5</span> Backups</h3>

      <div id="text-Backups" class="outline-text-3">
        <p><code>Backups that you have to work hard at don't get done</code>. </p>

        <p>I lost a bunch of data over 10 years ago due to not having a working backup solution. At the time I said <code>I'm not going to lose any important data ever again</code>. So far so good :) </p>

        <p>My backups get done religiously. What does this have to do with org-mode? Not much really, other than I don't spend time doing backups – they just happen – which saves me time for other more interesting things. </p>

        <p>My backup philosophy is to make it possible to recover your data – not necessarily easy. It doesn't have to be easy/fast to do the recovery because I'll rarely have to recover data from the backups. Saving time for recovery doesn't make sense to me. I want the backup to be fast and painless since I do those all the time. </p>

        <p>I set up an automated network backup over 10 years ago that is still serving me well today. All of my systems gets daily backups to a network drive. These are collected monthly and written to an external removable USB disk. </p>

        <p>Once a month my task for backups prompts me to move the current collection of montly backups to the USB drive for external storage. Backups take minimal effort currently and I'm really happy about that. </p>

        <p>Since then <code>git</code> came into my life, so backups of <code>git</code> repositories that are on multiple machines is much less critical than it used to be. There is an automatic backup of everything pushed to the remote repository. </p>
      </div>
    </div>

    <div id="outline-container-HandlingBlockedTasks" class="outline-3">
      <h3 id="HandlingBlockedTasks"><a id="sec-18-6" name="sec-18-6"></a><span class="section-number-3">18.6</span> Handling blocked tasks</h3>

      <div id="text-HandlingBlockedTasks" class="outline-text-3">
        <p>Blocked tasks are tasks that have subtasks which are not in a done todo state. Blocked tasks show up in a grayed font by default in the agenda. </p>

        <p>To enable task blocking set the following variable: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-enforce-todo-dependencies t<span style="color: #707183">)</span></pre>
        </div>

        <p>This setting prevents tasks from changing to <code>DONE</code> if any subtasks are still open. This works pretty well except for repeating tasks. I find I'm regularly adding <code>TODO</code> tasks under repeating tasks and not all of the subtasks need to be complete before the next repeat cycle. </p>

        <p>You can override the setting temporarily by changing the task with <code>C-u C-u C-u C-c C-t</code> but I never remember that. I set a permanent property on the repeated tasks as follows: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> New Repeating Task</span>
  <span style="font-weight: bold; color: #a52a2a">SCHEDULED:</span> <span style="text-decoration: underline; color: #a020f0">&lt;2009-06-16 Tue +1w&gt;</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:NOBLOCKING:</span> t
<span style="font-weight: bold; color: #a52a2a">  :END:</span>
  ...
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> Subtask</span></pre>
        </div>

        <p>This prevents the <code>New Repeating Task</code> from being blocked if some of the items under it are not complete. </p>

        <p>Occassionally I need to complete tasks in a given order. Org-mode has a property <code>ORDERED</code> that enforces this for subtasks. </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> Some Task</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:ORDERED:</span> t
<span style="font-weight: bold; color: #a52a2a">  :END:</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> Step 1</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> Step 2</span>
<span style="font-weight: bold; color: #0084c8">** </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #0084c8"> Step 3</span></pre>
        </div>

        <p>In this case you need to complete <code>Step 1</code> before you can complete <code>Step 2</code>, etc. and org-mode prevents the state change to a done task until the preceding tasks are complete. </p>
      </div>
    </div>

    <div id="outline-container-OrgTaskStructureAndPresentation" class="outline-3">
      <h3 id="OrgTaskStructureAndPresentation"><a id="sec-18-7" name="sec-18-7"></a><span class="section-number-3">18.7</span> Org Task structure and presentation</h3>

      <div id="text-OrgTaskStructureAndPresentation" class="outline-text-3">
        <p>This section describes various org-mode settings I use to control how tasks are displayed while I work on my org mode files. </p>
      </div>

      <div id="outline-container-DisplayLeadingStars" class="outline-4">
        <h4 id="DisplayLeadingStars"><a id="sec-18-7-1" name="sec-18-7-1"></a><span class="section-number-4">18.7.1</span> Controlling display of leading stars on headlines</h4>

        <div id="text-DisplayLeadingStars" class="outline-text-4">
          <p>Org-mode has the ability to show or hide the leading stars on task headlines. It's also possible to have headlines at odd levels only so that the stars and heading task names line up in sublevels. </p>

          <p>To make org show leading stars use </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-hide-leading-stars nil<span style="color: #707183">)</span></pre>
          </div>

          <p>I now use org-indent mode which hides leading stars. </p>
        </div>
      </div>

      <div id="outline-container-OrgIndentMode" class="outline-4">
        <h4 id="OrgIndentMode"><a id="sec-18-7-2" name="sec-18-7-2"></a><span class="section-number-4">18.7.2</span> org-indent mode</h4>

        <div id="text-OrgIndentMode" class="outline-text-4">
          <p>I recently started using org-indent mode. I like this setting a lot. It removes the indentation in the org-file but displays it as if it was indented while you are working on the org file buffer. </p>

          <p>org-indent mode displays as if org-odd-levels-only is true but it has a really clean look that I prefer over my old setup. </p>

          <p>I have org-indent mode on by default at startup with the following setting: </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-startup-indented t<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-HandlingBlankLines" class="outline-4">
        <h4 id="HandlingBlankLines"><a id="sec-18-7-3" name="sec-18-7-3"></a><span class="section-number-4">18.7.3</span> Handling blank lines</h4>

        <div id="text-HandlingBlankLines" class="outline-text-4">
          <p>Blank lines are evil :). They keep getting inserted in between headlines and I don't want to see them in collapsed (contents) views. When I use <code>TAB</code> to fold (cycle) tasks I don't want to see any blank lines between headings. </p>

          <p>The following setting hides blank lines between headings which keeps folded view nice and compact. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-cycle-separator-lines 0<span style="color: #707183">)</span></pre>
          </div>

          <p>I find extra blank lines in lists and headings a bit of a nuisance. To get a body after a list you need to include a blank line between the list entry and the body – and indent the body appropriately. Most of my lists have no body detail so I like the look of collapsed lists with no blank lines better. </p>

          <p>The following setting prevents creating blank lines before headings but allows list items to adapt to existing blank lines around the items: </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-blank-before-new-entry <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>heading<span style="color: #709870">)</span>
                                         <span style="color: #709870">(</span>plain-list-item . auto<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-AddingNewTasks" class="outline-4">
        <h4 id="AddingNewTasks"><a id="sec-18-7-4" name="sec-18-7-4"></a><span class="section-number-4">18.7.4</span> Adding new tasks quickly without disturbing the current task content</h4>

        <div id="text-AddingNewTasks" class="outline-text-4">
          <p>To create new headings in a project file it is really convenient to use <code>C-RET</code>, <code>C-S-RET</code>, <code>M-RET</code>, and <code>M-S-RET</code>. This inserts a new headline possibly with a <code>TODO</code> keyword. With the following setting </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-insert-heading-respect-content nil<span style="color: #707183">)</span></pre>
          </div>

          <p>org inserts the heading at point for the <code>M-</code> versions and respects content for the <code>C-</code> versions. The respect content setting is temporarily turned on for the <code>C-</code> versions which adds the new heading after the content of the current item. This lets you hit <code>C-S-RET</code> in the middle of an entry and the new heading is added after the body of the current entry but still allow you to split an entry in the middle with <code>M-S-RET</code>. </p>
        </div>
      </div>

      <div id="outline-container-NotesAtTop" class="outline-4">
        <h4 id="NotesAtTop"><a id="sec-18-7-5" name="sec-18-7-5"></a><span class="section-number-4">18.7.5</span> Notes at the top</h4>

        <div id="text-NotesAtTop" class="outline-text-4">
          <p>I enter notes for tasks with <code>C-c C-z</code> (or just <code>z</code> in the agenda). Changing tasks states also sometimes prompt for a note (e.g. moving to <code>WAITING</code> prompts for a note and I enter a reason for why it is waiting). These notes are saved at the top of the task so unfolding the task shows the note first. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-reverse-note-order nil<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>

      <div id="outline-container-SearchingResults" class="outline-4">
        <h4 id="SearchingResults"><a id="sec-18-7-6" name="sec-18-7-6"></a><span class="section-number-4">18.7.6</span> Searching and showing results</h4>

        <div id="text-SearchingResults" class="outline-text-4">
          <p>Org-mode's searching capabilities are really effective at finding data in your org files. <code>C-c / /</code> does a regular expression search on the current file and shows matching results in a collapsed view of the org-file. </p>

          <p>I have org-mode show the hierarchy of tasks above the matched entries and also the immediately following sibling task (but not all siblings) with the following settings: </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-show-following-heading t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-show-hierarchy-above t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-show-siblings <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>default<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
          </div>

          <p>This keeps the results of the search relatively compact and mitigates accidental errors by cutting too much data from your org file with <code>C-k</code>. Cutting folded data (including the …) can be really dangerous since it cuts text (including following subtrees) which you can't see. For this reason I always show the following headline when displaying search results. </p>
        </div>
      </div>

      <div id="outline-container-SpecialKeyHandling" class="outline-4">
        <h4 id="SpecialKeyHandling"><a id="sec-18-7-7" name="sec-18-7-7"></a><span class="section-number-4">18.7.7</span> Editing and Special key handling</h4>

        <div id="text-SpecialKeyHandling" class="outline-text-4">
          <p>Org-mode allows special handling of the C-a, C-e, and C-k keys while editing headlines. I also use the setting that pastes (yanks) subtrees and adjusts the levels to match the task I am pasting to. See the docstring (<code>C-h v org-yank-adjust-subtrees</code>) for more details on each variable and what it does. </p>

          <p>I have <code>org-special-ctrl-a/e</code> set to enable easy access to the beginning and end of headlines. I use <code>M-m</code> or <code>C-a C-a</code> to get to the beginning of the line so the speed commands work and <code>C-a</code> to give easy access to the beginning of the heading text when I need that. </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-special-ctrl-a/e t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-special-ctrl-k t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-yank-adjusted-subtrees t<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-Attachments" class="outline-3">
      <h3 id="Attachments"><a id="sec-18-8" name="sec-18-8"></a><span class="section-number-3">18.8</span> Attachments</h3>

      <div id="text-Attachments" class="outline-text-3">
        <p>Attachments are great for getting large amounts of data related to your project out of your org-mode files. Before attachments came along I was including huge blocks of SQL code in my org files to keep track of changes I made to project databases. This bloated my org file sizes badly. </p>

        <p>Now I can create the data in a separate file and attach it to my project task so it's easily located again in the future. </p>

        <p>I set up org-mode to generate unique attachment IDs with <code>org-id-method</code> as follows: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-id-method <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> uuidgen<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>Say you want to attach a file <code>x.sql</code> to your current task. Create the file data in <code>/tmp/x.sql</code> and save it. </p>

        <p>Attach the file with <code>C-c C-a a</code> and enter the filename: <code>x.sql</code>. This generates a unique ID for the task and adds the file in the attachment directory. </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* Attachments                                                        </span><span style="font-weight: bold; color: #00578e">:ATTACH:</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:Attachments:</span> x.sql
  <span style="font-weight: bold; color: #a52a2a">:ID:</span>       f1d38e9a-ff70-4cc4-ab50-e8b58b2aaa7b
<span style="font-weight: bold; color: #a52a2a">  :END:</span></pre>
        </div>

        <p>The attached file is saved in <code>data/f1/d38e9a-ff70-4cc4-ab50-e8b58b2aaa7b/</code>. Where it goes exactly isn't important for me – as long as it is saved and retrievable easily. Org-mode copies the original file <code>/tmp/x.sql</code> into the appropriate attachment directory. </p>

        <p>Tasks with attachments automatically get an <code>ATTACH</code> tag so you can easily find tasks with attachments with a tag search. </p>

        <p>To open the attachment for a task use <code>C-c C-a o</code>. This prompts for the attachment to open and <code>TAB</code> completion works here. </p>

        <p>The <code>ID</code> changes for every task header when a new <code>ID</code> is generated. </p>

        <p>It's possible to use named directories for attachments but I haven't needed this functionality yet – it's there if you need it. </p>

        <p>I store my org-mode attachments with my org files in a subdirectory <code>data</code>. These are automatically added to my <code>git</code> repository along with any other org-mode changes I've made. </p>
      </div>
    </div>

    <div id="outline-container-DeadlinesAndAgendaVisibility" class="outline-3">
      <h3 id="DeadlinesAndAgendaVisibility"><a id="sec-18-9" name="sec-18-9"></a><span class="section-number-3">18.9</span> Deadlines and Agenda Visibility</h3>

      <div id="text-DeadlinesAndAgendaVisibility" class="outline-text-3">
        <p>Deadlines and due dates are a fact or life. By default I want to see deadlines in the agenda 30 days before the due date. </p>

        <p>The following setting accomplishes this: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-deadline-warning-days 30<span style="color: #707183">)</span></pre>
        </div>

        <p>This gives me plenty of time to deal with the task so that it is completed on or before the due date. </p>

        <p>I also use deadlines for repeating tasks. If the task repeats more often than once per month it would be always bugging me on the agenda view. For these types of tasks I set an explicit deadline warning date as follows: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> Pay Wages</span>
  <span style="font-weight: bold; color: #a52a2a">DEADLINE:</span> <span style="text-decoration: underline; color: #a020f0">&lt;2009-07-01 Wed +1m -0d&gt;</span></pre>
        </div>

        <p>This example repeats monthly and shows up in the agenda on the day it is due (with no prior warning). You can set any number of lead days you want on DEADLINES using -Nd where N is the number of days in advance the task should show up in the agenda. If no value is specified the default <code>org-deadline-warning-days</code> is used. </p>
      </div>
    </div>

    <div id="outline-container-TableExportToCSV" class="outline-3">
      <h3 id="TableExportToCSV"><a id="sec-18-10" name="sec-18-10"></a><span class="section-number-3">18.10</span> Exporting Tables to CSV</h3>

      <div id="text-TableExportToCSV" class="outline-text-3">
        <p>I generate org-mode tables with details of task specifications and record structures for some of my projects. My clients like to use spreadsheets for this type of detail. </p>

        <p>It's easy to share the details of the org-mode table by exporting in HTML but that isn't easy for anyone else to work with if they need to edit data. </p>

        <p>To solve this problem I export my table as comma delimited values (CSV) and then send that to the client (or read it into a spreadsheet and email the resulting spreadsheet file). </p>

        <p>Org-mode can export tables as TAB or comma delimited formats. I set the default format to CSV with: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-table-export-default-format <span style="color: #4e9a06">&quot;orgtbl-to-csv&quot;</span><span style="color: #707183">)</span></pre>
        </div>

        <p>Exporting to CSV format is the only one I use and this provides the default so I can just hit RETURN when prompted for the format. </p>

        <p>To export the following table I put the cursor inside the table and hit <code>M-x org-table-export</code> which prompts for a filename and the format which defaults to orgtbl-to-csv from the setting above. </p>

        <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="right" /><col class="right" /><col class="right" /></colgroup><thead>
            <tr>
              <th class="right" scope="col">One</th>

              <th class="right" scope="col">Two</th>

              <th class="right" scope="col">Three</th>
            </tr>
          </thead><tbody>
            <tr>
              <td class="right">1</td>

              <td class="right">1</td>

              <td class="right">2</td>
            </tr>

            <tr>
              <td class="right">3</td>

              <td class="right">6</td>

              <td class="right">5</td>
            </tr>

            <tr>
              <td class="right">fred</td>

              <td class="right">kpe</td>

              <td class="right">mary</td>
            </tr>

            <tr>
              <td class="right">234.5</td>

              <td class="right">432.12</td>

              <td class="right">324.3</td>
            </tr>
          </tbody></table>

        <p>This creates the file with the following data </p>

        <div class="org-src-container">
          <pre class="src src-csv">One<span style="color: #a52a2a">,</span>Two<span style="color: #a52a2a">,</span>Three
1<span style="color: #a52a2a">,</span>1<span style="color: #a52a2a">,</span>2
3<span style="color: #a52a2a">,</span>6<span style="color: #a52a2a">,</span>5
fred<span style="color: #a52a2a">,</span>kpe<span style="color: #a52a2a">,</span>mary
234.5<span style="color: #a52a2a">,</span>432.12<span style="color: #a52a2a">,</span>324.3</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-MinimizeFrames" class="outline-3">
      <h3 id="MinimizeFrames"><a id="sec-18-11" name="sec-18-11"></a><span class="section-number-3">18.11</span> Minimize Emacs Frames</h3>

      <div id="text-MinimizeFrames" class="outline-text-3">
        <p>Links to emails, web pages, and other files are sprinkled all over my org files. The following setting control how org-mode handles opening the link. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-link-frame-setup <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>vm . vm-visit-folder<span style="color: #709870">)</span>
                                   <span style="color: #709870">(</span>gnus . org-gnus-no-new-news<span style="color: #709870">)</span>
                                   <span style="color: #709870">(</span>file . find-file<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">Use the current window for C-c ' source editing</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-src-window-setup <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">current-window</span><span style="color: #707183">)</span></pre>
        </div>

        <p>I like to keep links in the same window so that I don't end up with a ton of frames in my window manager. I normally work in a full-screen window and having links open in the same window just works better for me. </p>

        <p>If I need to work in multiple files I'll manually create the second frame with <code>C-x 5 2</code> or split the window with <code>C-x 4 2</code> or <code>C-X 4 3</code>. When I visit files in Emacs I normally want to replace the current window with the new content. </p>
      </div>
    </div>

    <div id="outline-container-LoggingStuff" class="outline-3">
      <h3 id="LoggingStuff"><a id="sec-18-12" name="sec-18-12"></a><span class="section-number-3">18.12</span> Logging stuff</h3>

      <div id="text-LoggingStuff" class="outline-text-3">
        <p>Most of my logging is controlled by the global <code>org-todo-keywords</code> </p>

        <p>My logging settings are set as follows: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-log-done <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> time<span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-log-into-drawer t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-log-state-notes-insert-after-drawers nil<span style="color: #707183">)</span></pre>
        </div>

        <p>My <code>org-todo-keywords</code> are set as follows: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-todo-keywords
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>sequence <span style="color: #4e9a06">&quot;TODO(t)&quot;</span> <span style="color: #4e9a06">&quot;NEXT(n)&quot;</span> <span style="color: #4e9a06">&quot;|&quot;</span> <span style="color: #4e9a06">&quot;DONE(d)&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span>sequence <span style="color: #4e9a06">&quot;WAITING(w@/!)&quot;</span> <span style="color: #4e9a06">&quot;HOLD(h@/!)&quot;</span> <span style="color: #4e9a06">&quot;|&quot;</span> <span style="color: #4e9a06">&quot;CANCELLED(c@/!)&quot;</span> <span style="color: #4e9a06">&quot;PHONE&quot;</span> <span style="color: #4e9a06">&quot;MEETING&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>This adds a log entry whenever a task moves to any of the following states: </p>

        <ul class="org-ul">
          <li>to or out of <code>DONE</code> status </li>

          <li>to <code>WAITING</code> status (with a note) or out of <code>WAITING</code> status </li>

          <li>to <code>HOLD</code> status </li>

          <li>to <code>CANCELLED</code> status (with a note) or out of <code>CANCELLED</code> status </li>
        </ul>

        <p>I keep clock times and states in the <code>LOGBOOK</code> drawer to keep my tasks uncluttered. If a task is WAITING then the reason for why it is waiting is near the top of the LOGBOOK and unfolding the LOGBOOK drawer provides that information. From the agenda simply hitting <code>SPC</code> on the task will reveal the LOGBOOK drawer. </p>
      </div>
    </div>

    <div id="outline-container-LimitingTimeSpentOnTasks" class="outline-3">
      <h3 id="LimitingTimeSpentOnTasks"><a id="sec-18-13" name="sec-18-13"></a><span class="section-number-3">18.13</span> Limiting time spent on tasks</h3>

      <div id="text-LimitingTimeSpentOnTasks" class="outline-text-3">
        <p>Org-mode has this great new feature for signalling alarms when the estimated time for a task is reached. I use this to limit the amount of time I spend on a task during the day. </p>

        <p>As an example, I've been working on this document for over two months now. I want to get it finished but I can't just work on it solely until it's done because then nothing else gets done. I want to do a little bit every day but limit the total amount of time I spend documenting org-mode to an hour a day. </p>

        <p>To this end I have a task </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span>NEXT<span style="font-weight: bold; color: #00578e"> Document my use of org-mode</span>
  :LOGBOOK:...
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:CLOCK_MODELINE_TOTAL:</span> today
  <span style="font-weight: bold; color: #a52a2a">:Effort:</span>   1:00
<span style="font-weight: bold; color: #a52a2a">  :END:</span></pre>
        </div>

        <p>The task has an estimated effort of 1 hour and when I clock in the task it gives me a total in the mode-line like this </p>

        <pre class="example">--:**  org-mode.org   91% (2348,73) Git:master  (Org Fly yas Font)-----[0:35/1:00 (Document my use of org-mode)]-------</pre>

        <p>I've spent 35 minutes of my 1 hour so far today on this document and other help on IRC. </p>

        <p>I set up an alarm so the Star Trek door chime goes off when the total estimated time is hit. (Yes I'm a Trekkie :) ) </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clock-sound <span style="color: #4e9a06">&quot;/usr/local/lib/tngchime.wav&quot;</span><span style="color: #707183">)</span></pre>
        </div>

        <p>When the one hour time limit is hit the alarm sound goes off and a message states that I should be done working on this task. If I switch tasks and try to clock in this task again I get the sound each and every time I clock in the task. This nags me to go work on something else :) </p>

        <p>You can use similar setups for repeated tasks. By default the last repeat time is recorded as a property when a repeating task is marked done. For repeating tasks the mode-line clock total counts since the last repeat time by default. This lets you accumulate time over multiple days and counts towards your estimated effort limit. </p>
      </div>
    </div>

    <div id="outline-container-HabitTracking" class="outline-3">
      <h3 id="HabitTracking"><a id="sec-18-14" name="sec-18-14"></a><span class="section-number-3">18.14</span> Habit Tracking</h3>

      <div id="text-HabitTracking" class="outline-text-3">
        <p>John Wiegley recently added support for Habit tracking to org-mode. </p>

        <p>I have lots of habits (some bad) but I'd still like to improve and build new good habits. This is what habit tracking is for. It shows a graph on the agenda of how well you have been doing on developing your habits. </p>

        <p>I have habits like: </p>

        <ul class="org-ul">
          <li>Hand wash the dishes </li>

          <li>30 minute brisk walk </li>

          <li>Clean the house </li>
        </ul>

        <p>etc. and most of these need a push to get done regularly. Logging of the done state needs to be enabled for habit tracking to work. </p>

        <p>A habit is just like a regular task except it has a special <code>PROPERTY</code> value setting and a special <code>SCHEDULED</code> date entry like this: </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> Update Org Mode Doc</span>
  <span style="font-weight: bold; color: #a52a2a">SCHEDULED:</span> <span style="text-decoration: underline; color: #a020f0">&lt;2009-11-21 Sat .+7d/30d&gt;</span>
  <span style="text-decoration: underline; color: #a020f0">[2009-11-14 Sat 11:45]</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:STYLE:</span> habit
<span style="font-weight: bold; color: #a52a2a">  :END:</span></pre>
        </div>

        <p>This marks the task as a habit and separates it from the regular task display on the agenda. When you mark a habit done it shows up on your daily agenda the next time based on the first interval in the SCHEDULED entry (<code>.+7d</code>) </p>

        <p>The special <code>SCHEDULED</code> entry states that I want to do this every day but at least every 2 days. If I go 3 days without marking it DONE it shows up RED on the agenda indicating that I have been neglecting this habit. </p>

        <p>The world isn't going to end if you neglect your habits. You can hide and display habits quickly using the <code>K</code> key on the agenda. </p>

        <p>These are my settings for habit tracking. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">Enable habit tracking (and a bunch of other modules)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-modules <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span>org-bbdb
                          org-bibtex
                          org-crypt
                          org-gnus
                          org-id
                          org-info
                          org-jsinfo
                          org-habit
                          org-inlinetask
                          org-irc
                          org-mew
                          org-mhe
                          org-protocol
                          org-rmail
                          org-vm
                          org-wl
                          org-w3m<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #204a87">; </span><span style="color: #204a87">position the habit graph on the agenda to the right of the default</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-habit-graph-column 50<span style="color: #707183">)</span></pre>
        </div>

        <p>During the day I'll turn off the habit display in the agenda with <code>K</code>. This is a persistent setting and since I leave my Emacs running for days at a time my habit display doesn't come back. To make sure I look at the habits daily I have the following settings to redisplay the habits in the agenda each day. This turns the habit display on again at 6AM each morning. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>run-at-time <span style="color: #4e9a06">&quot;06:00&quot;</span> 86400 <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-habit-show-habits t<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-HabitsLogDone" class="outline-3">
      <h3 id="HabitsLogDone"><a id="sec-18-15" name="sec-18-15"></a><span class="section-number-3">18.15</span> Habits only log DONE state changes</h3>

      <div id="text-HabitsLogDone" class="outline-text-3">
        <p>I tend to keep habits under a level 1 task <code>* Habits</code> with a special logging property that only logs changes to the <code>DONE</code> state. This allows me to cancel a habit and not record a timestamp for it since that messes up the habit graph. Cancelling a habit just to get it off my agenda because it's undoable (like get up before 6AM) should not mark the habit as done today. I only cancel habits that repeat every day. </p>

        <p>My habit tasks look as follows - and I tend to have one in every org file that can have habits defined </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* Habits</span>
<span style="font-weight: bold; color: #a52a2a">  :PROPERTIES:</span>
  <span style="font-weight: bold; color: #a52a2a">:LOGGING:</span>  DONE(!)
  <span style="font-weight: bold; color: #a52a2a">:ARCHIVE:</span>  %s_archive::* Habits
<span style="font-weight: bold; color: #a52a2a">  :END:</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-AutoRevertMode" class="outline-3">
      <h3 id="AutoRevertMode"><a id="sec-18-16" name="sec-18-16"></a><span class="section-number-3">18.16</span> Auto revert mode</h3>

      <div id="text-AutoRevertMode" class="outline-text-3">
        <p>I use git to synchronize my org-mode files between my laptop and my workstation. This normally requires saving all the current changes, pushing to a bare repo, and fetching on the other system. After that I need to revert all of my org-mode files to get the updated information. </p>

        <p>I used to use <code>org-revert-all-org-buffers</code> but have since discovered <code>global-auto-revert-mode</code>. With this setting any files that change on disk where there are no changes in the buffer automatically revert to the on-disk version. </p>

        <p>This is perfect for synchronizing my org-mode files between systems. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>global-auto-revert-mode t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-HandlingEncryption" class="outline-3">
      <h3 id="HandlingEncryption"><a id="sec-18-17" name="sec-18-17"></a><span class="section-number-3">18.17</span> Handling Encryption</h3>

      <div id="text-HandlingEncryption" class="outline-text-3">
        <p>I used to keep my encrypted data like account passwords in a separate GPG encrypted file. Now I keep them in my org-mode files with a special tag instead. Encrypted data is kept in the org-mode file that it is associated with. </p>

        <p><code>org-crypt</code> allows you to tag headings with a special tag <code>crypt</code> and org-mode can keep data in these headings encrypted when saved to disk. You decrypt the heading temporarily when you need access to the data and org-mode re-encrypts the heading as soon as you save the file. </p>

        <p>I use the following setup for encryption: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-crypt</span><span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">Encrypt all entries before saving</span>
<span style="color: #707183">(</span>org-crypt-use-before-save-magic<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-tags-exclude-from-inheritance <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #4e9a06">&quot;crypt&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #204a87">; </span><span style="color: #204a87">GPG key to use for encryption</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-crypt-key <span style="color: #4e9a06">&quot;F0B66B40&quot;</span><span style="color: #707183">)</span></pre>
        </div>

        <p><code>M-x org-decrypt-entry</code> will prompt for the passphrase associated with your encryption key and replace the encrypted data where the point is with the plaintext details for your encrypted entry. As soon as you save the file the data is re-encrypted for your key. Encrypting does not require prompting for the passphrase - that's only for looking at the plain text version of the data. </p>

        <p>I tend to have a single level 1 encrypted entry per file (like <code>* Passwords</code>). I prevent the <code>crypt</code> tag from using inheritance so that I don't have encrypted data inside encrypted data. I found <code>M-x org-decrypt-entries</code> prompting for the passphrase to decrypt data over and over again (once per entry to decrypt) too inconvenient. </p>

        <p>I leave my entries encrypted unless I have to look up data - I decrypt on demand and then save the file again to re-encrypt the data. This keeps the data in plain text as short as possible. </p>
      </div>

      <div id="outline-container-AutoSaveFiles" class="outline-4">
        <h4 id="AutoSaveFiles"><a id="sec-18-17-1" name="sec-18-17-1"></a><span class="section-number-4">18.17.1</span> Auto Save Files</h4>

        <div id="text-AutoSaveFiles" class="outline-text-4">
          

          <p>Emacs temporarily saves your buffer in an autosave file while you are editing your org buffer and a sufficient number of changes have accumulated. If you have decrypted subtrees in your buffer these will be written to disk in plain text which possibly leaks sensitive information. To combat this org-mode now asks if you want to disable the autosave functionality in this buffer. </p>

          <p>Personally I really like the autosave feature. 99% of the time my encrypted entries are perfectly safe to write to the autosave file since they are still encrypted. I tend to decrypt an entry, read the details for what I need to look up and then immediately save the file again with <code>C-x C-s</code> which re-encrypts the entry immediately. This pretty much guarantees that my autosave files never have decrypted data stored in them. </p>

          <p>I disable the default org crypt auto-save setting as follows: </p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-crypt-disable-auto-save nil<span style="color: #707183">)</span></pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-SpeedCommands" class="outline-3">
      <h3 id="SpeedCommands"><a id="sec-18-18" name="sec-18-18"></a><span class="section-number-3">18.18</span> Speed Commands</h3>

      <div id="text-SpeedCommands" class="outline-text-3">
        <p>There's an exciting feature called <code>org-speed-commands</code> in the org-mode. </p>

        <p>Speed commands allow access to frequently used commands when on the beginning of a headline - similar to one-key agenda commands. Speed commands are user configurable and org-mode provides a good set of default commands. </p>

        <p>I have the following speed commands set up in addition to the defaults. I don't use priorities so I override the default settings for the 1, 2, and 3 keys. I also disable cycling with 'c' and add 'q' as a quick way to get back to the agenda and update the current view. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-use-speed-commands t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-speed-commands-user <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;0&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;1&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;2&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;3&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;4&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;5&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;6&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;7&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;8&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;9&quot;</span> . ignore<span style="color: #709870">)</span>

                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;a&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;d&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;h&quot;</span> . bh/hide-other<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;i&quot;</span> progn
                                       <span style="color: #907373">(</span>forward-char 1<span style="color: #907373">)</span>
                                       <span style="color: #907373">(</span>call-interactively <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-insert-heading-respect-content</span><span style="color: #907373">)</span><span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;k&quot;</span> . org-kill-note-or-show-branches<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;l&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;m&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;q&quot;</span> . bh/show-org-agenda<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;r&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;s&quot;</span> . org-save-all-org-buffers<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;w&quot;</span> . org-refile<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;x&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;y&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;z&quot;</span> . org-add-note<span style="color: #709870">)</span>

                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;A&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;B&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;E&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;F&quot;</span> . bh/restrict-to-file-or-follow<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;G&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;H&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;J&quot;</span> . org-clock-goto<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;K&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;L&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;M&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;N&quot;</span> . bh/narrow-to-org-subtree<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;P&quot;</span> . bh/narrow-to-org-project<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;Q&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;R&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;S&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;T&quot;</span> . bh/org-todo<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;U&quot;</span> . bh/narrow-up-one-org-level<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;V&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;W&quot;</span> . bh/widen<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;X&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;Y&quot;</span> . ignore<span style="color: #709870">)</span>
                                      <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;Z&quot;</span> . ignore<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/show-org-agenda</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> org-agenda-sticky
      <span style="color: #909183">(</span>switch-to-buffer <span style="color: #4e9a06">&quot;*Org Agenda( )*&quot;</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>switch-to-buffer <span style="color: #4e9a06">&quot;*Org Agenda*&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>delete-other-windows<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>The variable <code>org-speed-commands-default</code> sets a lot of useful defaults for speed command keys. The default keys I use the most are <code>I</code> and <code>O</code> for clocking in and out and <code>t</code> to change todo state. </p>

        <p><code>J</code> jumps to the current or last clocking task. </p>

        <p><code>c</code> and <code>C</code> are disabled so they self insert. I use <code>TAB</code> and <code>S-TAB</code> for cycling - I don't need <code>c</code> and <code>C</code> as well. <code>TAB</code> works everywhere while <code>c</code> and <code>C</code> only works on the headline and sometimes I accidentally cycle when I don't intend to. </p>
      </div>
    </div>

    <div id="outline-container-OrgProtocol" class="outline-3">
      <h3 id="OrgProtocol"><a id="sec-18-19" name="sec-18-19"></a><span class="section-number-3">18.19</span> Org Protocol</h3>

      <div id="text-OrgProtocol" class="outline-text-3">
        <p><a href="http://orgmode.org/worg/org-contrib/org-protocol.php">Org protocol</a> is a great way to create capture notes in org-mode from other applications. I use this to create tasks to review interesting web pages I visit in Firefox. </p>

        <p>I have a special capture template set up for org-protocol to use (set up with the <code>w</code> key). </p>

        <p>My org-mode setup for org-protocol is really simple. It enables org-protocol and creates a single org-protocol capture template as described in <a href="#CaptureTemplates">Capture Templates</a>. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-protocol</span><span style="color: #707183">)</span></pre>
        </div>

        <p>The bulk of the setup is in the Firefox application so that C-c c on a page in Firefox will trigger the org-protocol capture template with details of the page I'm currently viewing in firefox. </p>

        <p>I set up org-protocol in firefox as described in <a href="http://orgmode.org/worg/org-contrib/org-protocol.php#sec-9">Keybindings for Firefox</a>. </p>
      </div>
    </div>

    <div id="outline-container-RequireFinalNewline" class="outline-3">
      <h3 id="RequireFinalNewline"><a id="sec-18-20" name="sec-18-20"></a><span class="section-number-3">18.20</span> Require a final newline when saving files</h3>

      <div id="text-RequireFinalNewline" class="outline-text-3">
        <p>The following setting was mainly for editing yasnippets where I want to be able to expand a snippet but stay on the same line. I used this mainly for replacing short strings or initials with full names for people during meeting notes. I now use <code>abbrev-mode-</code> for this and no longer need this setting. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> require-final-newline nil<span style="color: #707183">)</span></pre>
        </div>

        <p>When I save a file in Emacs I want a final newline - this fits better with the source code projects I work on. This is the setting I use now: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> require-final-newline t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-InsertInactiveTimestamps" class="outline-3">
      <h3 id="InsertInactiveTimestamps"><a id="sec-18-21" name="sec-18-21"></a><span class="section-number-3">18.21</span> Insert inactive timestamps and exclude from export</h3>

      <div id="text-InsertInactiveTimestamps" class="outline-text-3">
        <p>I insert inactive timestamps when working on org-mode files. </p>

        <p>For remember tasks the timestamp is in the remember template but for regular structure editing I want the timestamp automatically added when I create the headline. </p>

        <p>I have a function that is run by an org-mode hook to automatically insert the inactive timestamp whenever a headline is created. </p>

        <p>Adding the timestamp can be controlled by <code>f9 T</code> which toggles the creation of the timestamp on and off for new headlines. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defvar</span> <span style="font-weight: bold; color: #0084c8">bh/insert-inactive-timestamp</span> t<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/toggle-insert-inactive-timestamp</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> bh/insert-inactive-timestamp <span style="color: #909183">(</span>not bh/insert-inactive-timestamp<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>message <span style="color: #4e9a06">&quot;Heading timestamps are %s&quot;</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">if</span> bh/insert-inactive-timestamp <span style="color: #4e9a06">&quot;ON&quot;</span> <span style="color: #4e9a06">&quot;OFF&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/insert-inactive-timestamp</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>org-insert-time-stamp nil t t nil nil nil<span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/insert-heading-inactive-timestamp</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">when</span> bh/insert-inactive-timestamp
      <span style="color: #709870">(</span>org-return<span style="color: #709870">)</span>
      <span style="color: #709870">(</span>org-cycle<span style="color: #709870">)</span>
      <span style="color: #709870">(</span>bh/insert-inactive-timestamp<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-insert-heading-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/insert-heading-inactive-timestamp</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
        </div>

        <p>Everytime I create a heading with <code>M-RET</code> or <code>M-S-RET</code> the hook invokes the function and it inserts an inactive timestamp like this </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* &lt;point here&gt;</span>
  <span style="text-decoration: underline; color: #a020f0">[2009-11-22 Sun 18:45]</span></pre>
        </div>

        <p>This keeps an automatic record of when tasks are created which I find very useful. </p>

        <p>I also have a short cut key defined to invoke this function on demand so that I can insert the inactive timestamp anywhere on demand. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f9&gt; t&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/insert-inactive-timestamp</span><span style="color: #707183">)</span></pre>
        </div>

        <p>To prevent the timestamps from being exported in documents I use the following setting </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-with-timestamps nil<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-ReturnFollowsLink" class="outline-3">
      <h3 id="ReturnFollowsLink"><a id="sec-18-22" name="sec-18-22"></a><span class="section-number-3">18.22</span> Return follows links</h3>

      <div id="text-ReturnFollowsLink" class="outline-text-3">
        <p>The following setting make <code>RET</code> insert a new line instead of opening links. This setting is a love-hate relationship for me. When it first came out I immediately turned it off because I wanted to insert new lines in front of my links and <code>RET</code> would open the link instead which at the time I found extremely annoying. Since then I've retrained my fingers to hit RET at the end of the previous line. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-return-follows-link t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-HighlightClockOvertime" class="outline-3">
      <h3 id="HighlightClockOvertime"><a id="sec-18-23" name="sec-18-23"></a><span class="section-number-3">18.23</span> Highlight clock when running overtime</h3>

      <div id="text-HighlightClockOvertime" class="outline-text-3">
        <p>The current clocking task is displayed on the modeline. If this has an estimated time and we run over the limit I make this stand out on the modeline by changing the background to red as follows </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>custom-set-faces
  <span style="color: #204a87">;; </span><span style="color: #204a87">custom-set-faces was added by Custom.</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">If you edit it by hand, you could mess it up, so be careful.</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">Your init file should contain only one such instance.</span>
  <span style="color: #204a87">;; </span><span style="color: #204a87">If there is more than one, they won't work right.</span>
 <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>org-mode-line-clock <span style="color: #909183">(</span><span style="color: #709870">(</span>t <span style="color: #907373">(</span><span style="color: #a020f0">:foreground</span> <span style="color: #4e9a06">&quot;red&quot;</span> <span style="color: #a020f0">:box</span> <span style="color: #6276ba">(</span><span style="color: #a020f0">:line-width</span> -1 <span style="color: #a020f0">:style</span> released-button<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span> t<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-MeetingNotes" class="outline-3">
      <h3 id="MeetingNotes"><a id="sec-18-24" name="sec-18-24"></a><span class="section-number-3">18.24</span> Meeting Notes</h3>

      <div id="text-MeetingNotes" class="outline-text-3">
        <p>I take meeting notes with org-mode. I record meeting conversations in point-form using org-mode lists. If action items are decided on in the meeting I'll denote them with a bullet and a TODO: or DONE: flag. </p>

        <p>A meeting is a task and it is complete when the meeting is over. The body of the task records all of the interesting meeting details. If TODO items are created in the meeting I make separate TODO tasks from those. </p>

        <p>I use the function <code>bh/prepare-meeting-notes</code> to prepare the meeting notes for emailing to the participants (in a fixed-width font like &quot;Courier New&quot;). As soon as the meeting is over the notes are basically ready for distribution – there's not need to waste lots of time rewriting the minutes before they go out. I haven't bothered with fancy HTML output – the content is more important than the style. </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> Sample Meeting</span>
  - Attendees
    - <span style="font-weight: bold">[ ]</span> Joe
    - <span style="font-weight: bold">[X]</span> Larry
    - <span style="font-weight: bold">[X]</span> Mary
    - <span style="font-weight: bold">[X]</span> Fred
  - Joe is on vacation this week
  - Status Updates
    + Larry
      - did this
      - and that
      - TODO: Needs to follow up on this
    + Mary
      - got a promotion for her recent efforts
    + Fred
      - completed all his tasks 2 days early
      - needs more work
      - DONE: everything</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-org"><span style="font-weight: bold; color: #00578e">* </span><span style="font-weight: bold; color: #ff0000">TODO</span><span style="font-weight: bold; color: #00578e"> Sample Meeting</span>
   - Attendees
     - <span style="font-weight: bold">[ ]</span> Joe
     - <span style="font-weight: bold">[X]</span> Larry
     - <span style="font-weight: bold">[X]</span> Mary
     - <span style="font-weight: bold">[X]</span> Fred
   - Joe is on vacation this week
   - Status Updates
     + Larry
       - did this
       - and that
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; TODO: Needs to follow up on this
     + Mary
       - got a promotion for her recent efforts
     + Fred
       - completed all his tasks 2 days early
       - needs more work
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; DONE: everything</pre>
        </div>

        <p>Here is the formatting function. Just highlight the region for the notes and it turns tabs into spaces, and highlights todo items. The resulting notes are in the kill buffer ready to paste to another application. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/prepare-meeting-notes</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Prepare meeting notes for email</span>
<span style="color: #4e9a06">   Take selected region and convert tabs to spaces, mark TODOs with leading &gt;&gt;&gt;, and copy to kill ring for pasting&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span>prefix<span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">save-restriction</span>
        <span style="color: #907373">(</span>narrow-to-region <span style="color: #6276ba">(</span>region-beginning<span style="color: #6276ba">)</span> <span style="color: #6276ba">(</span>region-end<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span>untabify <span style="color: #6276ba">(</span>point-min<span style="color: #6276ba">)</span> <span style="color: #6276ba">(</span>point-max<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span>goto-char <span style="color: #6276ba">(</span>point-min<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #6276ba">(</span>re-search-forward <span style="color: #4e9a06">&quot;^</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">(</span><span style="color: #4e9a06"> *-</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">)</span><span style="color: #4e9a06"> </span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">(</span><span style="color: #4e9a06">TODO</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">|</span><span style="color: #4e9a06">DONE</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">)</span><span style="color: #4e9a06">: &quot;</span> <span style="color: #858580">(</span>point-max<span style="color: #858580">)</span> t<span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span>replace-match <span style="color: #858580">(</span>concat <span style="color: #80a880">(</span>make-string <span style="color: #887070">(</span>length <span style="color: #707183">(</span>match-string 1<span style="color: #707183">)</span><span style="color: #887070">)</span> ?&gt;<span style="color: #80a880">)</span> <span style="color: #4e9a06">&quot; &quot;</span> <span style="color: #80a880">(</span>match-string 2<span style="color: #80a880">)</span> <span style="color: #4e9a06">&quot;: &quot;</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span>goto-char <span style="color: #6276ba">(</span>point-min<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span>kill-ring-save <span style="color: #6276ba">(</span>point-min<span style="color: #6276ba">)</span> <span style="color: #6276ba">(</span>point-max<span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-HighlightPersistAfterEdit" class="outline-3">
      <h3 id="HighlightPersistAfterEdit"><a id="sec-18-25" name="sec-18-25"></a><span class="section-number-3">18.25</span> Remove Highlights after changes</h3>

      <div id="text-HighlightPersistAfterEdit" class="outline-text-3">
        <p>I'm finding I use org-occur <code>C-c / /</code> a lot when trying to find details in my org-files. The following setting keeps the highlighted results of the search even after modifying the text. This allows me to edit the file without having to reissue the org-occur command to find the other matches in my file. <code>C-c C-c</code> removes the highlights. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-remove-highlights-with-change nil<span style="color: #707183">)</span></pre>
        </div>

        <p>Setting this variable to t will automatically remove the yellow highlights as soon as the buffer is modified. </p>

        <p>I've gone back to automatically removing the highlights with change which is the default setting. I've been using regular <code>M-x occur</code> a lot more lately to find things in any Emacs buffer. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-remove-highlights-with-change t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-OrgModeInfoDocumentation" class="outline-3">
      <h3 id="OrgModeInfoDocumentation"><a id="sec-18-26" name="sec-18-26"></a><span class="section-number-3">18.26</span> Getting up to date org-mode info documentation</h3>

      <div id="text-OrgModeInfoDocumentation" class="outline-text-3">
        <p>I use the org-mode info documentation from the git repository so I set up emacs to find the info files from git before the regular (out of date) system versions. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">Info-default-directory-list</span> <span style="color: #4e9a06">&quot;~/git/org-mode/doc&quot;</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-FutureDates" class="outline-3">
      <h3 id="FutureDates"><a id="sec-18-27" name="sec-18-27"></a><span class="section-number-3">18.27</span> Prefer future dates or not?</h3>

      <div id="text-FutureDates" class="outline-text-3">
        <p>By default org-mode prefers dates in the future. This means that if today's date is May 2 and you enter a date for April 30th (2 days ago) org-mode will jump to April 30th of next year. I used to find this annoying when I wanted to look at what happened last Friday since I have to specify the year. Now I've trained my fingers to go back relatively in the agenda with <code>b</code> so this isn't really an issue for me anymore. </p>

        <p>To make org-mode prefer the current year when entering dates set the following variable </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-read-date-prefer-future nil<span style="color: #707183">)</span></pre>
        </div>

        <p>I now have this variable set to ='time= so times before now (with no date specified) will default to tomorrow.. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-read-date-prefer-future <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">time</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-ListBullets" class="outline-3">
      <h3 id="ListBullets"><a id="sec-18-28" name="sec-18-28"></a><span class="section-number-3">18.28</span> Automatically change list bullets</h3>

      <div id="text-ListBullets" class="outline-text-3">
        <p>I take point-form notes during meetings. Having the same list bullet for every list level makes it hard to read the details when lists are indented more than 3 levels. </p>

        <p>Org-mode has a way to automatically change the list bullets when you change list levels. </p>

        <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
            <tr>
              <th class="left" scope="col">Current List Bullet</th>

              <th class="left" scope="col">Next indented list bullet</th>
            </tr>
          </thead><tbody>
            <tr>
              <td class="left">+</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">*</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">1.</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">1)</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">A)</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">B)</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">a)</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">b)</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">A.</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">B.</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">a.</td>

              <td class="left">-</td>
            </tr>

            <tr>
              <td class="left">b.</td>

              <td class="left">-</td>
            </tr>
          </tbody></table>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-list-demote-modify-bullet <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;+&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;*&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;1.&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;1)&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;A)&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;B)&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;a)&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;b)&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;A.&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;B.&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;a.&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span>
                                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;b.&quot;</span> . <span style="color: #4e9a06">&quot;-&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-IndentationOnTagsView" class="outline-3">
      <h3 id="IndentationOnTagsView"><a id="sec-18-29" name="sec-18-29"></a><span class="section-number-3">18.29</span> Remove indentation on agenda tags view</h3>

      <div id="text-IndentationOnTagsView" class="outline-text-3">
        <p>I don't like the indented view for sublevels on a tags match in the agenda but I want to see all matching tasks (including sublevels) when I do a agenda tag search (<code>F12 m</code>). </p>

        <p>To make all of the matched headings for a tag show at the same level in the agenda set the following variable: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-tags-match-list-sublevels t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-FontifySrcBlocksNatively" class="outline-3">
      <h3 id="FontifySrcBlocksNatively"><a id="sec-18-30" name="sec-18-30"></a><span class="section-number-3">18.30</span> Fontify source blocks natively</h3>

      <div id="text-FontifySrcBlocksNatively" class="outline-text-3">
        <p>I use babel for including source blocks in my documents with </p>

        <div class="org-src-container">
          <pre class="src src-org"><span style="color: #204a87">#+begin_src LANG</span>
,  ...
<span style="color: #204a87">#+end_src</span></pre>
        </div>

        <p>where LANG specifies the language to use (ditaa, dot, sh, emacs-lisp, etc) This displays the language contents fontified in both the org-mode source buffer and the exported document. </p>

        <p>See this <a href="#git-sync">Git Repository synchronization</a> in this document for an example.. </p>
      </div>
    </div>

    <div id="outline-container-AgendaPersistentFilters" class="outline-3">
      <h3 id="AgendaPersistentFilters"><a id="sec-18-31" name="sec-18-31"></a><span class="section-number-3">18.31</span> Agenda persistent filters</h3>

      <div id="text-AgendaPersistentFilters" class="outline-text-3">
        <p>This is a great feature! Persistent agenda filters means if you limit a search with <code>/ TAB SomeTag</code> the agenda remembers this filter until you change it. </p>

        <p>Enable persistent filters with the following variable </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-persistent-filter t<span style="color: #707183">)</span></pre>
        </div>

        <p>The current filter is displayed in the modeline as <code>{+SomeTag}</code> so you can easily see what filter currently applies to your agenda view. </p>

        <p>I use this with <code>FILETAGS</code> to limit the displayed results to a single client or context. </p>
      </div>
    </div>

    <div id="outline-container-TagFlaggedEntries" class="outline-3">
      <h3 id="TagFlaggedEntries"><a id="sec-18-32" name="sec-18-32"></a><span class="section-number-3">18.32</span> Add tags for flagged entries</h3>

      <div id="text-TagFlaggedEntries" class="outline-text-3">
        <p>Everyone so often something will come along that is really important and you know you want to be able to find it back fast sometime in the future. </p>

        <p>For these types of notes and tasks I add a special <code>:FLAGGED:</code> tag. This tag gets a special fast-key <code>?</code> which matches the search key in the agenda for flagged items. See <a href="#OrgTagAlist">Tags</a> for the setup of <code>org-tag-alist</code> for the <code>FLAGGED</code> entry. </p>

        <p>Finding flagged entries is then simple - just <code>F12 ?</code> and you get them all. </p>
      </div>
    </div>

    <div id="outline-container-MailLinksOpenComposeMail" class="outline-3">
      <h3 id="MailLinksOpenComposeMail"><a id="sec-18-33" name="sec-18-33"></a><span class="section-number-3">18.33</span> Mail links open compose-mail</h3>

      <div id="text-MailLinksOpenComposeMail" class="outline-text-3">
        <p>The following setting makes org-mode open <code>mailto:</code> links using compose-mail. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-link-mailto-program <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span>compose-mail <span style="color: #4e9a06">&quot;%a&quot;</span> <span style="color: #4e9a06">&quot;%s&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-MailingSubtrees" class="outline-3">
      <h3 id="MailingSubtrees"><a id="sec-18-34" name="sec-18-34"></a><span class="section-number-3">18.34</span> Composing mail from org mode subtrees</h3>

      <div id="text-MailingSubtrees" class="outline-text-3">
        <p>It's possible to create mail from an org-mode subtree. I use <code>C-c M-o</code> to start an email message with the details filled in from the current subtree. I use this for repeating reminder tasks where I need to send an email to someone else. The email contents are already contained in the org-mode subtree and all I need to do is <code>C-c M-o</code> and any minor edits before sending it off. </p>
      </div>
    </div>

    <div id="outline-container-SmexAndIdo" class="outline-3">
      <h3 id="SmexAndIdo"><a id="sec-18-35" name="sec-18-35"></a><span class="section-number-3">18.35</span> Use smex for M-x ido-completion</h3>

      <div id="text-SmexAndIdo" class="outline-text-3">
        <p>I discovered smex for IDO-completion for M-x commands after reading a post of the org-mode mailing list. I actually use M-x a lot now because IDO completion is so easy. </p>

        <p>Here's the smex setup I use </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">load-path</span> <span style="color: #7388d6">(</span>expand-file-name <span style="color: #4e9a06">&quot;~/.emacs.d&quot;</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">smex</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>smex-initialize<span style="color: #707183">)</span>

<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;M-x&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">smex</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;C-x x&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">smex</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;M-X&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">smex-major-mode-commands</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-BookmarksFastNavigation" class="outline-3">
      <h3 id="BookmarksFastNavigation"><a id="sec-18-36" name="sec-18-36"></a><span class="section-number-3">18.36</span> Use Emacs bookmarks for fast navigation</h3>

      <div id="text-BookmarksFastNavigation" class="outline-text-3">
        <p>I've started using emacs bookmarks to save a location and return to it easily. Normally I want to get back to my currently clocking task and that's easy - just hit <code>F11</code>. When I'm working down a long checklist I find it convenient to set a bookmark on the next item to check, then go away and work on it, and return to the checkbox to mark it done. </p>

        <p>I use Emacs bookmarks for this setup as follows: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Bookmark handling</span>
<span style="color: #204a87">;;</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;C-f6&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #909183">)</span> <span style="color: #909183">(</span>bookmark-set <span style="color: #4e9a06">&quot;SAVED&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>global-set-key <span style="color: #7388d6">(</span>kbd <span style="color: #4e9a06">&quot;&lt;f6&gt;&quot;</span><span style="color: #7388d6">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #909183">)</span> <span style="color: #909183">(</span>bookmark-jump <span style="color: #4e9a06">&quot;SAVED&quot;</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>When I want to save the current location I just hit <code>C-f6</code> and then I can return to it with <code>f6</code> anytime. I overwrite the same bookmark each time I set a new position. </p>
      </div>
    </div>

    <div id="outline-container-OrgMimeMail" class="outline-3">
      <h3 id="OrgMimeMail"><a id="sec-18-37" name="sec-18-37"></a><span class="section-number-3">18.37</span> Using org-mime to email</h3>

      <div id="text-OrgMimeMail" class="outline-text-3">
        <p>I'm experimenting with sending mime mail from org. I've added <code>C-c M=o</code> key bindings in the <code>org-mode-hook</code> to generate mail from an org-mode subtree. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mime</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-StateChangeDetailsInAgenda" class="outline-3">
      <h3 id="StateChangeDetailsInAgenda"><a id="sec-18-38" name="sec-18-38"></a><span class="section-number-3">18.38</span> Remove multiple state change log details from the agenda</h3>

      <div id="text-StateChangeDetailsInAgenda" class="outline-text-3">
        

        <p>I skip multiple timestamps for the same entry in the agenda view with the following setting. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-skip-additional-timestamps-same-entry t<span style="color: #707183">)</span></pre>
        </div>

        <p>This removes the clutter of extra state change log details when multiple timestamps exist in a single entry. </p>
      </div>
    </div>

    <div id="outline-container-OldTableReferences" class="outline-3">
      <h3 id="OldTableReferences"><a id="sec-18-39" name="sec-18-39"></a><span class="section-number-3">18.39</span> Drop old style references in tables</h3>

      <div id="text-OldTableReferences" class="outline-text-3">
        

        <p>I drop the old A3/B4 style references from tables when editing with the following setting. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-table-use-standard-references <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> from<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-SystemSettingsForApplicationSelection" class="outline-3">
      <h3 id="SystemSettingsForApplicationSelection"><a id="sec-18-40" name="sec-18-40"></a><span class="section-number-3">18.40</span> Use system settings for file-application selection</h3>

      <div id="text-SystemSettingsForApplicationSelection" class="outline-text-3">
        

        <p>To get consistent applications for opening tasks I set the <code>org-file-apps</code> variable as follows: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-file-apps <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>auto-mode . emacs<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">.mm</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">'&quot;</span> . system<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">.x?html?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">'&quot;</span> . system<span style="color: #709870">)</span>
                            <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">.pdf</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="color: #4e9a06">'&quot;</span> . system<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>This uses the entries defined in my system <code>mailcap</code> settings when opening file extensions. This gives me consistent behaviour when opening an link to some HTML file with <code>C-c C-o</code> or when previewing an export. </p>
      </div>
    </div>

    <div id="outline-container-CurrentWindowForAgenda" class="outline-3">
      <h3 id="CurrentWindowForAgenda"><a id="sec-18-41" name="sec-18-41"></a><span class="section-number-3">18.41</span> Use the current window for the agenda</h3>

      <div id="text-CurrentWindowForAgenda" class="outline-text-3">
        

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">; </span><span style="color: #204a87">Overwrite the current window with the agenda</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-agenda-window-setup <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">current-window</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-DeleteIdsWhenCloning" class="outline-3">
      <h3 id="DeleteIdsWhenCloning"><a id="sec-18-42" name="sec-18-42"></a><span class="section-number-3">18.42</span> Delete IDs when cloning</h3>

      <div id="text-DeleteIdsWhenCloning" class="outline-text-3">
        

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-clone-delete-id t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-CyclePlainLists" class="outline-3">
      <h3 id="CyclePlainLists"><a id="sec-18-43" name="sec-18-43"></a><span class="section-number-3">18.43</span> Cycling plain lists</h3>

      <div id="text-CyclePlainLists" class="outline-text-3">
        <p>Org mode can fold (cycle) plain lists. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-cycle-include-plain-lists t<span style="color: #707183">)</span></pre>
        </div>

        <p>I find this setting useful when I have repeating tasks with lots of sublists with checkboxes. I can fold the completed list entries and focus on what is remaining easily. </p>
      </div>
    </div>

    <div id="outline-container-ShowSrcBlockSyntax" class="outline-3">
      <h3 id="ShowSrcBlockSyntax"><a id="sec-18-44" name="sec-18-44"></a><span class="section-number-3">18.44</span> Showing source block syntax highlighting</h3>

      <div id="text-ShowSrcBlockSyntax" class="outline-text-3">
        <p>It is possible to display org-mode source blocks fontified in their native mode. This allows colourization of keywords for C and shell script source etc. If I edit the source I use =C-c '= (control-c single quote) to bring up the source window which is then rendered with syntax highlighting in the native mode. This setting also shows the syntax highlighting when viewing in the org-mode buffer. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-src-fontify-natively t<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-StructureTemplateBlocks" class="outline-3">
      <h3 id="StructureTemplateBlocks"><a id="sec-18-45" name="sec-18-45"></a><span class="section-number-3">18.45</span> Inserting Structure Template Blocks</h3>

      <div id="text-StructureTemplateBlocks" class="outline-text-3">
        

        <p>There is a shortcut key sequence in org-mode to insert structure templates quickly into your org files. </p>

        <p>I use example and source blocks often in my org files. </p>

        <table cellspacing="0" cellpadding="6" rules="groups" border="2" frame="hsides"><colgroup><col class="left" /><col class="left" /></colgroup><thead>
            <tr>
              <th class="left" scope="col">Key Sequence</th>

              <th class="left" scope="col">Expands to</th>
            </tr>
          </thead><tbody>
            <tr>
              <td class="left">&lt; s TAB</td>

              <td class="left">#+begin_src … #+end_src</td>
            </tr>

            <tr>
              <td class="left">&lt; e TAB</td>

              <td class="left">#+begin_example … #+end_example</td>
            </tr>
          </tbody></table>

        <p>I've added a block for saving email text which I copy from MS Outlook at work so I have context associated with my org-mode tasks. </p>

        <p>The following lisp makes the blocks lowercase instead of the default upper case in org-mode. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-structure-template-alist
      <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;s&quot;</span> <span style="color: #4e9a06">&quot;#+begin_src ?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_src&quot;</span> <span style="color: #4e9a06">&quot;&lt;src lang=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&lt;/src&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;e&quot;</span> <span style="color: #4e9a06">&quot;#+begin_example</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_example&quot;</span> <span style="color: #4e9a06">&quot;&lt;example&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&lt;/example&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;q&quot;</span> <span style="color: #4e9a06">&quot;#+begin_quote</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_quote&quot;</span> <span style="color: #4e9a06">&quot;&lt;quote&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&lt;/quote&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;v&quot;</span> <span style="color: #4e9a06">&quot;#+begin_verse</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_verse&quot;</span> <span style="color: #4e9a06">&quot;&lt;verse&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&lt;/verse&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;c&quot;</span> <span style="color: #4e9a06">&quot;#+begin_center</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_center&quot;</span> <span style="color: #4e9a06">&quot;&lt;center&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&lt;/center&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;l&quot;</span> <span style="color: #4e9a06">&quot;#+begin_latex</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_latex&quot;</span> <span style="color: #4e9a06">&quot;&lt;literal style=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">latex</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&lt;/literal&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;L&quot;</span> <span style="color: #4e9a06">&quot;#+latex: &quot;</span> <span style="color: #4e9a06">&quot;&lt;literal style=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">latex</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;?&lt;/literal&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;h&quot;</span> <span style="color: #4e9a06">&quot;#+begin_html</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_html&quot;</span> <span style="color: #4e9a06">&quot;&lt;literal style=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">html</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">&lt;/literal&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;H&quot;</span> <span style="color: #4e9a06">&quot;#+html: &quot;</span> <span style="color: #4e9a06">&quot;&lt;literal style=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">html</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;?&lt;/literal&gt;&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;a&quot;</span> <span style="color: #4e9a06">&quot;#+begin_ascii</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">n</span><span style="color: #4e9a06">#+end_ascii&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;A&quot;</span> <span style="color: #4e9a06">&quot;#+ascii: &quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;i&quot;</span> <span style="color: #4e9a06">&quot;#+index: ?&quot;</span> <span style="color: #4e9a06">&quot;#+index: ?&quot;</span><span style="color: #709870">)</span>
              <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;I&quot;</span> <span style="color: #4e9a06">&quot;#+include %file ?&quot;</span> <span style="color: #4e9a06">&quot;&lt;include file=%file markup=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">?</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;&quot;</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-NextTasks" class="outline-3">
      <h3 id="NextTasks"><a id="sec-18-46" name="sec-18-46"></a><span class="section-number-3">18.46</span> NEXT is for tasks</h3>

      <div id="text-NextTasks" class="outline-text-3">
        

        <p><code>NEXT</code> keywords are for <b>tasks</b> and not <b>projects</b>. I've added a function to the todo state change hook and clock in hook so that any parent tasks marked <code>NEXT</code> automagically change from <code>NEXT</code> to <code>TODO</code> since they are now projects and not tasks. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/mark-next-parent-tasks-todo</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Visit each parent task and change NEXT states to TODO&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #909183">(</span><span style="color: #709870">(</span>mystate <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">or</span> <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">and</span> <span style="color: #858580">(</span>fboundp <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-state</span><span style="color: #858580">)</span>
                          state<span style="color: #6276ba">)</span>
                     <span style="color: #6276ba">(</span>nth 2 <span style="color: #858580">(</span>org-heading-components<span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">when</span> mystate
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #6276ba">(</span>org-up-heading-safe<span style="color: #6276ba">)</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #858580">(</span>member <span style="color: #80a880">(</span>nth 2 <span style="color: #887070">(</span>org-heading-components<span style="color: #887070">)</span><span style="color: #80a880">)</span> <span style="color: #80a880">(</span>list <span style="color: #4e9a06">&quot;NEXT&quot;</span><span style="color: #80a880">)</span><span style="color: #858580">)</span>
            <span style="color: #858580">(</span>org-todo <span style="color: #4e9a06">&quot;TODO&quot;</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-after-todo-state-change-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/mark-next-parent-tasks-todo</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-clock-in-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/mark-next-parent-tasks-todo</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-StartupView" class="outline-3">
      <h3 id="StartupView"><a id="sec-18-47" name="sec-18-47"></a><span class="section-number-3">18.47</span> Startup in folded view</h3>

      <div id="text-StartupView" class="outline-text-3">
        

        <p>Startup in folded view. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-startup-folded t<span style="color: #707183">)</span></pre>
        </div>

        <p>I used to use content view by default so I could review org subtrees before archiving but my archiving workflow has changed so I no longer need this manual step. </p>
      </div>
    </div>

    <div id="outline-container-AlphabeticalLists" class="outline-3">
      <h3 id="AlphabeticalLists"><a id="sec-18-48" name="sec-18-48"></a><span class="section-number-3">18.48</span> Allow alphabetical list entries</h3>

      <div id="text-AlphabeticalLists" class="outline-text-3">
        

        <p>The following setting adds alphabetical lists like </p>

        <div class="org-src-container">
          <pre class="src src-org">a. item one
b. item two</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-alphabetical-lists t<span style="color: #707183">)</span></pre>
        </div>

        <p>In order for filling to work correctly this needs to be set before the exporters are loaded. </p>
      </div>
    </div>

    <div id="outline-container-OrgStructModeForMail" class="outline-3">
      <h3 id="OrgStructModeForMail"><a id="sec-18-49" name="sec-18-49"></a><span class="section-number-3">18.49</span> Using orgstruct mode for mail</h3>

      <div id="text-OrgStructModeForMail" class="outline-text-3">
        

        <p><code>orgstruct++-mode</code> is enabled in <code>Gnus</code> message buffers to aid in creating structured email messages. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">message-mode-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">orgstruct++-mode</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">message-mode-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">turn-on-auto-fill</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">message-mode-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bbdb-define-all-aliases</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">message-mode-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">orgtbl-mode</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">message-mode-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">turn-on-flyspell</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">message-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span> <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> fill-column 72<span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-FlySpellModeChecksSpelling" class="outline-3">
      <h3 id="FlySpellModeChecksSpelling"><a id="sec-18-50" name="sec-18-50"></a><span class="section-number-3">18.50</span> Using flyspell mode to reduce spelling errors</h3>

      <div id="text-FlySpellModeChecksSpelling" class="outline-text-3">
        

        <p><code>flyspell-mode</code> is enabled for almost everything to help prevent creating documents with spelling errors. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">flyspell mode for spell checking everywhere</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">turn-on-flyspell</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Disable keys in org-mode</span>
<span style="color: #204a87">;;    </span><span style="color: #204a87">C-c [ </span>
<span style="color: #204a87">;;    </span><span style="color: #204a87">C-c ]</span>
<span style="color: #204a87">;;    </span><span style="color: #204a87">C-c ;</span>
<span style="color: #204a87">;;    </span><span style="color: #204a87">C-c C-x C-q  cancelling the clock (we never want this)</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode-hook</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>lambda <span style="color: #909183">()</span>
             <span style="color: #204a87">;; </span><span style="color: #204a87">Undefine C-c [ and C-c ] since this breaks my</span>
             <span style="color: #204a87">;; </span><span style="color: #204a87">org-agenda files when directories are include It</span>
             <span style="color: #204a87">;; </span><span style="color: #204a87">expands the files in the directories individually</span>
             <span style="color: #909183">(</span>org-defkey org-mode-map <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-c[&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">undefined</span><span style="color: #909183">)</span>
             <span style="color: #909183">(</span>org-defkey org-mode-map <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-c]&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">undefined</span><span style="color: #909183">)</span>
             <span style="color: #909183">(</span>org-defkey org-mode-map <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-c;&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">undefined</span><span style="color: #909183">)</span>
             <span style="color: #909183">(</span>org-defkey org-mode-map <span style="color: #4e9a06">&quot;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-c</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-x</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">C</span><span style="color: #4e9a06">-q&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">undefined</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode-hook</span>
          <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">lambda</span> <span style="color: #909183">()</span>
            <span style="color: #909183">(</span>local-set-key <span style="color: #709870">(</span>kbd <span style="color: #4e9a06">&quot;C-c M-o&quot;</span><span style="color: #709870">)</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/mail-subtree</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/mail-subtree</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>org-mark-subtree<span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>org-mime-subtree<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-PreserveSourceIndentations" class="outline-3">
      <h3 id="PreserveSourceIndentations"><a id="sec-18-51" name="sec-18-51"></a><span class="section-number-3">18.51</span> Preserving source block indentation</h3>

      <div id="text-PreserveSourceIndentations" class="outline-text-3">
        <p>I do not preserve indentation for source blocks mainly because this doesn't look nice with indented org-files. The only reason I've found to preserve indentation is when TABs in files need to be preserved (e.g. Makefiles). I don't normally edit these files in org-mode so I leave this setting turned off. </p>

        <p>I've changed the default block indentation so that it is not indented from the text in the org file. This allows editing source blocks in place without requiring use of =C-c '= so that code lines up correctly. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-src-preserve-indentation nil<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-edit-src-content-indentation 0<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-PreventInvisibleEdits" class="outline-3">
      <h3 id="PreventInvisibleEdits"><a id="sec-18-52" name="sec-18-52"></a><span class="section-number-3">18.52</span> Prevent editing invisible text</h3>

      <div id="text-PreventInvisibleEdits" class="outline-text-3">
        

        <p>The following setting prevents accidentally editing hidden text when the point is inside a folded region. This can happen if you are in the body of a heading and globally fold the org-file with <code>S-TAB</code> </p>

        <p>I find invisible edits (and undo's) hard to deal with so now I can't edit invisible text. <code>C-c C-r</code> (org-reveal) will display where the point is if it is buried in invisible text to allow editing again. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-catch-invisible-edits <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">error</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-DefaultCodingSystem" class="outline-3">
      <h3 id="DefaultCodingSystem"><a id="sec-18-53" name="sec-18-53"></a><span class="section-number-3">18.53</span> Use utf-8 as default coding system</h3>

      <div id="text-DefaultCodingSystem" class="outline-text-3">
        

        <p>I use <code>utf-8</code> as the default coding system for all of my org files. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-export-coding-system <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">utf-8</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>prefer-coding-system <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">utf-8</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>set-charset-priority <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">unicode</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> default-process-coding-system <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span>utf-8-unix . utf-8-unix<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-ClockDurationsNoDays" class="outline-3">
      <h3 id="ClockDurationsNoDays"><a id="sec-18-54" name="sec-18-54"></a><span class="section-number-3">18.54</span> Keep clock durations in hours</h3>

      <div id="text-ClockDurationsNoDays" class="outline-text-3">
        

        <p>The default for clock durations has changed to include days which is 24 hours. At work I like to think of a day as 6 hours of work (the rest of the time is lost in meetings and other overhead on average) so displaying clock durations in days doesn't make sense to me. </p>

        <p>The following setting displays clock durations (from <code>C-c C-x C-d</code> in hours and minutes. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-time-clocksum-format
      <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #7388d6">(</span><span style="color: #a020f0">:hours</span> <span style="color: #4e9a06">&quot;%d&quot;</span> <span style="color: #a020f0">:require-hours</span> t <span style="color: #a020f0">:minutes</span> <span style="color: #4e9a06">&quot;:%02d&quot;</span> <span style="color: #a020f0">:require-minutes</span> t<span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-LinkingToTaskCreatesId" class="outline-3">
      <h3 id="LinkingToTaskCreatesId"><a id="sec-18-55" name="sec-18-55"></a><span class="section-number-3">18.55</span> Create unique IDs for tasks when linking</h3>

      <div id="text-LinkingToTaskCreatesId" class="outline-text-3">
        

        <p>The following setting creates a unique task ID for the heading in the <code>PROPERTY</code> drawer when I use <code>C-c l</code>. This allows me to move the task around arbitrarily in my org files and the link to it still works. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-id-link-to-org-use-id <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">create-if-interactive-and-no-custom-id</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-Unused" class="outline-2">
    <h2 id="Unused"><a id="sec-19" name="sec-19"></a><span class="section-number-2">19</span> Things I Don't Use (Anymore)</h2>

    <div id="text-Unused" class="outline-text-2">
      <p>This is a partial list of things I know about but do not use. <code>org-mode</code> is huge with tons of features. There are features out there that I don't know about yet or haven't explored so this list is not going to be complete. </p>
    </div>

    <div id="outline-container-ArchiveSibling" class="outline-3">
      <h3 id="ArchiveSibling"><a id="sec-19-1" name="sec-19-1"></a><span class="section-number-3">19.1</span> Archive Sibling</h3>

      <div id="text-ArchiveSibling" class="outline-text-3">
        <p>This was a cute idea but I find archiving entire complete subtrees better. I don't mind having a bunch of tasks marked <code>DONE</code> (but not archived) </p>
      </div>
    </div>

    <div id="outline-container-StrikeThroughEmphasis" class="outline-3">
      <h3 id="StrikeThroughEmphasis"><a id="sec-19-2" name="sec-19-2"></a><span class="section-number-3">19.2</span> Strike-through emphasis</h3>

      <div id="text-StrikeThroughEmphasis" class="outline-text-3">
        <p>Strike-through emphasis is just unreadable and tends to only show up when pasting data from other files into org-mode. This just removes the strike-through completely which I find a lot nicer. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-emphasis-alist <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">quote</span> <span style="color: #909183">(</span><span style="color: #709870">(</span><span style="color: #4e9a06">&quot;*&quot;</span> bold <span style="color: #4e9a06">&quot;&lt;b&gt;&quot;</span> <span style="color: #4e9a06">&quot;&lt;/b&gt;&quot;</span><span style="color: #709870">)</span>
                                 <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;/&quot;</span> italic <span style="color: #4e9a06">&quot;&lt;i&gt;&quot;</span> <span style="color: #4e9a06">&quot;&lt;/i&gt;&quot;</span><span style="color: #709870">)</span>
                                 <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;_&quot;</span> underline <span style="color: #4e9a06">&quot;&lt;span style=</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">text-decoration:underline;</span><span style="font-weight: bold; color: #4e9a06">\</span><span style="font-weight: bold; color: #4e9a06">&quot;</span><span style="color: #4e9a06">&gt;&quot;</span> <span style="color: #4e9a06">&quot;&lt;/span&gt;&quot;</span><span style="color: #709870">)</span>
                                 <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;=&quot;</span> org-code <span style="color: #4e9a06">&quot;&lt;code&gt;&quot;</span> <span style="color: #4e9a06">&quot;&lt;/code&gt;&quot;</span> verbatim<span style="color: #709870">)</span>
                                 <span style="color: #709870">(</span><span style="color: #4e9a06">&quot;~&quot;</span> org-verbatim <span style="color: #4e9a06">&quot;&lt;code&gt;&quot;</span> <span style="color: #4e9a06">&quot;&lt;/code&gt;&quot;</span> verbatim<span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-SubscriptsAndSuperscripts" class="outline-3">
      <h3 id="SubscriptsAndSuperscripts"><a id="sec-19-3" name="sec-19-3"></a><span class="section-number-3">19.3</span> Subscripts and Superscripts</h3>

      <div id="text-SubscriptsAndSuperscripts" class="outline-text-3">
        <p>I don't currently write documents that need subscripts and superscript support. I disable handling of <code>_</code> and <code>^</code> for subscript and superscripts with </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-use-sub-superscripts nil<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-Yasnippets" class="outline-3">
      <h3 id="Yasnippets"><a id="sec-19-4" name="sec-19-4"></a><span class="section-number-3">19.4</span> Yasnippet</h3>

      <div id="text-Yasnippets" class="outline-text-3">
        <p><a href="http://code.google.com/p/yasnippet/">Yasnippet</a> is cool but I don't use this anymore. I've replaced yasnippet with a combination of <code>abbrev-mode</code> and <code>skeletons</code> which are available by default in Emacs. </p>

        <p>The following description applies to yasnippet version 0.5.10. The setup requirements may have changed with newer versions. </p>

        <p>You type the snippet name and <code>TAB</code> and yasnippet expands the name with the contents of the snippet text - substituting snippet variables as appropriate. </p>

        <p>Yasnippet comes with lots of snippets for programming languages. I used a few babel related snippets with <code>org-mode</code>. </p>

        <p>I downloaded and installed the unbundled version of yasnippet so that I can edit the predefined snippets. I unpacked the yasnippet software in my <code>~/.emacs.d/plugins</code> directory, renamed <code>yasnippet0.5.10</code> to <code>yasnippet</code> and added the following setup in my <code>.emacs</code>: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>add-to-list <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">load-path</span> <span style="color: #7388d6">(</span>expand-file-name <span style="color: #4e9a06">&quot;~/.emacs.d/plugins&quot;</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">require</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">yasnippet</span><span style="color: #707183">)</span>
<span style="color: #707183">(</span>yas/initialize<span style="color: #707183">)</span>
<span style="color: #707183">(</span>yas/load-directory <span style="color: #4e9a06">&quot;~/.emacs.d/plugins/yasnippet/snippets&quot;</span><span style="color: #707183">)</span>

<span style="color: #204a87">;; </span><span style="color: #204a87">Make TAB the yas trigger key in the org-mode-hook and enable flyspell mode and autofill</span>
<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-mode-hook</span>
          <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">lambda</span> <span style="color: #909183">()</span>
            <span style="color: #204a87">;; </span><span style="color: #204a87">yasnippet</span>
            <span style="color: #909183">(</span>make-variable-buffer-local <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">yas/trigger-key</span><span style="color: #909183">)</span>
            <span style="color: #909183">(</span>org-set-local <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">yas/trigger-key</span> <span style="color: #709870">[</span>tab<span style="color: #709870">]</span><span style="color: #909183">)</span>
            <span style="color: #909183">(</span>define-key yas/keymap <span style="color: #709870">[</span>tab<span style="color: #709870">]</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">yas/next-field-group</span><span style="color: #909183">)</span>
            <span style="color: #204a87">;; </span><span style="color: #204a87">flyspell mode for spell checking everywhere</span>
            <span style="color: #909183">(</span>flyspell-mode 1<span style="color: #909183">)</span>
            <span style="color: #204a87">;; </span><span style="color: #204a87">auto-fill mode on</span>
            <span style="color: #909183">(</span>auto-fill-mode 1<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>I used snippets for the following: </p>

        <ul class="org-ul">
          <li><code>begin</code> for generic <code>#+begin_</code> blocks </li>

          <li><code>dot</code> for graphviz </li>

          <li><code>uml</code> for PlantUML graphics </li>

          <li><code>sh</code> for bash shell scripts </li>

          <li><code>elisp</code> for emacs lisp code </li>

          <li>initials of a person converts to their full name I used this while taking meeting notes </li>
        </ul>

        <p>Here is the definition for the <code>begin</code> snippet: </p>

        <p>org-mode Yasnippet: ~/.emacs.d/plugins/yasnippet/snippets/text-mode/org-mode/begin </p>

        <pre class="example">#name : #+begin_...#+end_
# --     
#+begin_$1 $2
$0
#+end_$1</pre>

        <p>I used this to create <code>#+begin_*</code> blocks like </p>

        <ul class="org-ul">
          <li><code>#+begin_example</code> </li>

          <li><code>#+begin_src</code> </li>

          <li>etc. </li>
        </ul>

        <p>Simply type <code>begin</code> and then <code>TAB</code> it replaces the <code>begin</code> text with the snippet contents. Then type <code>src TAB emacs-lisp TAB</code> and your snippet block is done. I've shortened this specific sequence to just <code>elisp TAB</code> since I use it fairly often. </p>

        <p>Hit <code>C-c SingeQuote(')</code> and insert whatever emacs-lisp code you need. While in this block you're in a mode that knows how to format and colourize emacs lisp code as you enter it which is really nice. <code>C-c SingleQuote(')</code> exits back to org-mode. This recognizes any emacs editing mode so all you have to do is enter the appropriate mode name for the block. </p>

        <p><code>dot</code> </p>

        <pre class="example">#dot : #+begin_src dot ... #+end_src
# --
#+begin_src dot :file $1 :cmdline -Kdot -Tpng
$0
#+end_src</pre>

        <p><code>uml</code> </p>

        <pre class="example">#uml : #+begin_src plantuml ... #+end_src
# --
#+begin_src plantuml :file $1
$0
#+end_src</pre>

        <p><code>sh</code> </p>

        <pre class="example">#sh: #+begin_src sh ... #+end_src
# --
#+begin_src sh :results output
$0
#+end_src</pre>

        <p><code>elisp</code> </p>

        <pre class="example">#elisp : #+begin_src emacs-lisp ...#+end_src emacs-lisp
# --
#+begin_src emacs-lisp
$0
#+end_src</pre>

        <p>This is a great time saver. </p>
      </div>
    </div>

    <div id="outline-container-HeadingLevelsOddEven" class="outline-3">
      <h3 id="HeadingLevelsOddEven"><a id="sec-19-5" name="sec-19-5"></a><span class="section-number-3">19.5</span> Show headings at odd levels only or odd-even levels</h3>

      <div id="text-HeadingLevelsOddEven" class="outline-text-3">
        <p>This has been replaced by org-indent-mode </p>

        <p>I've converted my files between odd-levels-only and odd-even using the functions <code>org-convert-to-odd-levels</code> and <code>org-convert-to-oddeven-levels</code> functions a number of times. I ended up going back to odd-even levels to reduce the amount of leading whitespace on tasks. I didn't find that lining up the headlines and tasks in odd-levels-only to be all that helpful. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-odd-levels-only nil<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-PropagateStartedToParent" class="outline-3">
      <h3 id="PropagateStartedToParent"><a id="sec-19-6" name="sec-19-6"></a><span class="section-number-3">19.6</span> Propagate STARTED to parent tasks</h3>

      <div id="text-PropagateStartedToParent" class="outline-text-3">
        <p>I used to have a <code>STARTED</code> and <code>NEXT</code> task state. These were basically the same except <code>STARTED</code> indicated that I've clocked some time on the task. Since then I've just moved to using <code>NEXT</code> for this. </p>

        <p>The following code used to propagate the <code>STARTED</code> task up the project tree but I don't use this anymore. </p>

        <p>When a task is marked <code>STARTED</code> (either manually or by clocking it in) the <code>STARTED</code> state propagates up the tree to any parent tasks of this task that are <code>TODO</code> or <code>NEXT</code>. As soon as I work on the first <code>NEXT</code> task in a tree the project is also marked <code>STARTED</code>. This helps me keep track of things that are in progress. </p>

        <p>Here's the setup I use to propagate <code>STARTED</code> to parent tasks: </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #204a87">;; </span><span style="color: #204a87">Mark parent tasks as started</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defvar</span> <span style="font-weight: bold; color: #0084c8">bh/mark-parent-tasks-started</span> nil<span style="color: #707183">)</span>

<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/mark-parent-tasks-started</span> <span style="color: #7388d6">()</span>
  <span style="color: #4e9a06">&quot;Visit each parent task and change TODO states to STARTED&quot;</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">unless</span> bh/mark-parent-tasks-started
    <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #709870">(</span>equal org-state <span style="color: #4e9a06">&quot;STARTED&quot;</span><span style="color: #709870">)</span>
      <span style="color: #709870">(</span><span style="font-weight: bold; color: #a52a2a">let</span> <span style="color: #907373">(</span><span style="color: #6276ba">(</span>bh/mark-parent-tasks-started t<span style="color: #6276ba">)</span><span style="color: #907373">)</span>
        <span style="color: #907373">(</span><span style="font-weight: bold; color: #a52a2a">save-excursion</span>
          <span style="color: #6276ba">(</span><span style="font-weight: bold; color: #a52a2a">while</span> <span style="color: #858580">(</span>org-up-heading-safe<span style="color: #858580">)</span>
            <span style="color: #858580">(</span><span style="font-weight: bold; color: #a52a2a">when</span> <span style="color: #80a880">(</span>member <span style="color: #887070">(</span>nth 2 <span style="color: #707183">(</span>org-heading-components<span style="color: #707183">)</span><span style="color: #887070">)</span> <span style="color: #887070">(</span>list <span style="color: #4e9a06">&quot;TODO&quot;</span> <span style="color: #4e9a06">&quot;NEXT&quot;</span><span style="color: #887070">)</span><span style="color: #80a880">)</span>
              <span style="color: #80a880">(</span>org-todo <span style="color: #4e9a06">&quot;STARTED&quot;</span><span style="color: #80a880">)</span><span style="color: #858580">)</span><span style="color: #6276ba">)</span><span style="color: #907373">)</span><span style="color: #709870">)</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span>

<span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-after-todo-state-change-hook</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bh/mark-parent-tasks-started</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-AutomaticallyClockingTasks" class="outline-3">
      <h3 id="AutomaticallyClockingTasks"><a id="sec-19-7" name="sec-19-7"></a><span class="section-number-3">19.7</span> Automatically clocking tasks</h3>

      <div id="text-AutomaticallyClockingTasks" class="outline-text-3">
        <p>I used to spend time on an open source project called BZFlag. During work for releases I want to clock the time I spend testing the new BZFlag client. I have a key binding in my window manager that runs a script which starts the clock on my testing task, runs the BZFlag client, and on exit resumes the clock on the previous clocking task. </p>

        <p>The testing task has an ID property of <code>dcf55180-2a18-460e-8abb-a9f02f0893be</code> and the following elisp code starts the clock on this task. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/clock-in-bzflagt-task</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span>bh/clock-in-task-by-id <span style="color: #4e9a06">&quot;dcf55180-2a18-460e-8abb-a9f02f0893be&quot;</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>This is invoked by a bash shell script as follows: </p>

        <div class="org-src-container">
          <pre class="src src-sh"><span style="color: #204a87">#</span><span style="color: #204a87">!/bin/</span><span style="font-weight: bold; color: #a52a2a">sh</span>
emacsclient -e <span style="color: #4e9a06">'(bh/clock-in-bzflagt-task)'</span>
~/git/bzflag/trunk/bzflag/src/bzflag/bzflag -directory ~/git/bzflag/trunk/bzflag/data $<span style="font-weight: bold; color: #0084c8">*</span>
emacsclient -e <span style="color: #4e9a06">'(bh/resume-clock)'</span></pre>
        </div>

        <p>The resume clock function just returns the clock to the previous clocking task </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">defun</span> <span style="font-weight: bold; color: #00578e">bh/resume-clock</span> <span style="color: #7388d6">()</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">interactive</span><span style="color: #7388d6">)</span>
  <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">if</span> <span style="color: #909183">(</span>marker-buffer org-clock-interrupted-task<span style="color: #909183">)</span>
      <span style="color: #909183">(</span><span style="font-weight: bold; color: #a52a2a">org-with-point-at</span> org-clock-interrupted-task
        <span style="color: #709870">(</span>org-clock-in<span style="color: #709870">)</span><span style="color: #909183">)</span>
    <span style="color: #909183">(</span>org-clock-out<span style="color: #909183">)</span><span style="color: #7388d6">)</span><span style="color: #707183">)</span></pre>
        </div>

        <p>If no task was clocking <code>bh/resume-clock</code> just stops the clock. </p>
      </div>
    </div>

    <div id="outline-container-QBuriesAgenda" class="outline-3">
      <h3 id="QBuriesAgenda"><a id="sec-19-8" name="sec-19-8"></a><span class="section-number-3">19.8</span> q buries the agenda view buffer</h3>

      <div id="text-QBuriesAgenda" class="outline-text-3">
        

        <p>With <a href="#StickyAgendas">Sticky Agendas</a> burying the buffer is the default behaviour for the <code>q</code> key so this is not needed anymore. </p>

        <p>I change the <code>q</code> key in the agenda so instead of killing the agenda buffer it merely buries it to the end of the buffer list. This allows me to pull it back up quickly with the <code>q</code> speed key or <code>f9 f9</code> and regenerate the results with <code>g</code>. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>add-hook <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-agenda-mode-hook</span>
          <span style="color: #7388d6">(</span><span style="font-weight: bold; color: #a52a2a">lambda</span> <span style="color: #909183">()</span>
            <span style="color: #909183">(</span>define-key org-agenda-mode-map <span style="color: #4e9a06">&quot;q&quot;</span> <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">bury-buffer</span><span style="color: #909183">)</span><span style="color: #7388d6">)</span>
          <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">append</span><span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>

    <div id="outline-container-TaskPriorities" class="outline-3">
      <h3 id="TaskPriorities"><a id="sec-19-9" name="sec-19-9"></a><span class="section-number-3">19.9</span> Task Priorities</h3>

      <div id="text-TaskPriorities" class="outline-text-3">
        <p>I use the agenda to figure out what to do work on next. I don't use priorities at all normally but at work I occasionally get priorities from my manager. In this case I mark my tasks with the priorities from the external source just to track the values and force the agenda to display tasks in the priority order. </p>

        <p>I use priorities A-E where tasks without a specific priority are lowest priority E. </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-enable-priority-commands t<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-default-priority ?E<span style="color: #707183">)</span>
<span style="color: #707183">(</span><span style="font-weight: bold; color: #a52a2a">setq</span> org-lowest-priority ?E<span style="color: #707183">)</span></pre>
        </div>
      </div>
    </div>
  </div>

  <div id="outline-container-GitSync" class="outline-2">
    <h2 id="GitSync"><a id="sec-20" name="sec-20"></a><span class="section-number-2">20</span> Using Git for Automatic History, Backups, and Synchronization</h2>

    <div id="text-GitSync" class="outline-text-2">
      <p>Editing folded regions of your org-mode file can be hazardous to your data. My method for dealing with this is to put my org files in a <code>Git</code> source repository. </p>

      <p>My setup saves all of my org-files every hour and creates a commit with my changes automatically. This lets me go back in time and view the state of my org files for any given hour over the lifetime of the document. I've used this once or twice to recover data I accidentally removed while editing folded regions. </p>
    </div>

    <div id="outline-container-HourlyCommits" class="outline-3">
      <h3 id="HourlyCommits"><a id="sec-20-1" name="sec-20-1"></a><span class="section-number-3">20.1</span> Automatic Hourly Commits</h3>

      <div id="text-HourlyCommits" class="outline-text-3">
        <p>My Emacs setup saves all org buffers at 1 minute before the hour using the following code in my <code>.emacs</code> </p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp"><span style="color: #707183">(</span>run-at-time <span style="color: #4e9a06">&quot;00:59&quot;</span> 3600 <span style="font-weight: bold; color: #a52a2a">'</span><span style="color: #f5666d">org-save-all-org-buffers</span><span style="color: #707183">)</span></pre>
        </div>

        <p>A <code>cron</code> job runs at the top of the hour to commit any changes just saved by the call to <code>org-save-all-org-buffers</code> above. I use a script to create the commits so that I can run it on demand to easily commit all modified work when moving from one machine to another. </p>

        <p><code>crontab</code> details: </p>

        <pre class="example">0 * * * * ~/bin/org-git-sync.sh &gt;/dev/null</pre>
      </div>

      <div id="outline-container-OrgGitSyncSh" class="outline-4">
        <h4 id="OrgGitSyncSh"><a id="sec-20-1-1" name="sec-20-1-1"></a><span class="section-number-4">20.1.1</span> ~/bin/org-git-sync.sh</h4>

        <div id="text-OrgGitSyncSh" class="outline-text-4">
          <p>Here is the shell script I use to create a <code>git</code> commit for each of my org-repositories. This loops through multiple repositories and commits any modified files. I have the following org-mode repositories: </p>

          <ul class="org-ul">
            <li>org 
              <p>for all of my organization project files and todo lists </p>
            </li>

            <li>doc-norang.ca 
              <p>for any changes to documents under <a href="http://doc.norang.ca/">http://doc.norang.ca/</a> </p>
            </li>

            <li>www.norang.ca 
              <p>for any changes to my other website <a href="http://www.norang.ca/">http://www.norang.ca/</a> </p>
            </li>
          </ul>

          <p>This script does not create empty commits - <code>git</code> only creates a commit if something was modified. </p>

          <div class="org-src-container">
            <pre class="src src-sh"><span style="color: #204a87">#</span><span style="color: #204a87">!/bin/</span><span style="font-weight: bold; color: #a52a2a">sh</span>
<span style="color: #204a87"># </span><span style="color: #204a87">Add org file changes to the repository</span>
<span style="font-weight: bold; color: #0084c8">REPOS</span>=<span style="color: #4e9a06">&quot;org doc.norang.ca www.norang.ca&quot;</span>

<span style="font-weight: bold; color: #a52a2a">for</span> REPO<span style="font-weight: bold; color: #a52a2a"> in</span> $<span style="font-weight: bold; color: #0084c8">REPOS</span>
<span style="font-weight: bold; color: #a52a2a">do</span>
    <span style="color: #a020f0">echo</span> <span style="color: #4e9a06">&quot;Repository: $REPO&quot;</span>
    <span style="color: #a020f0">cd</span> ~/git/$<span style="font-weight: bold; color: #0084c8">REPO</span>
    <span style="color: #204a87"># </span><span style="color: #204a87">Remove deleted files</span>
    git ls-files --deleted -z | xargs -0 git rm &gt;/dev/null 2&gt;&amp;1
    <span style="color: #204a87"># </span><span style="color: #204a87">Add new files</span>
    git add . &gt;/dev/null 2&gt;&amp;1
    git commit -m <span style="color: #4e9a06">&quot;$(date)&quot;</span>
<span style="font-weight: bold; color: #a52a2a">done</span></pre>
          </div>

          <p>I use the following <code>.gitignore</code> file in my org-mode <code>git</code> repositories to keep export generated files out of my <code>git</code> repositories. If I include a graphic from some other source than ditaa or graphviz then I'll add it to the repository manually. By default all PNG graphic files are ignored (since I assume they are produced by ditaa during export) </p>

          <pre class="example">core
core.*
*.html
*~
.#*
\#*\#
*.txt
*.tex
*.aux
*.dvi
*.log
*.out
*.ics
*.pdf
*.xml
*.org-source
*.png
*.toc</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-GitEditWithConfidence" class="outline-3">
      <h3 id="GitEditWithConfidence"><a id="sec-20-2" name="sec-20-2"></a><span class="section-number-3">20.2</span> Git - Edit files with confidence</h3>

      <div id="text-GitEditWithConfidence" class="outline-text-3">
        <p>I use <code>git</code> in all of my directories where editing a file should be tracked. </p>

        <p>This means I can edit files with confidence. I'm free to change stuff and break things because it won't matter. It's easy to go back to a previous working version or to see exactly what changed since the last commit. This is great when editing configuration files (such as apache webserver, bind9 DNS configurations, etc.) </p>

        <p>I find this extremely useful where your edits might break things and having <code>git</code> tracking the changes means if you break it you can just go back to the previous working version easily. This is also true for package upgrades for software where the upgrade modifies the configuration files. </p>

        <p>I have every version of my edits in a local <code>git</code> repository. </p>
      </div>
    </div>

    <div id="outline-container-git-sync" class="outline-3">
      <h3 id="git-sync"><a id="sec-20-3" name="sec-20-3"></a><span class="section-number-3">20.3</span> Git Repository synchronization</h3>

      <div id="text-git-sync" class="outline-text-3">
        <p>I acquired a Eee PC 1000 HE which now serves as my main road-warrior laptop replacing my 6 year old Toshiba Tecra S1. </p>

        <p>I have a server on my LAN that hosts bare git repositories for all of my projects. The problem I was facing is I have to leave in 5 minutes and want to make sure I have up-to-date copies of everything I work on when I take it on the road (without Internet access). </p>

        <p>To solve this I use a server with bare git repositories on it. This includes my org-mode repositories as well as any other git repositories I'm interested in. </p>

        <p>Just before I leave I run the <code>git-sync</code> script on my workstation to update the bare git repositories and then I run it again on my Eee PC to update all my local repositories on the laptop. For any repositories that give errors due to non-fast-forward merges I manually merge as required and rerun <code>git-sync</code> until it reports no errors. This normally takes a minute or two to do. Then I grab my Eee PC and leave. When I'm on the road I have full up-to-date history of all my git repositories. </p>

        <p>The <code>git-sync</code> script replaces my previous scripts with an all-in-one tool that basically does this: </p>

        <ul class="org-ul">
          <li>for each repository on the current system 
            <ul class="org-ul">
              <li>fetch objects from the remote </li>

              <li>for each branch that tracks a remote branch 
                <ul class="org-ul">
                  <li>Check if the ref can be moved 
                    <ul class="org-ul">
                      <li>fast-forwards if behind the remote repository and is fast-forwardable </li>

                      <li>Does nothing if ref is up to date </li>

                      <li>Pushes ref to remote repository if ref is ahead of remote repository and fast-forwardable </li>

                      <li>Fails if ref and remote have diverged </li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>

        <p>This automatically advances changes on my 35+ git repositories with minimal manual intervention. The only time I need to manually do something in a repository is when I make changes on my Eee PC and my workstation at the same time - so that a merge is required. </p>

        <p>Here is the <code>git-sync</code> script </p>

        <div class="org-src-container">
          <pre class="src src-sh"><span style="color: #204a87">#</span><span style="color: #204a87">!/bin/</span><span style="font-weight: bold; color: #a52a2a">sh</span>
<span style="color: #204a87">#</span>

<span style="color: #204a87"># </span><span style="color: #204a87">Local bare repository name</span>
<span style="font-weight: bold; color: #0084c8">syncrepo</span>=norang
<span style="font-weight: bold; color: #0084c8">reporoot</span>=~/git

<span style="color: #204a87"># </span><span style="color: #204a87">Display repository name only once</span>
<span style="font-weight: bold; color: #00578e">log_repo</span>() {
  [ <span style="color: #4e9a06">&quot;x$lastrepo&quot;</span> == <span style="color: #4e9a06">&quot;x$repo&quot;</span> ] || {
    printf <span style="color: #4e9a06">&quot;\nREPO: ${repo}\n&quot;</span>
    <span style="font-weight: bold; color: #0084c8">lastrepo</span>=<span style="color: #4e9a06">&quot;$repo&quot;</span>
  }
}

<span style="color: #204a87"># </span><span style="color: #204a87">Log a message for a repository</span>
<span style="font-weight: bold; color: #00578e">log_msg</span>() {
  log_repo
  printf <span style="color: #4e9a06">&quot;  $1\n&quot;</span>
}

<span style="color: #204a87"># </span><span style="color: #204a87">fast-forward reference $1 to $syncrepo/$1</span>
<span style="font-weight: bold; color: #00578e">fast_forward_ref</span>() {
  log_msg <span style="color: #4e9a06">&quot;fast-forwarding ref $1&quot;</span>
  <span style="font-weight: bold; color: #0084c8">current_ref</span>=$(cat .git/HEAD)
  <span style="font-weight: bold; color: #a52a2a">if</span> [ <span style="color: #4e9a06">&quot;x$current_ref&quot;</span> = <span style="color: #4e9a06">&quot;xref: refs/heads/$1&quot;</span> ]
  <span style="font-weight: bold; color: #a52a2a">then</span>
    <span style="color: #204a87"># </span><span style="color: #204a87">Check for dirty index</span>
    <span style="font-weight: bold; color: #0084c8">files</span>=$(git diff-index --name-only HEAD --)
    git merge refs/remotes/$<span style="font-weight: bold; color: #0084c8">syncrepo</span>/$<span style="font-weight: bold; color: #0084c8">1</span>
  <span style="font-weight: bold; color: #a52a2a">else</span>
    git branch -f $<span style="font-weight: bold; color: #0084c8">1</span> refs/remotes/$<span style="font-weight: bold; color: #0084c8">syncrepo</span>/$<span style="font-weight: bold; color: #0084c8">1</span>
  <span style="font-weight: bold; color: #a52a2a">fi</span>
}

<span style="color: #204a87"># </span><span style="color: #204a87">Push reference $1 to $syncrepo</span>
<span style="font-weight: bold; color: #00578e">push_ref</span>() {
  log_msg <span style="color: #4e9a06">&quot;Pushing ref $1&quot;</span>
  <span style="font-weight: bold; color: #a52a2a">if</span> ! git push --tags $<span style="font-weight: bold; color: #0084c8">syncrepo</span> $<span style="font-weight: bold; color: #0084c8">1</span>
  <span style="font-weight: bold; color: #a52a2a">then</span>
    <span style="font-weight: bold; color: #a52a2a">exit</span> 1
  <span style="font-weight: bold; color: #a52a2a">fi</span>
}

<span style="color: #204a87"># </span><span style="color: #204a87">Check if a ref can be moved</span>
<span style="color: #204a87">#   </span><span style="color: #204a87">- fast-forwards if behind the sync repo and is fast-forwardable</span>
<span style="color: #204a87">#   </span><span style="color: #204a87">- Does nothing if ref is up to date</span>
<span style="color: #204a87">#   </span><span style="color: #204a87">- Pushes ref to $syncrepo if ref is ahead of syncrepo and fastforwardable</span>
<span style="color: #204a87">#   </span><span style="color: #204a87">- Fails if ref and $syncrop/ref have diverged</span>
<span style="font-weight: bold; color: #00578e">check_ref</span>() {
  <span style="font-weight: bold; color: #0084c8">revlist1</span>=$(git rev-list refs/remotes/$<span style="font-weight: bold; color: #0084c8">syncrepo</span>/$<span style="font-weight: bold; color: #0084c8">1</span>..$<span style="font-weight: bold; color: #0084c8">1</span>)
  <span style="font-weight: bold; color: #0084c8">revlist2</span>=$(git rev-list $<span style="font-weight: bold; color: #0084c8">1</span>..refs/remotes/$<span style="font-weight: bold; color: #0084c8">syncrepo</span>/$<span style="font-weight: bold; color: #0084c8">1</span>)
  <span style="font-weight: bold; color: #a52a2a">if</span> [ <span style="color: #4e9a06">&quot;x$revlist1&quot;</span> = <span style="color: #4e9a06">&quot;x&quot;</span> -a <span style="color: #4e9a06">&quot;x$revlist2&quot;</span> = <span style="color: #4e9a06">&quot;x&quot;</span> ]
  <span style="font-weight: bold; color: #a52a2a">then</span>
    <span style="color: #204a87"># </span><span style="color: #204a87">Ref $1 is up to date.</span>
    :
  <span style="font-weight: bold; color: #a52a2a">elif</span> [ <span style="color: #4e9a06">&quot;x$revlist1&quot;</span> = <span style="color: #4e9a06">&quot;x&quot;</span> ]
  <span style="font-weight: bold; color: #a52a2a">then</span>
    <span style="color: #204a87"># </span><span style="color: #204a87">Ref $1 is behind $syncrepo/$1 and can be fast-forwarded.</span>
    fast_forward_ref $<span style="font-weight: bold; color: #0084c8">1</span> || <span style="font-weight: bold; color: #a52a2a">exit</span> 1
  <span style="font-weight: bold; color: #a52a2a">elif</span> [ <span style="color: #4e9a06">&quot;x$revlist2&quot;</span> = <span style="color: #4e9a06">&quot;x&quot;</span> ]
  <span style="font-weight: bold; color: #a52a2a">then</span>
    <span style="color: #204a87"># </span><span style="color: #204a87">Ref $1 is ahead of $syncrepo/$1 and can be pushed.</span>
    push_ref $<span style="font-weight: bold; color: #0084c8">1</span> || <span style="font-weight: bold; color: #a52a2a">exit</span> 1
  <span style="font-weight: bold; color: #a52a2a">else</span>
    log_msg <span style="color: #4e9a06">&quot;Ref $1 and $syncrepo/$1 have diverged.&quot;</span>
    <span style="font-weight: bold; color: #a52a2a">exit</span> 1
  <span style="font-weight: bold; color: #a52a2a">fi</span>
}

<span style="color: #204a87"># </span><span style="color: #204a87">Check all local refs with matching refs in the $syncrepo</span>
<span style="font-weight: bold; color: #00578e">check_refs</span> () {
  git for-each-ref refs/heads/* | <span style="font-weight: bold; color: #a52a2a">while </span><span style="color: #a020f0">read</span> sha1 commit ref
  <span style="font-weight: bold; color: #a52a2a">do</span>
    <span style="font-weight: bold; color: #0084c8">ref</span>=${<span style="font-weight: bold; color: #0084c8">ref</span>/refs<span style="color: #4e9a06">\/</span>heads<span style="color: #4e9a06">\/</span>/}
    git for-each-ref refs/remotes/$<span style="font-weight: bold; color: #0084c8">syncrepo</span>/$<span style="font-weight: bold; color: #0084c8">ref</span> | <span style="font-weight: bold; color: #a52a2a">while </span><span style="color: #a020f0">read</span> sha2 commit ref2
    <span style="font-weight: bold; color: #a52a2a">do</span>
      <span style="font-weight: bold; color: #a52a2a">if</span> [ <span style="color: #4e9a06">&quot;x$sha2&quot;</span> != <span style="color: #4e9a06">&quot;x&quot;</span> -a <span style="color: #4e9a06">&quot;x$sha2&quot;</span> != <span style="color: #4e9a06">&quot;x&quot;</span> ]
      <span style="font-weight: bold; color: #a52a2a">then</span>
        check_ref $<span style="font-weight: bold; color: #0084c8">ref</span> || <span style="font-weight: bold; color: #a52a2a">exit</span> 1
      <span style="font-weight: bold; color: #a52a2a">fi</span>
    <span style="font-weight: bold; color: #a52a2a">done</span>
  <span style="font-weight: bold; color: #a52a2a">done</span>
}

<span style="color: #204a87"># </span><span style="color: #204a87">For all repositories under $reporoot</span>
<span style="color: #204a87">#   </span><span style="color: #204a87">Check all refs matching $syncrepo and fast-forward, or push as necessary</span>
<span style="color: #204a87">#   </span><span style="color: #204a87">to synchronize the ref with $syncrepo</span>
<span style="color: #204a87">#   </span><span style="color: #204a87">Bail out if ref is not fastforwardable so user can fix and rerun</span>
time {
  <span style="font-weight: bold; color: #0084c8">retval</span>=0
  <span style="font-weight: bold; color: #a52a2a">if</span> find $<span style="font-weight: bold; color: #0084c8">reporoot</span> -type d -name <span style="color: #4e9a06">'*.git'</span> | { 
      <span style="font-weight: bold; color: #a52a2a">while </span><span style="color: #a020f0">read</span> repo
      <span style="font-weight: bold; color: #a52a2a">do</span>
        <span style="font-weight: bold; color: #0084c8">repo</span>=${<span style="font-weight: bold; color: #0084c8">repo</span>/<span style="color: #4e9a06">\/</span>.git/}
        <span style="color: #a020f0">cd</span> ${<span style="font-weight: bold; color: #0084c8">repo</span>}
        <span style="font-weight: bold; color: #0084c8">upd</span>=$(git remote update $<span style="font-weight: bold; color: #0084c8">syncrepo</span> 2&gt;&amp;1 || <span style="font-weight: bold; color: #0084c8">retval</span>=1)
        [ <span style="color: #4e9a06">&quot;x$upd&quot;</span> = <span style="color: #4e9a06">&quot;xFetching $syncrepo&quot;</span> ] || {
          log_repo
          printf <span style="color: #4e9a06">&quot;$upd\n&quot;</span>
        }
        check_refs || <span style="font-weight: bold; color: #0084c8">retval</span>=1
      <span style="font-weight: bold; color: #a52a2a">done</span>
      <span style="font-weight: bold; color: #a52a2a">exit</span> $<span style="font-weight: bold; color: #0084c8">retval</span>
    }
  <span style="font-weight: bold; color: #a52a2a">then</span>
    printf <span style="color: #4e9a06">&quot;\nAll done.\n&quot;</span>
  <span style="font-weight: bold; color: #a52a2a">else</span>
    printf <span style="color: #4e9a06">&quot;\nFix and redo.\n&quot;</span>
  <span style="font-weight: bold; color: #a52a2a">fi</span>
}

<span style="font-weight: bold; color: #a52a2a">exit</span> $<span style="font-weight: bold; color: #0084c8">retval</span></pre>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="postamble" class="status">
  <p class="author">Author: Bernt Hansen (IRC: BerntH on freenode)</p>

  <p class="email">Email: <a href="mailto:bernt@norang.ca">bernt@norang.ca</a></p>

  <p class="date">Created: 2016-06-29 周三 10:08</p>

  <p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.0.94.2 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>

  <p class="validation"></p>
</div><P></P>
